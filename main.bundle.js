/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	eval("var GameObjects = __webpack_require__(1);\nvar Snake = GameObjects.Snake;\nvar Segment = GameObjects.Segment;\nvar Food = GameObjects.Food;\nvar Grid = GameObjects.Grid;\n\nwindow.onload = function () {\n    const canvasWidth = 720;\n    const canvasHeight = 420;\n\n    var FPS = 60;\n    var gameLoop;\n    var gameRunning = true;\n\n    var dirKeyLookup = {\n        37: 'WEST',\n        38: 'NORTH',\n        39: 'EAST',\n        40: 'SOUTH'\n    };\n\n    var reverseDirKeyLookup = {\n        WEST: 37,\n        NORTH: 38,\n        EAST: 39,\n        SOUTH: 40\n    };\n\n    var unallowedDirLookup = {\n        'WEST': 39,\n        'NORTH': 40,\n        'EAST': 37,\n        'SOUTH': 38\n    };\n\n    var updateHeadByDirection = {\n        NORTH: {\n            y: -1 * Segment.SEGMENT_SIZE,\n            x: 0\n        },\n        SOUTH: {\n            y: Segment.SEGMENT_SIZE,\n            x: 0\n        },\n        EAST: {\n            y: 0,\n            x: Segment.SEGMENT_SIZE\n        },\n        WEST: {\n            y: 0,\n            x: -1 * Segment.SEGMENT_SIZE\n        }\n    };\n\n    var fringeSet = [];\n    var closedSet = [];\n    var nodePath = [];\n\n    function validDirectionChange(keyCode, currentDirection) {\n        var direction = dirKeyLookup[keyCode];\n        if (currentDirection === direction) {\n            return false;\n        }\n        var unallowed = unallowedDirLookup[currentDirection];\n        return keyCode != unallowed;\n    }\n\n    function insideWorldBounds(keyCode, head) {\n        var direction = dirKeyLookup[keyCode];\n        var directionUpdate = updateHeadByDirection[direction];\n        var newX = head.x + directionUpdate.x;\n        var newY = head.y + directionUpdate.y;\n        return newX <= canvasWidth && newX >= 0 && newY <= canvasHeight && newY >= 0;\n    }\n\n    function updateSnakeFromNode(node) {\n        snake.head.colour = 'black';\n        snake.head.draw();\n        var curHeadX = snake.head.x;\n        var curHeadY = snake.head.y;\n        snake.tail.clear();\n        var newTail = snake.tail.next;\n        var newHead = new Segment({\n            x: node.x,\n            y: node.y,\n            ctx: node.ctx,\n            type: \"snake\"\n        });\n\n        newHead.next = null;\n        snake.head.next = newHead;\n        snake.head = newHead;\n        snake.tail = newTail;\n        snake.head.colour = 'red';\n    }\n\n    function updateSnakeFromDirection(snake, keycode) {\n        snake.head.colour = 'black';\n        snake.head.draw();\n        var curHeadX = snake.head.x;\n        var curHeadY = snake.head.y;\n        snake.tail.clear();\n        var newTail = snake.tail.next;\n        var newHead = snake.tail;\n        newHead.next = null;\n        snake.head.next = newHead;\n        snake.head = newHead;\n        snake.tail = newTail;\n        var direction = dirKeyLookup[keycode];\n        var dirctionUpdate = updateHeadByDirection[direction];\n        snake.head.x = curHeadX + dirctionUpdate.x;\n        snake.head.y = curHeadY + dirctionUpdate.y;\n        snake.head.colour = 'red';\n        snake.head.draw();\n        snake.currentDirection = direction;\n    }\n\n    function checkCollisions(snake) {\n\n        var getNewFoodPos = function () {\n            food.setNewPosition();\n            if (snake.cellIsSnake(food.item)) {\n                getNewFoodPos();\n            }\n        };\n\n        if (snake.head.equal(food.item)) {\n            snake.grow();\n            getNewFoodPos();\n            updateScore();\n            return true;\n        }\n\n        // if(snake.head.equal(snake.tail)) {\n        //     resetGame(snake);\n        //     return false;\n        // }\n\n        // var current = snake.tail;\n        // while(current != snake.head) {\n        //     if(snake.head.equal(current)) {\n        //         resetGame(snake);\n        //         return false;\n        //     }\n        //     current = current.next;\n        // }\n        // return true;\n    }\n\n    function search() {\n        fringeSet.forEach(function (node) {\n            node.clear();\n        });\n\n        closedSet.forEach(function (node) {\n            node.colour = \"yellow\";\n            node.clear();\n        });\n        fringeSet = [];\n        closedSet = [];\n        fringeSet.push(snake.head);\n\n        var node = findRoute();\n        if (node.equal(food.item)) {\n            food.item.colour = \"pink\";\n            fringeSet.forEach(function (node) {\n                node.colour = \"orange\";\n                node.draw();\n            });\n\n            closedSet.forEach(function (node) {\n                node.colour = \"yellow\";\n                node.draw();\n            });\n\n            if (node) {\n                nodePath.unshift(node);\n                var curNode = node.parent;\n                while (curNode) {\n                    curNode.draw(\"blue\");\n                    nodePath.unshift(curNode);\n                    curNode = curNode.parent;\n                }\n            }\n        }\n    }\n\n    function addChildrenToFringeSet(parentNode) {\n\n        var northCoords = {\n            x: parentNode.x / Segment.SEGMENT_SIZE,\n            y: (parentNode.y - Segment.SEGMENT_SIZE) / Segment.SEGMENT_SIZE\n        };\n        var southCoords = {\n            x: parentNode.x / Segment.SEGMENT_SIZE,\n            y: (parentNode.y + Segment.SEGMENT_SIZE) / Segment.SEGMENT_SIZE\n        };\n        var westCoords = {\n            x: (parentNode.x - Segment.SEGMENT_SIZE) / Segment.SEGMENT_SIZE,\n            y: parentNode.y / Segment.SEGMENT_SIZE\n        };\n        var eastCoords = {\n            x: (parentNode.x + Segment.SEGMENT_SIZE) / Segment.SEGMENT_SIZE,\n            y: parentNode.y / Segment.SEGMENT_SIZE\n        };\n        var children = [];\n\n        if (parentNode.y - Segment.SEGMENT_SIZE >= 0) {\n            var cellToConsider = grid.cells[northCoords.x][northCoords.y];\n            if (cellToConsider && !snake.cellIsSnake(cellToConsider)) {\n                children.push(cellToConsider);\n            }\n        }\n        if (parentNode.y + Segment.SEGMENT_SIZE < canvasHeight) {\n            var cellToConsider = grid.cells[southCoords.x][southCoords.y];\n            if (cellToConsider && !snake.cellIsSnake(cellToConsider)) {\n                children.push(cellToConsider);\n            }\n        }\n        if (parentNode.x - Segment.SEGMENT_SIZE >= 0) {\n            var cellToConsider = grid.cells[westCoords.x][westCoords.y];\n            if (cellToConsider && !snake.cellIsSnake(cellToConsider)) {\n                children.push(cellToConsider);\n            }\n        }\n        if (parentNode.x + Segment.SEGMENT_SIZE < canvasWidth) {\n            var cellToConsider = grid.cells[eastCoords.x][eastCoords.y];\n            if (cellToConsider && !snake.cellIsSnake(cellToConsider)) {\n                children.push(cellToConsider);\n            }\n        }\n\n        children.forEach(function (child) {\n\n            var found = null;\n            var childIsInClosed = closedSet.some(function (item) {\n                return item.equal(child);\n            });\n            if (!childIsInClosed) {\n                child.d = parentNode.d + distanceFromNodeToNode(parentNode, child);\n                var L2 = distanceFromNodeToNode(child, food.item);\n                child.dPlusL2 = child.d + L2;\n                child.parent = parentNode;\n            }\n            fringeSet.push(child);\n        });\n\n        fringeSet.sort(function (a, b) {\n            return a.dPlusL2 > b.dPlusL2 ? 1 : -1;\n        });\n    }\n\n    //http://mnemstudio.org/path-finding-a-star.htm\n    function findRoute() {\n        if (fringeSet.length === 0) {\n            return snake.head;\n        } else {\n            var node = fringeSet.shift();\n            if (node.equal(food.item)) {\n                return node;\n            } else {\n                var found = null;\n                var nodeIsInClosed = closedSet.some(function (item) {\n                    return item.equal(node);\n                });\n                if (!nodeIsInClosed) {\n                    closedSet.push(node);\n                    addChildrenToFringeSet(node);\n                }\n                return findRoute();\n            }\n        }\n    }\n\n    function distanceFromNodeToNode(node1, node2) {\n        var node1X = node1.x;\n        var node1Y = node1.y;\n\n        var node2X = node2.x;\n        var node2Y = node2.y;\n\n        var dx = node2X - node1X;\n        var dy = node2Y - node1Y;\n        var distance = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n        return distance;\n    }\n\n    // document.addEventListener('keydown', function(event) {\n    //     if(event.keyCode === 81) {\n    //         gameRunning = false;\n    //     } else if(event.keyCode == 37 || event.keyCode == 39 || event.keyCode == 38 || event.keyCode == 40) { //LEFT\n    //         var validUpdate = validDirectionChange(event.keyCode, snake.currentDirection) && insideWorldBounds(event.keyCode, snake.head);\n    //         if(validUpdate) {\n    //             updateSnakeFromDirection(snake, event.keyCode);\n    //         }\n    //     } else if(event.keyCode === 32) {\n    //         search();\n    //         var node = findRoute();\n    //         if(node.equal(food.item)) {\n    //             food.item.colour = \"pink\";\n    //             fringeSet.forEach(function(node) {\n    //                 node.colour = \"orange\";\n    //                 //node.draw();\n    //             });\n\n    //             closedSet.forEach(function(node) {\n    //                 node.colour = \"yellow\";\n    //                 //node.draw();\n    //             });\n\n    //             if(node) {\n    //                 nodePath.unshift(node);\n    //                 var curNode = node.parent;\n    //                 while(curNode) {\n    //                     curNode.draw(\"blue\");\n    //                     nodePath.unshift(curNode);\n    //                     curNode = curNode.parent;\n    //                 }\n    //             }\n    //         }\n    //     }\n    // });\n\n\n    /*\r\n                     (_)      \r\n      _ __ ___   __ _ _ _ __  \r\n     | '_ ` _ \\ / _` | | '_ \\ \r\n     | | | | | | (_| | | | | |\r\n     |_| |_| |_|\\__,_|_|_| |_|\r\n    */\n    var canvasEl = document.getElementById('main');\n    canvasEl.style.backgroundColor = 'rgba(158, 167, 184, 0.2)';\n    canvasEl.width = canvasWidth;\n    canvasEl.height = canvasHeight;\n    var ctx = canvasEl.getContext('2d');\n    var g = GameObjects;\n    var snake = new Snake({\n        x: canvasWidth / 2,\n        y: canvasHeight / 2,\n        ctx: ctx\n    });\n\n    var grid = new Grid(ctx, canvasWidth, canvasHeight, Segment.SEGMENT_SIZE);\n    grid.draw();\n    var food = new Food(ctx, canvasWidth, canvasHeight);\n\n    var lastFrameTimeMs = 0; // The last time the loop was run\n    var maxFPS = 31; // The maximum FPS we want to allow\n    snake.currentDirection = 'EAST';\n    snake.drawAll();\n    var currentScore = -1;\n\n    function updateScore(value) {\n        document.getElementById(\"score\").textContent = \"SCORE: \" + ++currentScore;\n    }\n\n    updateScore();\n\n    // function resetGame(snake) {\n    //     snake.clearAll();\n    //     snake.reset();\n    //     food.clear();\n    //     food.setNewPosition();\n    //     currentScore = -1;\n    //     updateScore();           \n    // }\n\n    // function update(direction) {\n    //     direction = direction || snake.currentDirection;\n    //     var keyCode = reverseDirKeyLookup[direction];\n    //     var insideWorld = insideWorldBounds(keyCode, snake.head);\n    //     if(insideWorld) {\n    //         var check = checkCollisions(snake);\n    //         if(check) {\n    //             updateSnakeFromDirection(snake, keyCode);\n    //         }\n    //         checkCollisions(snake);\n    //     } else {\n    //         resetGame(snake);            \n    //     }\n    // }\n\n    function update() {\n        var node = nodePath.shift();\n        if (node) {\n            updateSnakeFromNode(node);\n            checkCollisions(snake);\n        }\n    }\n\n    function draw() {\n        food.draw();\n        snake.drawAll();\n    }\n\n    function gameLoop(timeStamp) {\n        if (gameRunning) {\n            if (timeStamp < lastFrameTimeMs + 1000 / maxFPS) {\n                requestAnimationFrame(gameLoop);\n                return;\n            }\n            lastFrameTimeMs = timeStamp;\n            if (!nodePath.length) {\n                search();\n            }\n            update();\n            draw();\n            requestAnimationFrame(gameLoop);\n        }\n    }\n    requestAnimationFrame(gameLoop);\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAuanM/ZDhlZSJdLCJuYW1lcyI6WyJHYW1lT2JqZWN0cyIsInJlcXVpcmUiLCJTbmFrZSIsIlNlZ21lbnQiLCJGb29kIiwiR3JpZCIsIndpbmRvdyIsIm9ubG9hZCIsImNhbnZhc1dpZHRoIiwiY2FudmFzSGVpZ2h0IiwiRlBTIiwiZ2FtZUxvb3AiLCJnYW1lUnVubmluZyIsImRpcktleUxvb2t1cCIsInJldmVyc2VEaXJLZXlMb29rdXAiLCJXRVNUIiwiTk9SVEgiLCJFQVNUIiwiU09VVEgiLCJ1bmFsbG93ZWREaXJMb29rdXAiLCJ1cGRhdGVIZWFkQnlEaXJlY3Rpb24iLCJ5IiwiU0VHTUVOVF9TSVpFIiwieCIsImZyaW5nZVNldCIsImNsb3NlZFNldCIsIm5vZGVQYXRoIiwidmFsaWREaXJlY3Rpb25DaGFuZ2UiLCJrZXlDb2RlIiwiY3VycmVudERpcmVjdGlvbiIsImRpcmVjdGlvbiIsInVuYWxsb3dlZCIsImluc2lkZVdvcmxkQm91bmRzIiwiaGVhZCIsImRpcmVjdGlvblVwZGF0ZSIsIm5ld1giLCJuZXdZIiwidXBkYXRlU25ha2VGcm9tTm9kZSIsIm5vZGUiLCJzbmFrZSIsImNvbG91ciIsImRyYXciLCJjdXJIZWFkWCIsImN1ckhlYWRZIiwidGFpbCIsImNsZWFyIiwibmV3VGFpbCIsIm5leHQiLCJuZXdIZWFkIiwiY3R4IiwidHlwZSIsInVwZGF0ZVNuYWtlRnJvbURpcmVjdGlvbiIsImtleWNvZGUiLCJkaXJjdGlvblVwZGF0ZSIsImNoZWNrQ29sbGlzaW9ucyIsImdldE5ld0Zvb2RQb3MiLCJmb29kIiwic2V0TmV3UG9zaXRpb24iLCJjZWxsSXNTbmFrZSIsIml0ZW0iLCJlcXVhbCIsImdyb3ciLCJ1cGRhdGVTY29yZSIsInNlYXJjaCIsImZvckVhY2giLCJwdXNoIiwiZmluZFJvdXRlIiwidW5zaGlmdCIsImN1ck5vZGUiLCJwYXJlbnQiLCJhZGRDaGlsZHJlblRvRnJpbmdlU2V0IiwicGFyZW50Tm9kZSIsIm5vcnRoQ29vcmRzIiwic291dGhDb29yZHMiLCJ3ZXN0Q29vcmRzIiwiZWFzdENvb3JkcyIsImNoaWxkcmVuIiwiY2VsbFRvQ29uc2lkZXIiLCJncmlkIiwiY2VsbHMiLCJjaGlsZCIsImZvdW5kIiwiY2hpbGRJc0luQ2xvc2VkIiwic29tZSIsImQiLCJkaXN0YW5jZUZyb21Ob2RlVG9Ob2RlIiwiTDIiLCJkUGx1c0wyIiwic29ydCIsImEiLCJiIiwibGVuZ3RoIiwic2hpZnQiLCJub2RlSXNJbkNsb3NlZCIsIm5vZGUxIiwibm9kZTIiLCJub2RlMVgiLCJub2RlMVkiLCJub2RlMlgiLCJub2RlMlkiLCJkeCIsImR5IiwiZGlzdGFuY2UiLCJNYXRoIiwic3FydCIsInBvdyIsImNhbnZhc0VsIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwid2lkdGgiLCJoZWlnaHQiLCJnZXRDb250ZXh0IiwiZyIsImxhc3RGcmFtZVRpbWVNcyIsIm1heEZQUyIsImRyYXdBbGwiLCJjdXJyZW50U2NvcmUiLCJ2YWx1ZSIsInRleHRDb250ZW50IiwidXBkYXRlIiwidGltZVN0YW1wIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxjQUFjLG1CQUFBQyxDQUFRLENBQVIsQ0FBbEI7QUFDQSxJQUFJQyxRQUFRRixZQUFZRSxLQUF4QjtBQUNBLElBQUlDLFVBQVVILFlBQVlHLE9BQTFCO0FBQ0EsSUFBSUMsT0FBT0osWUFBWUksSUFBdkI7QUFDQSxJQUFJQyxPQUFPTCxZQUFZSyxJQUF2Qjs7QUFFQUMsT0FBT0MsTUFBUCxHQUFnQixZQUFXO0FBQ3ZCLFVBQU1DLGNBQWMsR0FBcEI7QUFDQSxVQUFNQyxlQUFlLEdBQXJCOztBQUVBLFFBQUlDLE1BQU0sRUFBVjtBQUNBLFFBQUlDLFFBQUo7QUFDQSxRQUFJQyxjQUFjLElBQWxCOztBQUVBLFFBQUlDLGVBQWU7QUFDZixZQUFJLE1BRFc7QUFFZixZQUFJLE9BRlc7QUFHZixZQUFJLE1BSFc7QUFJZixZQUFJO0FBSlcsS0FBbkI7O0FBT0MsUUFBSUMsc0JBQXNCO0FBQ3ZCQyxjQUFNLEVBRGlCO0FBRXZCQyxlQUFPLEVBRmdCO0FBR3ZCQyxjQUFNLEVBSGlCO0FBSXZCQyxlQUFPO0FBSmdCLEtBQTFCOztBQU9ELFFBQUlDLHFCQUFxQjtBQUNyQixnQkFBUSxFQURhO0FBRXJCLGlCQUFTLEVBRlk7QUFHckIsZ0JBQVEsRUFIYTtBQUlyQixpQkFBUztBQUpZLEtBQXpCOztBQU9BLFFBQUlDLHdCQUF3QjtBQUN4QkosZUFBTztBQUNISyxlQUFHLENBQUMsQ0FBRCxHQUFLbEIsUUFBUW1CLFlBRGI7QUFFSEMsZUFBRztBQUZBLFNBRGlCO0FBS3hCTCxlQUFPO0FBQ0hHLGVBQUdsQixRQUFRbUIsWUFEUjtBQUVIQyxlQUFHO0FBRkEsU0FMaUI7QUFTeEJOLGNBQU07QUFDRkksZUFBRyxDQUREO0FBRUZFLGVBQUdwQixRQUFRbUI7QUFGVCxTQVRrQjtBQWF4QlAsY0FBTTtBQUNGTSxlQUFHLENBREQ7QUFFRkUsZUFBRyxDQUFDLENBQUQsR0FBS3BCLFFBQVFtQjtBQUZkO0FBYmtCLEtBQTVCOztBQW1CQSxRQUFJRSxZQUFZLEVBQWhCO0FBQ0EsUUFBSUMsWUFBWSxFQUFoQjtBQUNBLFFBQUlDLFdBQVcsRUFBZjs7QUFFQSxhQUFTQyxvQkFBVCxDQUE4QkMsT0FBOUIsRUFBdUNDLGdCQUF2QyxFQUF5RDtBQUNyRCxZQUFJQyxZQUFZakIsYUFBYWUsT0FBYixDQUFoQjtBQUNBLFlBQUdDLHFCQUFxQkMsU0FBeEIsRUFBbUM7QUFDL0IsbUJBQU8sS0FBUDtBQUNIO0FBQ0QsWUFBSUMsWUFBWVosbUJBQW1CVSxnQkFBbkIsQ0FBaEI7QUFDQSxlQUFPRCxXQUFXRyxTQUFsQjtBQUNIOztBQUVELGFBQVNDLGlCQUFULENBQTJCSixPQUEzQixFQUFvQ0ssSUFBcEMsRUFBMEM7QUFDdEMsWUFBSUgsWUFBWWpCLGFBQWFlLE9BQWIsQ0FBaEI7QUFDQSxZQUFJTSxrQkFBa0JkLHNCQUFzQlUsU0FBdEIsQ0FBdEI7QUFDQSxZQUFJSyxPQUFPRixLQUFLVixDQUFMLEdBQVNXLGdCQUFnQlgsQ0FBcEM7QUFDQSxZQUFJYSxPQUFPSCxLQUFLWixDQUFMLEdBQVNhLGdCQUFnQmIsQ0FBcEM7QUFDQSxlQUFPYyxRQUFRM0IsV0FBUixJQUF3QjJCLFFBQVEsQ0FBaEMsSUFBcUNDLFFBQVEzQixZQUE3QyxJQUE2RDJCLFFBQVEsQ0FBNUU7QUFDSDs7QUFFRCxhQUFTQyxtQkFBVCxDQUE2QkMsSUFBN0IsRUFBbUM7QUFDL0JDLGNBQU1OLElBQU4sQ0FBV08sTUFBWCxHQUFvQixPQUFwQjtBQUNBRCxjQUFNTixJQUFOLENBQVdRLElBQVg7QUFDQSxZQUFJQyxXQUFXSCxNQUFNTixJQUFOLENBQVdWLENBQTFCO0FBQ0EsWUFBSW9CLFdBQVdKLE1BQU1OLElBQU4sQ0FBV1osQ0FBMUI7QUFDQWtCLGNBQU1LLElBQU4sQ0FBV0MsS0FBWDtBQUNBLFlBQUlDLFVBQVVQLE1BQU1LLElBQU4sQ0FBV0csSUFBekI7QUFDQSxZQUFJQyxVQUFVLElBQUk3QyxPQUFKLENBQVk7QUFDdEJvQixlQUFHZSxLQUFLZixDQURjO0FBRXRCRixlQUFHaUIsS0FBS2pCLENBRmM7QUFHdEI0QixpQkFBS1gsS0FBS1csR0FIWTtBQUl0QkMsa0JBQU07QUFKZ0IsU0FBWixDQUFkOztBQU9BRixnQkFBUUQsSUFBUixHQUFlLElBQWY7QUFDQVIsY0FBTU4sSUFBTixDQUFXYyxJQUFYLEdBQWtCQyxPQUFsQjtBQUNBVCxjQUFNTixJQUFOLEdBQWFlLE9BQWI7QUFDQVQsY0FBTUssSUFBTixHQUFhRSxPQUFiO0FBQ0FQLGNBQU1OLElBQU4sQ0FBV08sTUFBWCxHQUFvQixLQUFwQjtBQUNIOztBQUVELGFBQVNXLHdCQUFULENBQWtDWixLQUFsQyxFQUF5Q2EsT0FBekMsRUFBa0Q7QUFDOUNiLGNBQU1OLElBQU4sQ0FBV08sTUFBWCxHQUFvQixPQUFwQjtBQUNBRCxjQUFNTixJQUFOLENBQVdRLElBQVg7QUFDQSxZQUFJQyxXQUFXSCxNQUFNTixJQUFOLENBQVdWLENBQTFCO0FBQ0EsWUFBSW9CLFdBQVdKLE1BQU1OLElBQU4sQ0FBV1osQ0FBMUI7QUFDQWtCLGNBQU1LLElBQU4sQ0FBV0MsS0FBWDtBQUNBLFlBQUlDLFVBQVVQLE1BQU1LLElBQU4sQ0FBV0csSUFBekI7QUFDQSxZQUFJQyxVQUFVVCxNQUFNSyxJQUFwQjtBQUNBSSxnQkFBUUQsSUFBUixHQUFlLElBQWY7QUFDQVIsY0FBTU4sSUFBTixDQUFXYyxJQUFYLEdBQWtCQyxPQUFsQjtBQUNBVCxjQUFNTixJQUFOLEdBQWFlLE9BQWI7QUFDQVQsY0FBTUssSUFBTixHQUFhRSxPQUFiO0FBQ0EsWUFBSWhCLFlBQVlqQixhQUFhdUMsT0FBYixDQUFoQjtBQUNBLFlBQUlDLGlCQUFpQmpDLHNCQUFzQlUsU0FBdEIsQ0FBckI7QUFDQVMsY0FBTU4sSUFBTixDQUFXVixDQUFYLEdBQWVtQixXQUFXVyxlQUFlOUIsQ0FBekM7QUFDQWdCLGNBQU1OLElBQU4sQ0FBV1osQ0FBWCxHQUFlc0IsV0FBV1UsZUFBZWhDLENBQXpDO0FBQ0FrQixjQUFNTixJQUFOLENBQVdPLE1BQVgsR0FBb0IsS0FBcEI7QUFDQUQsY0FBTU4sSUFBTixDQUFXUSxJQUFYO0FBQ0FGLGNBQU1WLGdCQUFOLEdBQXlCQyxTQUF6QjtBQUNIOztBQUVELGFBQVN3QixlQUFULENBQXlCZixLQUF6QixFQUFnQzs7QUFFNUIsWUFBSWdCLGdCQUFnQixZQUFXO0FBQzNCQyxpQkFBS0MsY0FBTDtBQUNBLGdCQUFHbEIsTUFBTW1CLFdBQU4sQ0FBa0JGLEtBQUtHLElBQXZCLENBQUgsRUFBaUM7QUFDN0JKO0FBQ0g7QUFDSixTQUxEOztBQU9BLFlBQUdoQixNQUFNTixJQUFOLENBQVcyQixLQUFYLENBQWlCSixLQUFLRyxJQUF0QixDQUFILEVBQWdDO0FBQzVCcEIsa0JBQU1zQixJQUFOO0FBQ0FOO0FBQ0FPO0FBQ0EsbUJBQU8sSUFBUDtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVELGFBQVNDLE1BQVQsR0FBa0I7QUFDZHZDLGtCQUFVd0MsT0FBVixDQUFrQixVQUFTMUIsSUFBVCxFQUFlO0FBQzdCQSxpQkFBS08sS0FBTDtBQUNILFNBRkQ7O0FBSUFwQixrQkFBVXVDLE9BQVYsQ0FBa0IsVUFBUzFCLElBQVQsRUFBZTtBQUM3QkEsaUJBQUtFLE1BQUwsR0FBYyxRQUFkO0FBQ0FGLGlCQUFLTyxLQUFMO0FBQ0gsU0FIRDtBQUlBckIsb0JBQVksRUFBWjtBQUNBQyxvQkFBWSxFQUFaO0FBQ0FELGtCQUFVeUMsSUFBVixDQUFlMUIsTUFBTU4sSUFBckI7O0FBRUEsWUFBSUssT0FBTzRCLFdBQVg7QUFDQSxZQUFHNUIsS0FBS3NCLEtBQUwsQ0FBV0osS0FBS0csSUFBaEIsQ0FBSCxFQUEwQjtBQUN0QkgsaUJBQUtHLElBQUwsQ0FBVW5CLE1BQVYsR0FBbUIsTUFBbkI7QUFDQWhCLHNCQUFVd0MsT0FBVixDQUFrQixVQUFTMUIsSUFBVCxFQUFlO0FBQzdCQSxxQkFBS0UsTUFBTCxHQUFjLFFBQWQ7QUFDQUYscUJBQUtHLElBQUw7QUFDSCxhQUhEOztBQUtBaEIsc0JBQVV1QyxPQUFWLENBQWtCLFVBQVMxQixJQUFULEVBQWU7QUFDN0JBLHFCQUFLRSxNQUFMLEdBQWMsUUFBZDtBQUNBRixxQkFBS0csSUFBTDtBQUNILGFBSEQ7O0FBS0EsZ0JBQUdILElBQUgsRUFBUztBQUNMWix5QkFBU3lDLE9BQVQsQ0FBaUI3QixJQUFqQjtBQUNBLG9CQUFJOEIsVUFBVTlCLEtBQUsrQixNQUFuQjtBQUNBLHVCQUFNRCxPQUFOLEVBQWU7QUFDWEEsNEJBQVEzQixJQUFSLENBQWEsTUFBYjtBQUNBZiw2QkFBU3lDLE9BQVQsQ0FBaUJDLE9BQWpCO0FBQ0FBLDhCQUFVQSxRQUFRQyxNQUFsQjtBQUNIO0FBQ0o7QUFDSjtBQUVKOztBQUVELGFBQVNDLHNCQUFULENBQWdDQyxVQUFoQyxFQUE0Qzs7QUFFeEMsWUFBSUMsY0FBYztBQUNkakQsZUFBR2dELFdBQVdoRCxDQUFYLEdBQWFwQixRQUFRbUIsWUFEVjtBQUVkRCxlQUFHLENBQUNrRCxXQUFXbEQsQ0FBWCxHQUFhbEIsUUFBUW1CLFlBQXRCLElBQW9DbkIsUUFBUW1CO0FBRmpDLFNBQWxCO0FBSUEsWUFBSW1ELGNBQWM7QUFDZGxELGVBQUdnRCxXQUFXaEQsQ0FBWCxHQUFhcEIsUUFBUW1CLFlBRFY7QUFFZEQsZUFBRyxDQUFDa0QsV0FBV2xELENBQVgsR0FBYWxCLFFBQVFtQixZQUF0QixJQUFvQ25CLFFBQVFtQjtBQUZqQyxTQUFsQjtBQUlBLFlBQUlvRCxhQUFhO0FBQ2JuRCxlQUFHLENBQUNnRCxXQUFXaEQsQ0FBWCxHQUFhcEIsUUFBUW1CLFlBQXRCLElBQW9DbkIsUUFBUW1CLFlBRGxDO0FBRWJELGVBQUdrRCxXQUFXbEQsQ0FBWCxHQUFhbEIsUUFBUW1CO0FBRlgsU0FBakI7QUFJQSxZQUFJcUQsYUFBYTtBQUNicEQsZUFBRyxDQUFDZ0QsV0FBV2hELENBQVgsR0FBYXBCLFFBQVFtQixZQUF0QixJQUFvQ25CLFFBQVFtQixZQURsQztBQUViRCxlQUFHa0QsV0FBV2xELENBQVgsR0FBYWxCLFFBQVFtQjtBQUZYLFNBQWpCO0FBSUEsWUFBSXNELFdBQVcsRUFBZjs7QUFHQSxZQUFHTCxXQUFXbEQsQ0FBWCxHQUFhbEIsUUFBUW1CLFlBQXJCLElBQXFDLENBQXhDLEVBQTJDO0FBQ3ZDLGdCQUFJdUQsaUJBQWlCQyxLQUFLQyxLQUFMLENBQVdQLFlBQVlqRCxDQUF2QixFQUEwQmlELFlBQVluRCxDQUF0QyxDQUFyQjtBQUNBLGdCQUFHd0Qsa0JBQWtCLENBQUN0QyxNQUFNbUIsV0FBTixDQUFrQm1CLGNBQWxCLENBQXRCLEVBQXlEO0FBQ3JERCx5QkFBU1gsSUFBVCxDQUFjWSxjQUFkO0FBQ0g7QUFDSjtBQUNELFlBQUdOLFdBQVdsRCxDQUFYLEdBQWFsQixRQUFRbUIsWUFBckIsR0FBb0NiLFlBQXZDLEVBQXFEO0FBQ2pELGdCQUFJb0UsaUJBQWlCQyxLQUFLQyxLQUFMLENBQVdOLFlBQVlsRCxDQUF2QixFQUEwQmtELFlBQVlwRCxDQUF0QyxDQUFyQjtBQUNBLGdCQUFHd0Qsa0JBQWtCLENBQUN0QyxNQUFNbUIsV0FBTixDQUFrQm1CLGNBQWxCLENBQXRCLEVBQXlEO0FBQ3JERCx5QkFBU1gsSUFBVCxDQUFjWSxjQUFkO0FBQ0g7QUFDSjtBQUNELFlBQUdOLFdBQVdoRCxDQUFYLEdBQWFwQixRQUFRbUIsWUFBckIsSUFBcUMsQ0FBeEMsRUFBMkM7QUFDdkMsZ0JBQUl1RCxpQkFBaUJDLEtBQUtDLEtBQUwsQ0FBV0wsV0FBV25ELENBQXRCLEVBQXlCbUQsV0FBV3JELENBQXBDLENBQXJCO0FBQ0EsZ0JBQUd3RCxrQkFBa0IsQ0FBQ3RDLE1BQU1tQixXQUFOLENBQWtCbUIsY0FBbEIsQ0FBdEIsRUFBeUQ7QUFDckRELHlCQUFTWCxJQUFULENBQWNZLGNBQWQ7QUFDSDtBQUNKO0FBQ0QsWUFBR04sV0FBV2hELENBQVgsR0FBYXBCLFFBQVFtQixZQUFyQixHQUFvQ2QsV0FBdkMsRUFBb0Q7QUFDaEQsZ0JBQUlxRSxpQkFBaUJDLEtBQUtDLEtBQUwsQ0FBV0osV0FBV3BELENBQXRCLEVBQXlCb0QsV0FBV3RELENBQXBDLENBQXJCO0FBQ0EsZ0JBQUd3RCxrQkFBa0IsQ0FBQ3RDLE1BQU1tQixXQUFOLENBQWtCbUIsY0FBbEIsQ0FBdEIsRUFBeUQ7QUFDckRELHlCQUFTWCxJQUFULENBQWNZLGNBQWQ7QUFDSDtBQUNKOztBQUVERCxpQkFBU1osT0FBVCxDQUFpQixVQUFTZ0IsS0FBVCxFQUFnQjs7QUFFN0IsZ0JBQUlDLFFBQVEsSUFBWjtBQUNBLGdCQUFJQyxrQkFBa0J6RCxVQUFVMEQsSUFBVixDQUFlLFVBQVN4QixJQUFULEVBQWU7QUFDaEQsdUJBQU9BLEtBQUtDLEtBQUwsQ0FBV29CLEtBQVgsQ0FBUDtBQUNILGFBRnFCLENBQXRCO0FBR0EsZ0JBQUcsQ0FBQ0UsZUFBSixFQUFxQjtBQUNqQkYsc0JBQU1JLENBQU4sR0FBVWIsV0FBV2EsQ0FBWCxHQUFlQyx1QkFBdUJkLFVBQXZCLEVBQW1DUyxLQUFuQyxDQUF6QjtBQUNBLG9CQUFJTSxLQUFLRCx1QkFBdUJMLEtBQXZCLEVBQThCeEIsS0FBS0csSUFBbkMsQ0FBVDtBQUNBcUIsc0JBQU1PLE9BQU4sR0FBZ0JQLE1BQU1JLENBQU4sR0FBVUUsRUFBMUI7QUFDQU4sc0JBQU1YLE1BQU4sR0FBZUUsVUFBZjtBQUNIO0FBQ0QvQyxzQkFBVXlDLElBQVYsQ0FBZWUsS0FBZjtBQUNILFNBYkQ7O0FBZUF4RCxrQkFBVWdFLElBQVYsQ0FBZSxVQUFTQyxDQUFULEVBQVdDLENBQVgsRUFBYztBQUN6QixtQkFBT0QsRUFBRUYsT0FBRixHQUFZRyxFQUFFSCxPQUFkLEdBQXdCLENBQXhCLEdBQTRCLENBQUMsQ0FBcEM7QUFDSCxTQUZEO0FBR0g7O0FBRUw7QUFDSSxhQUFTckIsU0FBVCxHQUFxQjtBQUNqQixZQUFHMUMsVUFBVW1FLE1BQVYsS0FBcUIsQ0FBeEIsRUFBMkI7QUFDdkIsbUJBQU9wRCxNQUFNTixJQUFiO0FBQ0gsU0FGRCxNQUVPO0FBQ0gsZ0JBQUlLLE9BQU9kLFVBQVVvRSxLQUFWLEVBQVg7QUFDQSxnQkFBR3RELEtBQUtzQixLQUFMLENBQVdKLEtBQUtHLElBQWhCLENBQUgsRUFBMEI7QUFDdEIsdUJBQU9yQixJQUFQO0FBQ0gsYUFGRCxNQUVPO0FBQ0gsb0JBQUkyQyxRQUFRLElBQVo7QUFDQSxvQkFBSVksaUJBQWlCcEUsVUFBVTBELElBQVYsQ0FBZSxVQUFTeEIsSUFBVCxFQUFlO0FBQy9DLDJCQUFPQSxLQUFLQyxLQUFMLENBQVd0QixJQUFYLENBQVA7QUFDSCxpQkFGb0IsQ0FBckI7QUFHQSxvQkFBRyxDQUFDdUQsY0FBSixFQUFvQjtBQUNoQnBFLDhCQUFVd0MsSUFBVixDQUFlM0IsSUFBZjtBQUNBZ0MsMkNBQXVCaEMsSUFBdkI7QUFDSDtBQUNELHVCQUFPNEIsV0FBUDtBQUNIO0FBRUo7QUFFSjs7QUFFRCxhQUFTbUIsc0JBQVQsQ0FBZ0NTLEtBQWhDLEVBQXVDQyxLQUF2QyxFQUE4QztBQUMxQyxZQUFJQyxTQUFTRixNQUFNdkUsQ0FBbkI7QUFDQSxZQUFJMEUsU0FBU0gsTUFBTXpFLENBQW5COztBQUVBLFlBQUk2RSxTQUFTSCxNQUFNeEUsQ0FBbkI7QUFDQSxZQUFJNEUsU0FBU0osTUFBTTFFLENBQW5COztBQUVBLFlBQUkrRSxLQUFNRixTQUFTRixNQUFuQjtBQUNBLFlBQUlLLEtBQU1GLFNBQVNGLE1BQW5CO0FBQ0EsWUFBSUssV0FBV0MsS0FBS0MsSUFBTCxDQUFVRCxLQUFLRSxHQUFMLENBQVNMLEVBQVQsRUFBYSxDQUFiLElBQWtCRyxLQUFLRSxHQUFMLENBQVNKLEVBQVQsRUFBYSxDQUFiLENBQTVCLENBQWY7QUFDQSxlQUFPQyxRQUFQO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUlKOzs7Ozs7O0FBT0ksUUFBSUksV0FBV0MsU0FBU0MsY0FBVCxDQUF3QixNQUF4QixDQUFmO0FBQ0FGLGFBQVNHLEtBQVQsQ0FBZUMsZUFBZixHQUFpQywwQkFBakM7QUFDQUosYUFBU0ssS0FBVCxHQUFpQnZHLFdBQWpCO0FBQ0FrRyxhQUFTTSxNQUFULEdBQWtCdkcsWUFBbEI7QUFDQSxRQUFJd0MsTUFBTXlELFNBQVNPLFVBQVQsQ0FBb0IsSUFBcEIsQ0FBVjtBQUNBLFFBQUlDLElBQUlsSCxXQUFSO0FBQ0EsUUFBSXVDLFFBQVEsSUFBSXJDLEtBQUosQ0FBVTtBQUNsQnFCLFdBQUdmLGNBQVksQ0FERztBQUVsQmEsV0FBR1osZUFBYSxDQUZFO0FBR2xCd0MsYUFBS0E7QUFIYSxLQUFWLENBQVo7O0FBTUEsUUFBSTZCLE9BQU8sSUFBSXpFLElBQUosQ0FBUzRDLEdBQVQsRUFBY3pDLFdBQWQsRUFBMkJDLFlBQTNCLEVBQXlDTixRQUFRbUIsWUFBakQsQ0FBWDtBQUNBd0QsU0FBS3JDLElBQUw7QUFDQSxRQUFJZSxPQUFPLElBQUlwRCxJQUFKLENBQVM2QyxHQUFULEVBQWN6QyxXQUFkLEVBQTJCQyxZQUEzQixDQUFYOztBQUVBLFFBQUkwRyxrQkFBa0IsQ0FBdEIsQ0ExVnVCLENBMFZDO0FBQ3hCLFFBQUlDLFNBQVMsRUFBYixDQTNWdUIsQ0EyVk47QUFDakI3RSxVQUFNVixnQkFBTixHQUF5QixNQUF6QjtBQUNBVSxVQUFNOEUsT0FBTjtBQUNBLFFBQUlDLGVBQWUsQ0FBQyxDQUFwQjs7QUFFQSxhQUFTeEQsV0FBVCxDQUFxQnlELEtBQXJCLEVBQTRCO0FBQ3hCWixpQkFBU0MsY0FBVCxDQUF3QixPQUF4QixFQUFpQ1ksV0FBakMsR0FBK0MsWUFBWSxFQUFFRixZQUE3RDtBQUNIOztBQUVEeEQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGFBQVMyRCxNQUFULEdBQWtCO0FBQ2QsWUFBSW5GLE9BQU9aLFNBQVNrRSxLQUFULEVBQVg7QUFDQSxZQUFHdEQsSUFBSCxFQUFTO0FBQ0xELGdDQUFvQkMsSUFBcEI7QUFDQWdCLDRCQUFnQmYsS0FBaEI7QUFDSDtBQUNKOztBQUVELGFBQVNFLElBQVQsR0FBZ0I7QUFDWmUsYUFBS2YsSUFBTDtBQUNBRixjQUFNOEUsT0FBTjtBQUNIOztBQUVELGFBQVMxRyxRQUFULENBQWtCK0csU0FBbEIsRUFBNkI7QUFDeEIsWUFBRzlHLFdBQUgsRUFBZ0I7QUFDYixnQkFBRzhHLFlBQVlQLGtCQUFtQixPQUFPQyxNQUF6QyxFQUFrRDtBQUM5Q08sc0NBQXNCaEgsUUFBdEI7QUFDQTtBQUNIO0FBQ0R3Ryw4QkFBa0JPLFNBQWxCO0FBQ0EsZ0JBQUcsQ0FBQ2hHLFNBQVNpRSxNQUFiLEVBQXFCO0FBQ2pCNUI7QUFDSDtBQUNEMEQ7QUFDQWhGO0FBQ0FrRixrQ0FBc0JoSCxRQUF0QjtBQUNIO0FBQ0o7QUFDRGdILDBCQUFzQmhILFFBQXRCO0FBQ0gsQ0EzWkQiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBHYW1lT2JqZWN0cyA9IHJlcXVpcmUoXCIuL3NjcmlwdHMvc25ha2UuanNcIik7XHJcbnZhciBTbmFrZSA9IEdhbWVPYmplY3RzLlNuYWtlO1xyXG52YXIgU2VnbWVudCA9IEdhbWVPYmplY3RzLlNlZ21lbnQ7XHJcbnZhciBGb29kID0gR2FtZU9iamVjdHMuRm9vZDtcclxudmFyIEdyaWQgPSBHYW1lT2JqZWN0cy5HcmlkO1xyXG5cclxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgY29uc3QgY2FudmFzV2lkdGggPSA3MjA7XHJcbiAgICBjb25zdCBjYW52YXNIZWlnaHQgPSA0MjA7XHJcbiAgICBcclxuICAgIHZhciBGUFMgPSA2MDtcclxuICAgIHZhciBnYW1lTG9vcDtcclxuICAgIHZhciBnYW1lUnVubmluZyA9IHRydWU7XHJcblxyXG4gICAgdmFyIGRpcktleUxvb2t1cCA9IHtcclxuICAgICAgICAzNzogJ1dFU1QnLFxyXG4gICAgICAgIDM4OiAnTk9SVEgnLFxyXG4gICAgICAgIDM5OiAnRUFTVCcsXHJcbiAgICAgICAgNDA6ICdTT1VUSCdcclxuICAgIH07XHJcblxyXG4gICAgIHZhciByZXZlcnNlRGlyS2V5TG9va3VwID0ge1xyXG4gICAgICAgIFdFU1Q6IDM3LFxyXG4gICAgICAgIE5PUlRIOiAzOCxcclxuICAgICAgICBFQVNUOiAzOSxcclxuICAgICAgICBTT1VUSDogNDBcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHVuYWxsb3dlZERpckxvb2t1cCA9IHtcclxuICAgICAgICAnV0VTVCc6IDM5LFxyXG4gICAgICAgICdOT1JUSCc6IDQwLFxyXG4gICAgICAgICdFQVNUJzogMzcsXHJcbiAgICAgICAgJ1NPVVRIJzogMzhcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHVwZGF0ZUhlYWRCeURpcmVjdGlvbiA9IHtcclxuICAgICAgICBOT1JUSDoge1xyXG4gICAgICAgICAgICB5OiAtMSAqIFNlZ21lbnQuU0VHTUVOVF9TSVpFLFxyXG4gICAgICAgICAgICB4OiAwXHJcbiAgICAgICAgfSxcclxuICAgICAgICBTT1VUSDoge1xyXG4gICAgICAgICAgICB5OiBTZWdtZW50LlNFR01FTlRfU0laRSxcclxuICAgICAgICAgICAgeDogMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgRUFTVDoge1xyXG4gICAgICAgICAgICB5OiAwLFxyXG4gICAgICAgICAgICB4OiBTZWdtZW50LlNFR01FTlRfU0laRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgV0VTVDoge1xyXG4gICAgICAgICAgICB5OiAwLFxyXG4gICAgICAgICAgICB4OiAtMSAqIFNlZ21lbnQuU0VHTUVOVF9TSVpFXHJcbiAgICAgICAgfSwgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGZyaW5nZVNldCA9IFtdO1xyXG4gICAgdmFyIGNsb3NlZFNldCA9IFtdO1xyXG4gICAgdmFyIG5vZGVQYXRoID0gW107XHJcblxyXG4gICAgZnVuY3Rpb24gdmFsaWREaXJlY3Rpb25DaGFuZ2Uoa2V5Q29kZSwgY3VycmVudERpcmVjdGlvbikge1xyXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBkaXJLZXlMb29rdXBba2V5Q29kZV07XHJcbiAgICAgICAgaWYoY3VycmVudERpcmVjdGlvbiA9PT0gZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHVuYWxsb3dlZCA9IHVuYWxsb3dlZERpckxvb2t1cFtjdXJyZW50RGlyZWN0aW9uXVxyXG4gICAgICAgIHJldHVybiBrZXlDb2RlICE9IHVuYWxsb3dlZDtcclxuICAgIH0gICAgXHJcblxyXG4gICAgZnVuY3Rpb24gaW5zaWRlV29ybGRCb3VuZHMoa2V5Q29kZSwgaGVhZCkge1xyXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBkaXJLZXlMb29rdXBba2V5Q29kZV07XHJcbiAgICAgICAgdmFyIGRpcmVjdGlvblVwZGF0ZSA9IHVwZGF0ZUhlYWRCeURpcmVjdGlvbltkaXJlY3Rpb25dO1xyXG4gICAgICAgIHZhciBuZXdYID0gaGVhZC54ICsgZGlyZWN0aW9uVXBkYXRlLng7XHJcbiAgICAgICAgdmFyIG5ld1kgPSBoZWFkLnkgKyBkaXJlY3Rpb25VcGRhdGUueTtcclxuICAgICAgICByZXR1cm4gbmV3WCA8PSBjYW52YXNXaWR0aCAmJiAgbmV3WCA+PSAwICYmIG5ld1kgPD0gY2FudmFzSGVpZ2h0ICYmIG5ld1kgPj0gMDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVTbmFrZUZyb21Ob2RlKG5vZGUpIHtcclxuICAgICAgICBzbmFrZS5oZWFkLmNvbG91ciA9ICdibGFjayc7XHJcbiAgICAgICAgc25ha2UuaGVhZC5kcmF3KCk7XHJcbiAgICAgICAgdmFyIGN1ckhlYWRYID0gc25ha2UuaGVhZC54O1xyXG4gICAgICAgIHZhciBjdXJIZWFkWSA9IHNuYWtlLmhlYWQueTtcclxuICAgICAgICBzbmFrZS50YWlsLmNsZWFyKCk7XHJcbiAgICAgICAgdmFyIG5ld1RhaWwgPSBzbmFrZS50YWlsLm5leHQ7XHJcbiAgICAgICAgdmFyIG5ld0hlYWQgPSBuZXcgU2VnbWVudCh7XHJcbiAgICAgICAgICAgIHg6IG5vZGUueCxcclxuICAgICAgICAgICAgeTogbm9kZS55LFxyXG4gICAgICAgICAgICBjdHg6IG5vZGUuY3R4LFxyXG4gICAgICAgICAgICB0eXBlOiBcInNuYWtlXCJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3SGVhZC5uZXh0ID0gbnVsbDtcclxuICAgICAgICBzbmFrZS5oZWFkLm5leHQgPSBuZXdIZWFkO1xyXG4gICAgICAgIHNuYWtlLmhlYWQgPSBuZXdIZWFkO1xyXG4gICAgICAgIHNuYWtlLnRhaWwgPSBuZXdUYWlsO1xyXG4gICAgICAgIHNuYWtlLmhlYWQuY29sb3VyID0gJ3JlZCc7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlU25ha2VGcm9tRGlyZWN0aW9uKHNuYWtlLCBrZXljb2RlKSB7XHJcbiAgICAgICAgc25ha2UuaGVhZC5jb2xvdXIgPSAnYmxhY2snO1xyXG4gICAgICAgIHNuYWtlLmhlYWQuZHJhdygpO1xyXG4gICAgICAgIHZhciBjdXJIZWFkWCA9IHNuYWtlLmhlYWQueDtcclxuICAgICAgICB2YXIgY3VySGVhZFkgPSBzbmFrZS5oZWFkLnk7XHJcbiAgICAgICAgc25ha2UudGFpbC5jbGVhcigpO1xyXG4gICAgICAgIHZhciBuZXdUYWlsID0gc25ha2UudGFpbC5uZXh0O1xyXG4gICAgICAgIHZhciBuZXdIZWFkID0gc25ha2UudGFpbFxyXG4gICAgICAgIG5ld0hlYWQubmV4dCA9IG51bGw7XHJcbiAgICAgICAgc25ha2UuaGVhZC5uZXh0ID0gbmV3SGVhZDtcclxuICAgICAgICBzbmFrZS5oZWFkID0gbmV3SGVhZDtcclxuICAgICAgICBzbmFrZS50YWlsID0gbmV3VGFpbDtcclxuICAgICAgICB2YXIgZGlyZWN0aW9uID0gZGlyS2V5TG9va3VwW2tleWNvZGVdO1xyXG4gICAgICAgIHZhciBkaXJjdGlvblVwZGF0ZSA9IHVwZGF0ZUhlYWRCeURpcmVjdGlvbltkaXJlY3Rpb25dO1xyXG4gICAgICAgIHNuYWtlLmhlYWQueCA9IGN1ckhlYWRYICsgZGlyY3Rpb25VcGRhdGUueDtcclxuICAgICAgICBzbmFrZS5oZWFkLnkgPSBjdXJIZWFkWSArIGRpcmN0aW9uVXBkYXRlLnk7XHJcbiAgICAgICAgc25ha2UuaGVhZC5jb2xvdXIgPSAncmVkJztcclxuICAgICAgICBzbmFrZS5oZWFkLmRyYXcoKTtcclxuICAgICAgICBzbmFrZS5jdXJyZW50RGlyZWN0aW9uID0gZGlyZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNoZWNrQ29sbGlzaW9ucyhzbmFrZSkge1xyXG5cclxuICAgICAgICB2YXIgZ2V0TmV3Rm9vZFBvcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBmb29kLnNldE5ld1Bvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmKHNuYWtlLmNlbGxJc1NuYWtlKGZvb2QuaXRlbSkpIHtcclxuICAgICAgICAgICAgICAgIGdldE5ld0Zvb2RQb3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoc25ha2UuaGVhZC5lcXVhbChmb29kLml0ZW0pKSB7XHJcbiAgICAgICAgICAgIHNuYWtlLmdyb3coKTtcclxuICAgICAgICAgICAgZ2V0TmV3Rm9vZFBvcygpO1xyXG4gICAgICAgICAgICB1cGRhdGVTY29yZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGlmKHNuYWtlLmhlYWQuZXF1YWwoc25ha2UudGFpbCkpIHtcclxuICAgICAgICAvLyAgICAgcmVzZXRHYW1lKHNuYWtlKTtcclxuICAgICAgICAvLyAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgLy8gdmFyIGN1cnJlbnQgPSBzbmFrZS50YWlsO1xyXG4gICAgICAgIC8vIHdoaWxlKGN1cnJlbnQgIT0gc25ha2UuaGVhZCkge1xyXG4gICAgICAgIC8vICAgICBpZihzbmFrZS5oZWFkLmVxdWFsKGN1cnJlbnQpKSB7XHJcbiAgICAgICAgLy8gICAgICAgICByZXNldEdhbWUoc25ha2UpO1xyXG4gICAgICAgIC8vICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBzZWFyY2goKSB7XHJcbiAgICAgICAgZnJpbmdlU2V0LmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICBub2RlLmNsZWFyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY2xvc2VkU2V0LmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICBub2RlLmNvbG91ciA9IFwieWVsbG93XCI7XHJcbiAgICAgICAgICAgIG5vZGUuY2xlYXIoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBmcmluZ2VTZXQgPSBbXTtcclxuICAgICAgICBjbG9zZWRTZXQgPSBbXTtcclxuICAgICAgICBmcmluZ2VTZXQucHVzaChzbmFrZS5oZWFkKTtcclxuXHJcbiAgICAgICAgdmFyIG5vZGUgPSBmaW5kUm91dGUoKTtcclxuICAgICAgICBpZihub2RlLmVxdWFsKGZvb2QuaXRlbSkpIHtcclxuICAgICAgICAgICAgZm9vZC5pdGVtLmNvbG91ciA9IFwicGlua1wiO1xyXG4gICAgICAgICAgICBmcmluZ2VTZXQuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlLmNvbG91ciA9IFwib3JhbmdlXCI7XHJcbiAgICAgICAgICAgICAgICBub2RlLmRyYXcoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBjbG9zZWRTZXQuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlLmNvbG91ciA9IFwieWVsbG93XCI7XHJcbiAgICAgICAgICAgICAgICBub2RlLmRyYXcoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZihub2RlKSB7XHJcbiAgICAgICAgICAgICAgICBub2RlUGF0aC51bnNoaWZ0KG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1ck5vZGUgPSBub2RlLnBhcmVudDtcclxuICAgICAgICAgICAgICAgIHdoaWxlKGN1ck5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLmRyYXcoXCJibHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGVQYXRoLnVuc2hpZnQoY3VyTm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyTm9kZSA9IGN1ck5vZGUucGFyZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRDaGlsZHJlblRvRnJpbmdlU2V0KHBhcmVudE5vZGUpIHtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgbm9ydGhDb29yZHMgPSB7XHJcbiAgICAgICAgICAgIHg6IHBhcmVudE5vZGUueC9TZWdtZW50LlNFR01FTlRfU0laRSxcclxuICAgICAgICAgICAgeTogKHBhcmVudE5vZGUueS1TZWdtZW50LlNFR01FTlRfU0laRSkvU2VnbWVudC5TRUdNRU5UX1NJWkVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzb3V0aENvb3JkcyA9IHtcclxuICAgICAgICAgICAgeDogcGFyZW50Tm9kZS54L1NlZ21lbnQuU0VHTUVOVF9TSVpFLFxyXG4gICAgICAgICAgICB5OiAocGFyZW50Tm9kZS55K1NlZ21lbnQuU0VHTUVOVF9TSVpFKS9TZWdtZW50LlNFR01FTlRfU0laRVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHdlc3RDb29yZHMgPSB7XHJcbiAgICAgICAgICAgIHg6IChwYXJlbnROb2RlLngtU2VnbWVudC5TRUdNRU5UX1NJWkUpL1NlZ21lbnQuU0VHTUVOVF9TSVpFLFxyXG4gICAgICAgICAgICB5OiBwYXJlbnROb2RlLnkvU2VnbWVudC5TRUdNRU5UX1NJWkVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBlYXN0Q29vcmRzID0ge1xyXG4gICAgICAgICAgICB4OiAocGFyZW50Tm9kZS54K1NlZ21lbnQuU0VHTUVOVF9TSVpFKS9TZWdtZW50LlNFR01FTlRfU0laRSxcclxuICAgICAgICAgICAgeTogcGFyZW50Tm9kZS55L1NlZ21lbnQuU0VHTUVOVF9TSVpFXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgY2hpbGRyZW4gPSBbXTtcclxuXHJcblxyXG4gICAgICAgIGlmKHBhcmVudE5vZGUueS1TZWdtZW50LlNFR01FTlRfU0laRSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHZhciBjZWxsVG9Db25zaWRlciA9IGdyaWQuY2VsbHNbbm9ydGhDb29yZHMueF1bbm9ydGhDb29yZHMueV07XHJcbiAgICAgICAgICAgIGlmKGNlbGxUb0NvbnNpZGVyICYmICFzbmFrZS5jZWxsSXNTbmFrZShjZWxsVG9Db25zaWRlcikpIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goY2VsbFRvQ29uc2lkZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHBhcmVudE5vZGUueStTZWdtZW50LlNFR01FTlRfU0laRSA8IGNhbnZhc0hlaWdodCkge1xyXG4gICAgICAgICAgICB2YXIgY2VsbFRvQ29uc2lkZXIgPSBncmlkLmNlbGxzW3NvdXRoQ29vcmRzLnhdW3NvdXRoQ29vcmRzLnldO1xyXG4gICAgICAgICAgICBpZihjZWxsVG9Db25zaWRlciAmJiAhc25ha2UuY2VsbElzU25ha2UoY2VsbFRvQ29uc2lkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZHJlbi5wdXNoKGNlbGxUb0NvbnNpZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihwYXJlbnROb2RlLngtU2VnbWVudC5TRUdNRU5UX1NJWkUgPj0gMCkge1xyXG4gICAgICAgICAgICB2YXIgY2VsbFRvQ29uc2lkZXIgPSBncmlkLmNlbGxzW3dlc3RDb29yZHMueF1bd2VzdENvb3Jkcy55XTtcclxuICAgICAgICAgICAgaWYoY2VsbFRvQ29uc2lkZXIgJiYgIXNuYWtlLmNlbGxJc1NuYWtlKGNlbGxUb0NvbnNpZGVyKSkgeyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChjZWxsVG9Db25zaWRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocGFyZW50Tm9kZS54K1NlZ21lbnQuU0VHTUVOVF9TSVpFIDwgY2FudmFzV2lkdGgpIHtcclxuICAgICAgICAgICAgdmFyIGNlbGxUb0NvbnNpZGVyID0gZ3JpZC5jZWxsc1tlYXN0Q29vcmRzLnhdW2Vhc3RDb29yZHMueV07XHJcbiAgICAgICAgICAgIGlmKGNlbGxUb0NvbnNpZGVyICYmICFzbmFrZS5jZWxsSXNTbmFrZShjZWxsVG9Db25zaWRlcikpIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goY2VsbFRvQ29uc2lkZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZm91bmQgPSBudWxsO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRJc0luQ2xvc2VkID0gY2xvc2VkU2V0LnNvbWUoZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZXF1YWwoY2hpbGQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYoIWNoaWxkSXNJbkNsb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuZCA9IHBhcmVudE5vZGUuZCArIGRpc3RhbmNlRnJvbU5vZGVUb05vZGUocGFyZW50Tm9kZSwgY2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIEwyID0gZGlzdGFuY2VGcm9tTm9kZVRvTm9kZShjaGlsZCwgZm9vZC5pdGVtKTtcclxuICAgICAgICAgICAgICAgIGNoaWxkLmRQbHVzTDIgPSBjaGlsZC5kICsgTDI7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5wYXJlbnQgPSBwYXJlbnROb2RlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZyaW5nZVNldC5wdXNoKGNoaWxkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnJpbmdlU2V0LnNvcnQoZnVuY3Rpb24oYSxiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLmRQbHVzTDIgPiBiLmRQbHVzTDIgPyAxIDogLTE7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4vL2h0dHA6Ly9tbmVtc3R1ZGlvLm9yZy9wYXRoLWZpbmRpbmctYS1zdGFyLmh0bVxyXG4gICAgZnVuY3Rpb24gZmluZFJvdXRlKCkge1xyXG4gICAgICAgIGlmKGZyaW5nZVNldC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNuYWtlLmhlYWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSBmcmluZ2VTZXQuc2hpZnQoKTtcclxuICAgICAgICAgICAgaWYobm9kZS5lcXVhbChmb29kLml0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZUlzSW5DbG9zZWQgPSBjbG9zZWRTZXQuc29tZShmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZXF1YWwobm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmKCFub2RlSXNJbkNsb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlZFNldC5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZENoaWxkcmVuVG9GcmluZ2VTZXQobm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmluZFJvdXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkaXN0YW5jZUZyb21Ob2RlVG9Ob2RlKG5vZGUxLCBub2RlMikge1xyXG4gICAgICAgIHZhciBub2RlMVggPSBub2RlMS54O1xyXG4gICAgICAgIHZhciBub2RlMVkgPSBub2RlMS55O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBub2RlMlggPSBub2RlMi54O1xyXG4gICAgICAgIHZhciBub2RlMlkgPSBub2RlMi55O1xyXG5cclxuICAgICAgICB2YXIgZHggPSAobm9kZTJYIC0gbm9kZTFYKTtcclxuICAgICAgICB2YXIgZHkgPSAobm9kZTJZIC0gbm9kZTFZKTtcclxuICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoTWF0aC5wb3coZHgsIDIpICsgTWF0aC5wb3coZHksIDIpKTtcclxuICAgICAgICByZXR1cm4gZGlzdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAvLyAgICAgaWYoZXZlbnQua2V5Q29kZSA9PT0gODEpIHtcclxuICAgIC8vICAgICAgICAgZ2FtZVJ1bm5pbmcgPSBmYWxzZTtcclxuICAgIC8vICAgICB9IGVsc2UgaWYoZXZlbnQua2V5Q29kZSA9PSAzNyB8fCBldmVudC5rZXlDb2RlID09IDM5IHx8IGV2ZW50LmtleUNvZGUgPT0gMzggfHwgZXZlbnQua2V5Q29kZSA9PSA0MCkgeyAvL0xFRlRcclxuICAgIC8vICAgICAgICAgdmFyIHZhbGlkVXBkYXRlID0gdmFsaWREaXJlY3Rpb25DaGFuZ2UoZXZlbnQua2V5Q29kZSwgc25ha2UuY3VycmVudERpcmVjdGlvbikgJiYgaW5zaWRlV29ybGRCb3VuZHMoZXZlbnQua2V5Q29kZSwgc25ha2UuaGVhZCk7XHJcbiAgICAvLyAgICAgICAgIGlmKHZhbGlkVXBkYXRlKSB7XHJcbiAgICAvLyAgICAgICAgICAgICB1cGRhdGVTbmFrZUZyb21EaXJlY3Rpb24oc25ha2UsIGV2ZW50LmtleUNvZGUpO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgfSBlbHNlIGlmKGV2ZW50LmtleUNvZGUgPT09IDMyKSB7XHJcbiAgICAvLyAgICAgICAgIHNlYXJjaCgpO1xyXG4gICAgLy8gICAgICAgICB2YXIgbm9kZSA9IGZpbmRSb3V0ZSgpO1xyXG4gICAgLy8gICAgICAgICBpZihub2RlLmVxdWFsKGZvb2QuaXRlbSkpIHtcclxuICAgIC8vICAgICAgICAgICAgIGZvb2QuaXRlbS5jb2xvdXIgPSBcInBpbmtcIjtcclxuICAgIC8vICAgICAgICAgICAgIGZyaW5nZVNldC5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICBub2RlLmNvbG91ciA9IFwib3JhbmdlXCI7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgLy9ub2RlLmRyYXcoKTtcclxuICAgIC8vICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgIC8vICAgICAgICAgICAgIGNsb3NlZFNldC5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICBub2RlLmNvbG91ciA9IFwieWVsbG93XCI7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgLy9ub2RlLmRyYXcoKTtcclxuICAgIC8vICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgIC8vICAgICAgICAgICAgIGlmKG5vZGUpIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICBub2RlUGF0aC51bnNoaWZ0KG5vZGUpO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIHZhciBjdXJOb2RlID0gbm9kZS5wYXJlbnQ7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgd2hpbGUoY3VyTm9kZSkge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLmRyYXcoXCJibHVlXCIpO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBub2RlUGF0aC51bnNoaWZ0KGN1ck5vZGUpO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBjdXJOb2RlID0gY3VyTm9kZS5wYXJlbnQ7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfSk7XHJcblxyXG5cclxuXHJcbi8qXHJcbiAgICAgICAgICAgICAgICAgKF8pICAgICAgXHJcbiAgXyBfXyBfX18gICBfXyBfIF8gXyBfXyAgXHJcbiB8ICdfIGAgXyBcXCAvIF9gIHwgfCAnXyBcXCBcclxuIHwgfCB8IHwgfCB8IChffCB8IHwgfCB8IHxcclxuIHxffCB8X3wgfF98XFxfXyxffF98X3wgfF98XHJcbiovXHJcbiAgICB2YXIgY2FudmFzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpO1xyXG4gICAgY2FudmFzRWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMTU4LCAxNjcsIDE4NCwgMC4yKSc7XHJcbiAgICBjYW52YXNFbC53aWR0aCA9IGNhbnZhc1dpZHRoO1xyXG4gICAgY2FudmFzRWwuaGVpZ2h0ID0gY2FudmFzSGVpZ2h0O1xyXG4gICAgdmFyIGN0eCA9IGNhbnZhc0VsLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICB2YXIgZyA9IEdhbWVPYmplY3RzO1xyXG4gICAgdmFyIHNuYWtlID0gbmV3IFNuYWtlKHtcclxuICAgICAgICB4OiBjYW52YXNXaWR0aC8yLFxyXG4gICAgICAgIHk6IGNhbnZhc0hlaWdodC8yLFxyXG4gICAgICAgIGN0eDogY3R4XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgZ3JpZCA9IG5ldyBHcmlkKGN0eCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCwgU2VnbWVudC5TRUdNRU5UX1NJWkUpO1xyXG4gICAgZ3JpZC5kcmF3KCk7XHJcbiAgICB2YXIgZm9vZCA9IG5ldyBGb29kKGN0eCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XHJcblxyXG4gICAgdmFyIGxhc3RGcmFtZVRpbWVNcyA9IDAgLy8gVGhlIGxhc3QgdGltZSB0aGUgbG9vcCB3YXMgcnVuXHJcbiAgICB2YXIgbWF4RlBTID0gMzE7IC8vIFRoZSBtYXhpbXVtIEZQUyB3ZSB3YW50IHRvIGFsbG93XHJcbiAgICBzbmFrZS5jdXJyZW50RGlyZWN0aW9uID0gJ0VBU1QnO1xyXG4gICAgc25ha2UuZHJhd0FsbCgpO1xyXG4gICAgdmFyIGN1cnJlbnRTY29yZSA9IC0xO1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVTY29yZSh2YWx1ZSkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NvcmVcIikudGV4dENvbnRlbnQgPSBcIlNDT1JFOiBcIiArICsrY3VycmVudFNjb3JlO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVNjb3JlKCk7XHJcblxyXG4gICAgLy8gZnVuY3Rpb24gcmVzZXRHYW1lKHNuYWtlKSB7XHJcbiAgICAvLyAgICAgc25ha2UuY2xlYXJBbGwoKTtcclxuICAgIC8vICAgICBzbmFrZS5yZXNldCgpO1xyXG4gICAgLy8gICAgIGZvb2QuY2xlYXIoKTtcclxuICAgIC8vICAgICBmb29kLnNldE5ld1Bvc2l0aW9uKCk7XHJcbiAgICAvLyAgICAgY3VycmVudFNjb3JlID0gLTE7XHJcbiAgICAvLyAgICAgdXBkYXRlU2NvcmUoKTsgICAgICAgICAgIFxyXG4gICAgLy8gfVxyXG5cclxuICAgIC8vIGZ1bmN0aW9uIHVwZGF0ZShkaXJlY3Rpb24pIHtcclxuICAgIC8vICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24gfHwgc25ha2UuY3VycmVudERpcmVjdGlvbjtcclxuICAgIC8vICAgICB2YXIga2V5Q29kZSA9IHJldmVyc2VEaXJLZXlMb29rdXBbZGlyZWN0aW9uXTtcclxuICAgIC8vICAgICB2YXIgaW5zaWRlV29ybGQgPSBpbnNpZGVXb3JsZEJvdW5kcyhrZXlDb2RlLCBzbmFrZS5oZWFkKTtcclxuICAgIC8vICAgICBpZihpbnNpZGVXb3JsZCkge1xyXG4gICAgLy8gICAgICAgICB2YXIgY2hlY2sgPSBjaGVja0NvbGxpc2lvbnMoc25ha2UpO1xyXG4gICAgLy8gICAgICAgICBpZihjaGVjaykge1xyXG4gICAgLy8gICAgICAgICAgICAgdXBkYXRlU25ha2VGcm9tRGlyZWN0aW9uKHNuYWtlLCBrZXlDb2RlKTtcclxuICAgIC8vICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICBjaGVja0NvbGxpc2lvbnMoc25ha2UpO1xyXG4gICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAvLyAgICAgICAgIHJlc2V0R2FtZShzbmFrZSk7ICAgICAgICAgICAgXHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcclxuICAgICAgICB2YXIgbm9kZSA9IG5vZGVQYXRoLnNoaWZ0KCk7XHJcbiAgICAgICAgaWYobm9kZSkge1xyXG4gICAgICAgICAgICB1cGRhdGVTbmFrZUZyb21Ob2RlKG5vZGUpO1xyXG4gICAgICAgICAgICBjaGVja0NvbGxpc2lvbnMoc25ha2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkcmF3KCkge1xyXG4gICAgICAgIGZvb2QuZHJhdygpO1xyXG4gICAgICAgIHNuYWtlLmRyYXdBbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnYW1lTG9vcCh0aW1lU3RhbXApIHtcclxuICAgICAgICAgaWYoZ2FtZVJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgaWYodGltZVN0YW1wIDwgbGFzdEZyYW1lVGltZU1zICsgKDEwMDAgLyBtYXhGUFMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZ2FtZUxvb3ApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxhc3RGcmFtZVRpbWVNcyA9IHRpbWVTdGFtcDtcclxuICAgICAgICAgICAgaWYoIW5vZGVQYXRoLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgc2VhcmNoKCk7XHJcbiAgICAgICAgICAgIH0gICAgICAgICAgIFxyXG4gICAgICAgICAgICB1cGRhdGUoKTtcclxuICAgICAgICAgICAgZHJhdygpO1xyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZ2FtZUxvb3ApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShnYW1lTG9vcCk7XHJcbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 1 */
/***/ function(module, exports) {

	eval("function Segment(options) {\n    var me = this;\n\n    me.width = Segment.SEGMENT_SIZE;\n    me.height = Segment.SEGMENT_SIZE;\n    me.colour = options.colour || \"black\";\n    me.next = options.next || null;\n    me.prev = options.prev || null;\n    me.x = options.x;\n    me.y = options.y;\n    me.d = 0;\n    me.dPlusL2 = 0;\n    me.parent = options.parent;\n    me.ctx = options.ctx;\n    me.type = options.type;\n}\n\nSegment.prototype.updatePos = function updatePos(x, y) {\n    this.x = x;\n    this.y = y;\n};\n\nSegment.prototype.draw = function draw(colour) {\n    var me = this;\n    me.ctx.fillStyle = colour || me.colour;\n    me.ctx.fillRect(me.x, me.y, me.width, me.height);\n};\n\nSegment.prototype.clear = function clear() {\n    var me = this;\n    me.ctx.clearRect(me.x, me.y, me.width, me.height);\n    me.ctx.strokeStyle = \"grey\";\n    me.ctx.strokeRect(me.x, me.y, me.width, me.height);\n};\n\nSegment.prototype.equal = function (otherSegment) {\n    var me = this;\n    return me.x == otherSegment.x && me.y == otherSegment.y;\n};\n\nSegment.SEGMENT_SIZE = 10;\n\nfunction Snake(options) {\n    var me = this;\n    me.x = options.x || 0;\n    me.y = options.y || 0;\n\n    me.ctx = options.ctx;\n    me.currentDirection = 'EAST';\n\n    me.reset();\n}\n\nSnake.prototype.reset = function reset() {\n    var me = this;\n\n    me.head = null;\n    me.tail = null;\n\n    var tail = new Segment({\n        x: me.x,\n        y: me.y,\n        ctx: me.ctx,\n        type: \"snake\"\n    });\n    var body = new Segment({\n        x: tail.x + Segment.SEGMENT_SIZE,\n        y: tail.y,\n        ctx: me.ctx,\n        type: \"snake\"\n    });\n    var head = new Segment({\n        x: body.x + Segment.SEGMENT_SIZE,\n        y: body.y,\n        colour: 'red',\n        ctx: me.ctx,\n        type: \"snake\"\n    });\n\n    tail.next = body;\n    body.next = head;\n    head.next = null;\n\n    me.head = head;\n    me.tail = tail;\n\n    me.updateTailByDirection = {\n        NORTH: {\n            y: Segment.SEGMENT_SIZE,\n            x: 0\n        },\n        SOUTH: {\n            y: -1 * Segment.SEGMENT_SIZE,\n            x: 0\n        },\n        EAST: {\n            y: 0,\n            x: -1 * Segment.SEGMENT_SIZE\n        },\n        WEST: {\n            y: 0,\n            x: Segment.SEGMENT_SIZE\n        }\n    };\n};\n\nSnake.prototype.drawAll = function drawAll() {\n    var me = this;\n    var segment = me.tail;\n    segment.draw();\n    while (segment.next) {\n        segment = segment.next;\n        segment.draw();\n    }\n};\n\nSnake.prototype.clearAll = function clearAll() {\n    var me = this;\n    var segment = me.tail;\n    segment.clear();\n    while (segment.next) {\n        segment = segment.next;\n        segment.clear();\n    }\n};\n\nSnake.prototype.grow = function grow() {\n    var me = this;\n    var directionUpdate = me.updateTailByDirection[me.currentDirection];\n\n    var newTail = new Segment({\n        x: me.tail.x + directionUpdate.x,\n        y: me.tail.y + directionUpdate.y,\n        ctx: me.ctx,\n        type: \"snake\"\n    });\n    newTail.next = me.tail;\n    me.tail = newTail;\n};\n\nSnake.prototype.cellIsSnake = function cellIsSnake(cell) {\n    var me = this;\n    var segment = me.tail;\n    var found = false;\n    while (segment) {\n        if (segment.equal(cell)) {\n            found = true;\n            break;\n        }\n        segment = segment.next;\n    }\n    return found;\n};\n\nfunction Food(ctx, canvasWidth, canvasHeight) {\n    var me = this;\n    me.allFoodPositionsLookup = [];\n    var i, j;\n    for (i = 0; i < canvasWidth; i += Segment.SEGMENT_SIZE) {\n        for (j = 0; j < canvasHeight; j += Segment.SEGMENT_SIZE) {\n            me.allFoodPositionsLookup.push({ x: i, y: j });\n        }\n    }\n    var startPosition = me.getRandXY();\n    me.item = new Segment({\n        ctx: ctx,\n        x: startPosition.x,\n        y: startPosition.y,\n        colour: 'green',\n        type: \"food\"\n    });\n}\n\nFood.prototype.getRandXY = function getRandXY() {\n    function getRandomInt(min, max) {\n        return Math.floor(Math.random() * (max - min + 1)) + min;\n    }\n    var me = this;\n    var min = 0;\n    var max = me.allFoodPositionsLookup.length;\n\n    return me.allFoodPositionsLookup[getRandomInt(min, max)];\n};\n\nFood.prototype.setNewPosition = function setNewPosition() {\n    var me = this;\n    var pos = me.getRandXY();\n    me.item.colour = \"green\";\n    me.item.x = pos.x;\n    me.item.y = pos.y;\n};\n\nFood.prototype.draw = function draw() {\n    this.item.draw();\n};\n\nFood.prototype.clear = function clear() {\n    this.item.clear();\n};\n\nfunction Grid(ctx, width, height, cellSize) {\n    var me = this;\n    me.cells = [];\n    me.ctx = ctx;\n    me.width = width;\n    me.height = height;\n    me.cellSize = cellSize;\n\n    var x, y;\n    for (x = 0; x < width; x += cellSize) {\n        for (y = 0; y < height; y += cellSize) {\n            var index = x / cellSize;\n            var newCell = new Segment({\n                x: x,\n                y: y,\n                width: Segment.SEGMENT_SIZE,\n                height: Segment.SEGMENT_SIZE,\n                ctx: ctx,\n                type: \"grid\"\n            });\n            if (!me.cells[index]) {\n                me.cells[index] = [newCell];\n            } else {\n                me.cells[index].push(newCell);\n            }\n        }\n    }\n}\n\nGrid.prototype.draw = function draw() {\n    var me = this;\n    for (x = 0; x < me.width; x += me.cellSize) {\n        for (y = 0; y < me.height; y += me.cellSize) {\n            var cell = me.cells[x / me.cellSize][y / me.cellSize];\n            me.ctx.strokeStyle = \"grey\";\n            me.ctx.strokeRect(cell.x, cell.y, cell.width, cell.height);\n        }\n    }\n};\n\nmodule.exports = {\n    Food: Food,\n    Snake: Snake,\n    Segment: Segment,\n    Grid: Grid\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zY3JpcHRzL3NuYWtlLmpzP2FlZTMiXSwibmFtZXMiOlsiU2VnbWVudCIsIm9wdGlvbnMiLCJtZSIsIndpZHRoIiwiU0VHTUVOVF9TSVpFIiwiaGVpZ2h0IiwiY29sb3VyIiwibmV4dCIsInByZXYiLCJ4IiwieSIsImQiLCJkUGx1c0wyIiwicGFyZW50IiwiY3R4IiwidHlwZSIsInByb3RvdHlwZSIsInVwZGF0ZVBvcyIsImRyYXciLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImNsZWFyIiwiY2xlYXJSZWN0Iiwic3Ryb2tlU3R5bGUiLCJzdHJva2VSZWN0IiwiZXF1YWwiLCJvdGhlclNlZ21lbnQiLCJTbmFrZSIsImN1cnJlbnREaXJlY3Rpb24iLCJyZXNldCIsImhlYWQiLCJ0YWlsIiwiYm9keSIsInVwZGF0ZVRhaWxCeURpcmVjdGlvbiIsIk5PUlRIIiwiU09VVEgiLCJFQVNUIiwiV0VTVCIsImRyYXdBbGwiLCJzZWdtZW50IiwiY2xlYXJBbGwiLCJncm93IiwiZGlyZWN0aW9uVXBkYXRlIiwibmV3VGFpbCIsImNlbGxJc1NuYWtlIiwiY2VsbCIsImZvdW5kIiwiRm9vZCIsImNhbnZhc1dpZHRoIiwiY2FudmFzSGVpZ2h0IiwiYWxsRm9vZFBvc2l0aW9uc0xvb2t1cCIsImkiLCJqIiwicHVzaCIsInN0YXJ0UG9zaXRpb24iLCJnZXRSYW5kWFkiLCJpdGVtIiwiZ2V0UmFuZG9tSW50IiwibWluIiwibWF4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGVuZ3RoIiwic2V0TmV3UG9zaXRpb24iLCJwb3MiLCJHcmlkIiwiY2VsbFNpemUiLCJjZWxscyIsImluZGV4IiwibmV3Q2VsbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLE9BQVQsQ0FBaUJDLE9BQWpCLEVBQTBCO0FBQ3RCLFFBQUlDLEtBQUssSUFBVDs7QUFFQUEsT0FBR0MsS0FBSCxHQUFXSCxRQUFRSSxZQUFuQjtBQUNBRixPQUFHRyxN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QixDQUFYO0FBQ0FqRSxlQUFHWSxHQUFILENBQU9TLFdBQVAsR0FBbUIsTUFBbkI7QUFDQXJCLGVBQUdZLEdBQUgsQ0FBT1UsVUFBUCxDQUFrQnFCLEtBQUtwQyxDQUF2QixFQUEwQm9DLEtBQUtuQyxDQUEvQixFQUFrQ21DLEtBQUsxQyxLQUF2QyxFQUE4QzBDLEtBQUt4QyxNQUFuRDtBQUNIO0FBQ0o7QUFFSixDQVZEOztBQWFBa0UsT0FBT0MsT0FBUCxHQUFpQjtBQUNiekIsVUFBTUEsSUFETztBQUVicEIsV0FBT0EsS0FGTTtBQUdiM0IsYUFBU0EsT0FISTtBQUlia0UsVUFBTUE7QUFKTyxDQUFqQiIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gU2VnbWVudChvcHRpb25zKSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG5cclxuICAgIG1lLndpZHRoID0gU2VnbWVudC5TRUdNRU5UX1NJWkU7XHJcbiAgICBtZS5oZWlnaHQgPSBTZWdtZW50LlNFR01FTlRfU0laRTtcclxuICAgIG1lLmNvbG91ciA9IG9wdGlvbnMuY29sb3VyIHx8IFwiYmxhY2tcIjtcclxuICAgIG1lLm5leHQgPSBvcHRpb25zLm5leHQgfHwgbnVsbDtcclxuICAgIG1lLnByZXYgPSBvcHRpb25zLnByZXYgfHwgbnVsbDtcclxuICAgIG1lLnggPSBvcHRpb25zLng7XHJcbiAgICBtZS55ID0gb3B0aW9ucy55O1xyXG4gICAgbWUuZCA9IDA7XHJcbiAgICBtZS5kUGx1c0wyID0gMDtcclxuICAgIG1lLnBhcmVudCA9IG9wdGlvbnMucGFyZW50O1xyXG4gICAgbWUuY3R4ID0gb3B0aW9ucy5jdHg7XHJcbiAgICBtZS50eXBlID0gb3B0aW9ucy50eXBlO1xyXG59XHJcblxyXG5TZWdtZW50LnByb3RvdHlwZS51cGRhdGVQb3MgPSBmdW5jdGlvbiB1cGRhdGVQb3MoeCwgeSkge1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbn07ICBcclxuXHJcblNlZ21lbnQucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiBkcmF3KGNvbG91cikge1xyXG4gICAgdmFyIG1lID0gdGhpcztcclxuICAgIG1lLmN0eC5maWxsU3R5bGUgPSBjb2xvdXIgfHwgbWUuY29sb3VyO1xyXG4gICAgbWUuY3R4LmZpbGxSZWN0KG1lLngsIG1lLnksIG1lLndpZHRoLCBtZS5oZWlnaHQpO1xyXG59O1xyXG5cclxuU2VnbWVudC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiBjbGVhcigpIHtcclxuICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICBtZS5jdHguY2xlYXJSZWN0KG1lLngsIG1lLnksIG1lLndpZHRoLCBtZS5oZWlnaHQpO1xyXG4gICAgbWUuY3R4LnN0cm9rZVN0eWxlPVwiZ3JleVwiO1xyXG4gICAgbWUuY3R4LnN0cm9rZVJlY3QobWUueCwgbWUueSwgbWUud2lkdGgsIG1lLmhlaWdodCk7XHJcbn07XHJcblxyXG5TZWdtZW50LnByb3RvdHlwZS5lcXVhbCA9IGZ1bmN0aW9uKG90aGVyU2VnbWVudCkge1xyXG4gICAgdmFyIG1lID0gdGhpcztcclxuICAgIHJldHVybiBtZS54ID09IG90aGVyU2VnbWVudC54ICYmIG1lLnkgPT0gb3RoZXJTZWdtZW50Lnk7XHJcbn07XHJcblxyXG5TZWdtZW50LlNFR01FTlRfU0laRSA9IDEwO1xyXG5cclxuZnVuY3Rpb24gU25ha2Uob3B0aW9ucykge1xyXG4gICAgdmFyIG1lID0gdGhpczsgICBcclxuICAgIG1lLnggPSBvcHRpb25zLnggfHwgMDtcclxuICAgIG1lLnkgPSBvcHRpb25zLnkgfHwgMDtcclxuXHJcbiAgICBtZS5jdHggPSBvcHRpb25zLmN0eDtcclxuICAgIG1lLmN1cnJlbnREaXJlY3Rpb24gPSAnRUFTVCc7XHJcblxyXG4gICAgbWUucmVzZXQoKTtcclxufVxyXG5cclxuU25ha2UucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoKSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgXHJcbiAgICBtZS5oZWFkID0gbnVsbDtcclxuICAgIG1lLnRhaWwgPSBudWxsO1xyXG5cclxuICAgIHZhciB0YWlsID0gbmV3IFNlZ21lbnQoe1xyXG4gICAgICAgIHg6IG1lLngsXHJcbiAgICAgICAgeTogbWUueSxcclxuICAgICAgICBjdHg6IG1lLmN0eCxcclxuICAgICAgICB0eXBlOiBcInNuYWtlXCJcclxuICAgIH0pO1xyXG4gICAgdmFyIGJvZHkgPSBuZXcgU2VnbWVudCh7XHJcbiAgICAgICAgeDogdGFpbC54ICsgU2VnbWVudC5TRUdNRU5UX1NJWkUsXHJcbiAgICAgICAgeTogdGFpbC55LFxyXG4gICAgICAgIGN0eDogbWUuY3R4LFxyXG4gICAgICAgIHR5cGU6IFwic25ha2VcIlxyXG4gICAgfSk7XHJcbiAgICB2YXIgaGVhZCA9IG5ldyBTZWdtZW50KHtcclxuICAgICAgICB4OiBib2R5LnggKyBTZWdtZW50LlNFR01FTlRfU0laRSxcclxuICAgICAgICB5OiBib2R5LnksXHJcbiAgICAgICAgY29sb3VyOiAncmVkJyxcclxuICAgICAgICBjdHg6IG1lLmN0eCxcclxuICAgICAgICB0eXBlOiBcInNuYWtlXCJcclxuICAgIH0pO1xyXG5cclxuICAgIHRhaWwubmV4dCA9IGJvZHk7XHJcbiAgICBib2R5Lm5leHQgPSBoZWFkO1xyXG4gICAgaGVhZC5uZXh0ID0gbnVsbDtcclxuXHJcbiAgICBtZS5oZWFkID0gaGVhZDtcclxuICAgIG1lLnRhaWwgPSB0YWlsO1xyXG5cclxuICAgIG1lLnVwZGF0ZVRhaWxCeURpcmVjdGlvbiA9IHtcclxuICAgICAgICBOT1JUSDoge1xyXG4gICAgICAgICAgICB5OiBTZWdtZW50LlNFR01FTlRfU0laRSxcclxuICAgICAgICAgICAgeDogMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgU09VVEg6IHtcclxuICAgICAgICAgICAgeTogLTEgKiBTZWdtZW50LlNFR01FTlRfU0laRSxcclxuICAgICAgICAgICAgeDogMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgRUFTVDoge1xyXG4gICAgICAgICAgICB5OiAwLFxyXG4gICAgICAgICAgICB4OiAtMSAqIFNlZ21lbnQuU0VHTUVOVF9TSVpFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBXRVNUOiB7XHJcbiAgICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICAgIHg6IFNlZ21lbnQuU0VHTUVOVF9TSVpFXHJcbiAgICAgICAgfSwgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgIH07XHJcblxyXG59O1xyXG5cclxuU25ha2UucHJvdG90eXBlLmRyYXdBbGwgPSBmdW5jdGlvbiBkcmF3QWxsKCkge1xyXG4gICAgdmFyIG1lID0gdGhpcztcclxuICAgIHZhciBzZWdtZW50ID0gbWUudGFpbDtcclxuICAgIHNlZ21lbnQuZHJhdygpO1xyXG4gICAgd2hpbGUoc2VnbWVudC5uZXh0KSB7XHJcbiAgICAgICAgc2VnbWVudCA9IHNlZ21lbnQubmV4dDtcclxuICAgICAgICBzZWdtZW50LmRyYXcoKTtcclxuICAgIH1cclxufTtcclxuXHJcblNuYWtlLnByb3RvdHlwZS5jbGVhckFsbCA9IGZ1bmN0aW9uIGNsZWFyQWxsKCkge1xyXG4gICAgdmFyIG1lID0gdGhpcztcclxuICAgIHZhciBzZWdtZW50ID0gbWUudGFpbDtcclxuICAgIHNlZ21lbnQuY2xlYXIoKTtcclxuICAgIHdoaWxlKHNlZ21lbnQubmV4dCkge1xyXG4gICAgICAgIHNlZ21lbnQgPSBzZWdtZW50Lm5leHQ7XHJcbiAgICAgICAgc2VnbWVudC5jbGVhcigpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuU25ha2UucHJvdG90eXBlLmdyb3cgPSBmdW5jdGlvbiBncm93KCkge1xyXG4gICAgdmFyIG1lID0gdGhpcztcclxuICAgIHZhciBkaXJlY3Rpb25VcGRhdGUgPSBtZS51cGRhdGVUYWlsQnlEaXJlY3Rpb25bbWUuY3VycmVudERpcmVjdGlvbl07XHJcblxyXG4gICAgdmFyIG5ld1RhaWwgPSBuZXcgU2VnbWVudCh7XHJcbiAgICAgICAgeDogbWUudGFpbC54ICsgZGlyZWN0aW9uVXBkYXRlLngsXHJcbiAgICAgICAgeTogbWUudGFpbC55ICsgZGlyZWN0aW9uVXBkYXRlLnksXHJcbiAgICAgICAgY3R4OiBtZS5jdHgsXHJcbiAgICAgICAgdHlwZTogXCJzbmFrZVwiXHJcbiAgICB9KTtcclxuICAgIG5ld1RhaWwubmV4dCA9IG1lLnRhaWw7XHJcbiAgICBtZS50YWlsID0gbmV3VGFpbDtcclxufTtcclxuXHJcblNuYWtlLnByb3RvdHlwZS5jZWxsSXNTbmFrZSA9IGZ1bmN0aW9uIGNlbGxJc1NuYWtlKGNlbGwpIHtcclxuICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICB2YXIgc2VnbWVudCA9IG1lLnRhaWw7XHJcbiAgICB2YXIgZm91bmQgPSBmYWxzZTtcclxuICAgIHdoaWxlKHNlZ21lbnQpIHtcclxuICAgICAgICBpZihzZWdtZW50LmVxdWFsKGNlbGwpKSB7XHJcbiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlZ21lbnQgPSBzZWdtZW50Lm5leHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZm91bmQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEZvb2QoY3R4LCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0KSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgbWUuYWxsRm9vZFBvc2l0aW9uc0xvb2t1cCA9IFtdO1xyXG4gICAgdmFyIGksajtcclxuICAgIGZvcihpID0gMCA7IGkgPCBjYW52YXNXaWR0aCA7IGkgKz0gU2VnbWVudC5TRUdNRU5UX1NJWkUpIHtcclxuICAgICAgICBmb3IoaiA9IDA7IGogPCBjYW52YXNIZWlnaHQgOyBqICs9IFNlZ21lbnQuU0VHTUVOVF9TSVpFKSB7XHJcbiAgICAgICAgICAgIG1lLmFsbEZvb2RQb3NpdGlvbnNMb29rdXAucHVzaCh7IHg6IGksIHk6IGogfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFyIHN0YXJ0UG9zaXRpb24gPSBtZS5nZXRSYW5kWFkoKTtcclxuICAgIG1lLml0ZW0gPSBuZXcgU2VnbWVudCh7XHJcbiAgICAgICAgY3R4OiBjdHgsXHJcbiAgICAgICAgeDogc3RhcnRQb3NpdGlvbi54LFxyXG4gICAgICAgIHk6IHN0YXJ0UG9zaXRpb24ueSxcclxuICAgICAgICBjb2xvdXI6ICdncmVlbicsXHJcbiAgICAgICAgdHlwZTogXCJmb29kXCJcclxuICAgIH0pO1xyXG59XHJcblxyXG5Gb29kLnByb3RvdHlwZS5nZXRSYW5kWFkgPSBmdW5jdGlvbiBnZXRSYW5kWFkoKSB7XHJcbiAgICBmdW5jdGlvbiBnZXRSYW5kb21JbnQobWluLCBtYXgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XHJcbiAgICB9XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgdmFyIG1pbiA9IDA7XHJcbiAgICB2YXIgbWF4ID0gbWUuYWxsRm9vZFBvc2l0aW9uc0xvb2t1cC5sZW5ndGg7XHJcbiAgICBcclxuICAgIHJldHVybiBtZS5hbGxGb29kUG9zaXRpb25zTG9va3VwW2dldFJhbmRvbUludChtaW4sIG1heCldO1xyXG59O1xyXG5cclxuRm9vZC5wcm90b3R5cGUuc2V0TmV3UG9zaXRpb24gPSBmdW5jdGlvbiBzZXROZXdQb3NpdGlvbigpIHtcclxuICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICB2YXIgcG9zID0gbWUuZ2V0UmFuZFhZKCk7XHJcbiAgICBtZS5pdGVtLmNvbG91ciA9IFwiZ3JlZW5cIjtcclxuICAgIG1lLml0ZW0ueCA9IHBvcy54O1xyXG4gICAgbWUuaXRlbS55ID0gcG9zLnk7ICAgXHJcbn07XHJcblxyXG5Gb29kLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gZHJhdygpIHtcclxuICAgIHRoaXMuaXRlbS5kcmF3KCk7XHJcbn1cclxuXHJcbkZvb2QucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XHJcbiAgICB0aGlzLml0ZW0uY2xlYXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gR3JpZChjdHgsIHdpZHRoLCBoZWlnaHQsIGNlbGxTaXplKSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgbWUuY2VsbHMgPSBbXTtcclxuICAgIG1lLmN0eCA9IGN0eDtcclxuICAgIG1lLndpZHRoID0gd2lkdGg7XHJcbiAgICBtZS5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICBtZS5jZWxsU2l6ZSA9IGNlbGxTaXplO1xyXG5cclxuICAgIHZhciB4LHk7XHJcbiAgICBmb3IoeCA9IDA7IHggPCB3aWR0aCA7IHggKz0gY2VsbFNpemUpIHtcclxuICAgICAgICBmb3IoeSA9IDAgOyB5IDwgaGVpZ2h0OyB5ICs9IGNlbGxTaXplKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHgvY2VsbFNpemU7XHJcbiAgICAgICAgICAgIHZhciBuZXdDZWxsID0gbmV3IFNlZ21lbnQoe1xyXG4gICAgICAgICAgICAgICAgeDogeCxcclxuICAgICAgICAgICAgICAgIHk6IHksXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogU2VnbWVudC5TRUdNRU5UX1NJWkUsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IFNlZ21lbnQuU0VHTUVOVF9TSVpFLFxyXG4gICAgICAgICAgICAgICAgY3R4OiBjdHgsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImdyaWRcIlxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYoIW1lLmNlbGxzW2luZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgbWUuY2VsbHNbaW5kZXhdID0gW25ld0NlbGxdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWUuY2VsbHNbaW5kZXhdLnB1c2gobmV3Q2VsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbkdyaWQucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbiBkcmF3KCkge1xyXG4gICAgdmFyIG1lID0gdGhpcztcclxuICAgIGZvcih4ID0gMDsgeCA8IG1lLndpZHRoIDsgeCArPSBtZS5jZWxsU2l6ZSkge1xyXG4gICAgICAgIGZvcih5ID0gMCA7IHkgPCBtZS5oZWlnaHQ7IHkgKz0gbWUuY2VsbFNpemUpIHtcclxuICAgICAgICAgICAgdmFyIGNlbGwgPSBtZS5jZWxsc1t4L21lLmNlbGxTaXplXVt5L21lLmNlbGxTaXplXTtcclxuICAgICAgICAgICAgbWUuY3R4LnN0cm9rZVN0eWxlPVwiZ3JleVwiO1xyXG4gICAgICAgICAgICBtZS5jdHguc3Ryb2tlUmVjdChjZWxsLngsIGNlbGwueSwgY2VsbC53aWR0aCwgY2VsbC5oZWlnaHQpO1xyXG4gICAgICAgIH1cclxuICAgIH0gICAgXHJcbiAgICBcclxufVxyXG4gICAgXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIEZvb2Q6IEZvb2QsXHJcbiAgICBTbmFrZTogU25ha2UsXHJcbiAgICBTZWdtZW50OiBTZWdtZW50LFxyXG4gICAgR3JpZDogR3JpZCxcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc2NyaXB0cy9zbmFrZS5qcyJdLCJzb3VyY2VSb290IjoiIn0=");

/***/ }
/******/ ]);