/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	eval("var GameObjects = __webpack_require__(1);\nvar Snake = GameObjects.Snake;\nvar Segment = GameObjects.Segment;\nvar Food = GameObjects.Food;\nvar Grid = GameObjects.Grid;\n\nwindow.onload = function () {\n    const canvasWidth = 1520;\n    const canvasHeight = 920;\n\n    var FPS = 60;\n    var gameLoop;\n    var gameRunning = true;\n\n    var dirKeyLookup = {\n        37: 'WEST',\n        38: 'NORTH',\n        39: 'EAST',\n        40: 'SOUTH'\n    };\n\n    var reverseDirKeyLookup = {\n        WEST: 37,\n        NORTH: 38,\n        EAST: 39,\n        SOUTH: 40\n    };\n\n    var unallowedDirLookup = {\n        'WEST': 39,\n        'NORTH': 40,\n        'EAST': 37,\n        'SOUTH': 38\n    };\n\n    var updateHeadByDirection = {\n        NORTH: {\n            y: -1 * Segment.SEGMENT_SIZE,\n            x: 0\n        },\n        SOUTH: {\n            y: Segment.SEGMENT_SIZE,\n            x: 0\n        },\n        EAST: {\n            y: 0,\n            x: Segment.SEGMENT_SIZE\n        },\n        WEST: {\n            y: 0,\n            x: -1 * Segment.SEGMENT_SIZE\n        }\n    };\n\n    var fringeSet = [];\n    var closedSet = [];\n\n    function validDirectionChange(keyCode, currentDirection) {\n        var direction = dirKeyLookup[keyCode];\n        if (currentDirection === direction) {\n            return false;\n        }\n        var unallowed = unallowedDirLookup[currentDirection];\n        return keyCode != unallowed;\n    }\n\n    function insideWorldBounds(keyCode, head) {\n        var direction = dirKeyLookup[keyCode];\n        var directionUpdate = updateHeadByDirection[direction];\n        var newX = head.x + directionUpdate.x;\n        var newY = head.y + directionUpdate.y;\n        return newX <= canvasWidth && newX >= 0 && newY <= canvasHeight && newY >= 0;\n    }\n\n    function updateSnakeFromDirection(snake, keycode) {\n        snake.head.colour = 'black';\n        snake.head.draw();\n        var curHeadX = snake.head.x;\n        var curHeadY = snake.head.y;\n        snake.tail.clear();\n        var newTail = snake.tail.next;\n        var newHead = snake.tail;\n        newHead.next = null;\n        snake.head.next = newHead;\n        snake.head = newHead;\n        snake.tail = newTail;\n        var direction = dirKeyLookup[keycode];\n        var dirctionUpdate = updateHeadByDirection[direction];\n        snake.head.x = curHeadX + dirctionUpdate.x;\n        snake.head.y = curHeadY + dirctionUpdate.y;\n        snake.head.colour = 'red';\n        snake.head.draw();\n        snake.currentDirection = direction;\n    }\n\n    function checkCollisions(snake) {\n        if (snake.head.equal(food.item)) {\n            snake.grow();\n            food.setNewPosition();\n            updateScore();\n            return true;\n        }\n\n        if (snake.head.equal(snake.tail)) {\n            resetGame(snake);\n            return false;\n        }\n\n        var current = snake.tail;\n        while (current != snake.head) {\n            if (snake.head.equal(current)) {\n                resetGame(snake);\n                return false;\n            }\n            current = current.next;\n        }\n        return true;\n    }\n\n    function search() {\n        fringeSet.forEach(function (node) {\n            node.clear();\n        });\n\n        closedSet.forEach(function (node) {\n            node.colour = \"yellow\";\n            node.clear();\n        });\n        fringeSet = [];\n        closedSet = [];\n        fringeSet.push(snake.head);\n    }\n\n    function addChildrenToFringeSet(parentNode) {\n\n        var northCoords = {\n            x: parentNode.x / Segment.SEGMENT_SIZE,\n            y: (parentNode.y - Segment.SEGMENT_SIZE) / Segment.SEGMENT_SIZE\n        };\n        var southCoords = {\n            x: parentNode.x / Segment.SEGMENT_SIZE,\n            y: (parentNode.y + Segment.SEGMENT_SIZE) / Segment.SEGMENT_SIZE\n        };\n        var westCoords = {\n            x: (parentNode.x - Segment.SEGMENT_SIZE) / Segment.SEGMENT_SIZE,\n            y: parentNode.y / Segment.SEGMENT_SIZE\n        };\n        var eastCoords = {\n            x: (parentNode.x + Segment.SEGMENT_SIZE) / Segment.SEGMENT_SIZE,\n            y: parentNode.y / Segment.SEGMENT_SIZE\n        };\n        var children = [];\n        if (northCoords.y >= 0) {\n            children.push(grid.cells[northCoords.x][northCoords.y]);\n        }\n        if (southCoords.y <= canvasHeight) {\n            children.push(grid.cells[southCoords.x][southCoords.y]);\n        }\n        if (westCoords.x >= 0) {\n            children.push(grid.cells[westCoords.x][westCoords.y]);\n        }\n        if (eastCoords.y <= canvasWidth) {\n            children.push(grid.cells[eastCoords.x][eastCoords.y]);\n        }\n\n        children.forEach(function (child) {\n            child.d = parentNode.d + distanceFromNodeToNode(parentNode, child);\n            var L2 = distanceFromNodeToNode(child, food.item);\n            child.dPlusL2 = child.d + L2;\n            fringeSet.push(child);\n        });\n\n        fringeSet.sort(function (a, b) {\n            return a.dPlusL2 > b.dPlusL2 ? 1 : -1;\n        });\n    }\n\n    //http://mnemstudio.org/path-finding-a-star.htm\n    function findRoute() {\n        if (fringeSet.length === 0) {\n            return 0;\n        } else {\n            var node = fringeSet.shift();\n            if (node.equal(food.item)) {\n                console.log(\"found\");\n                if (node.equal(food.item)) {\n                    food.item.colour = \"pink\";\n                }\n\n                fringeSet.forEach(function (node) {\n                    node.colour = \"orange\";\n                    node.draw();\n                });\n\n                closedSet.forEach(function (node) {\n                    node.colour = \"yellow\";\n                    node.draw();\n                });\n            } else {\n                var found = null;\n                var nodeIsInClosed = closedSet.some(function (item) {\n                    return item.equal(node);\n                });\n                if (!nodeIsInClosed) {\n                    closedSet.push(node);\n                    addChildrenToFringeSet(node);\n                }\n                return findRoute();\n            }\n        }\n    }\n\n    function distanceFromNodeToNode(node1, node2) {\n        var node1X = node1.x;\n        var node1Y = node1.y;\n\n        var node2X = node2.x;\n        var node2Y = node2.y;\n\n        var dx = node2X - node1X;\n        var dy = node2Y - node1Y;\n        var distance = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n        return distance;\n    }\n\n    document.addEventListener('keydown', function (event) {\n        if (event.keyCode === 81) {\n            gameRunning = false;\n        } else if (event.keyCode == 37 || event.keyCode == 39 || event.keyCode == 38 || event.keyCode == 40) {\n            //LEFT\n            var validUpdate = validDirectionChange(event.keyCode, snake.currentDirection) && insideWorldBounds(event.keyCode, snake.head);\n            if (validUpdate) {\n                updateSnakeFromDirection(snake, event.keyCode);\n            }\n        } else if (event.keyCode === 32) {\n            search();\n            findRoute();\n            update();\n        }\n    });\n\n    /*\r\n                     (_)      \r\n      _ __ ___   __ _ _ _ __  \r\n     | '_ ` _ \\ / _` | | '_ \\ \r\n     | | | | | | (_| | | | | |\r\n     |_| |_| |_|\\__,_|_|_| |_|\r\n    */\n    var canvasEl = document.getElementById('main');\n    canvasEl.style.backgroundColor = 'rgba(158, 167, 184, 0.2)';\n    canvasEl.width = canvasWidth;\n    canvasEl.height = canvasHeight;\n    var ctx = canvasEl.getContext('2d');\n    var g = GameObjects;\n    var snake = new Snake({\n        x: canvasWidth / 2,\n        y: canvasHeight / 2,\n        ctx: ctx\n    });\n\n    var grid = new Grid(ctx, canvasWidth, canvasHeight, Segment.SEGMENT_SIZE);\n    grid.draw();\n    var food = new Food(ctx, canvasWidth, canvasHeight);\n\n    var lastFrameTimeMs = 0; // The last time the loop was run\n    var maxFPS = 31; // The maximum FPS we want to allow\n    snake.currentDirection = 'EAST';\n    snake.drawAll();\n    var currentScore = -1;\n\n    function updateScore(value) {\n        document.getElementById(\"score\").textContent = \"SCORE: \" + ++currentScore;\n    }\n\n    updateScore();\n\n    function resetGame(snake) {\n        snake.clearAll();\n        snake.reset();\n        food.clear();\n        food.setNewPosition();\n        currentScore = -1;\n        updateScore();\n    }\n\n    function update() {\n        var keyCode = reverseDirKeyLookup[snake.currentDirection];\n        var insideWorld = insideWorldBounds(keyCode, snake.head);\n        if (insideWorld) {\n            var check = checkCollisions(snake);\n            if (check) {\n                updateSnakeFromDirection(snake, keyCode);\n            }\n            checkCollisions(snake);\n        } else {\n            resetGame(snake);\n        }\n    }\n\n    function draw() {\n        food.draw();\n        snake.drawAll();\n    }\n\n    function gameLoop(timeStamp) {\n        if (gameRunning) {\n            if (timeStamp < lastFrameTimeMs + 1000 / maxFPS) {\n                requestAnimationFrame(gameLoop);\n                return;\n            }\n            lastFrameTimeMs = timeStamp;\n            //update();\n            draw();\n            requestAnimationFrame(gameLoop);\n        }\n    }\n    requestAnimationFrame(gameLoop);\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAuanM/ZDhlZSJdLCJuYW1lcyI6WyJHYW1lT2JqZWN0cyIsInJlcXVpcmUiLCJTbmFrZSIsIlNlZ21lbnQiLCJGb29kIiwiR3JpZCIsIndpbmRvdyIsIm9ubG9hZCIsImNhbnZhc1dpZHRoIiwiY2FudmFzSGVpZ2h0IiwiRlBTIiwiZ2FtZUxvb3AiLCJnYW1lUnVubmluZyIsImRpcktleUxvb2t1cCIsInJldmVyc2VEaXJLZXlMb29rdXAiLCJXRVNUIiwiTk9SVEgiLCJFQVNUIiwiU09VVEgiLCJ1bmFsbG93ZWREaXJMb29rdXAiLCJ1cGRhdGVIZWFkQnlEaXJlY3Rpb24iLCJ5IiwiU0VHTUVOVF9TSVpFIiwieCIsImZyaW5nZVNldCIsImNsb3NlZFNldCIsInZhbGlkRGlyZWN0aW9uQ2hhbmdlIiwia2V5Q29kZSIsImN1cnJlbnREaXJlY3Rpb24iLCJkaXJlY3Rpb24iLCJ1bmFsbG93ZWQiLCJpbnNpZGVXb3JsZEJvdW5kcyIsImhlYWQiLCJkaXJlY3Rpb25VcGRhdGUiLCJuZXdYIiwibmV3WSIsInVwZGF0ZVNuYWtlRnJvbURpcmVjdGlvbiIsInNuYWtlIiwia2V5Y29kZSIsImNvbG91ciIsImRyYXciLCJjdXJIZWFkWCIsImN1ckhlYWRZIiwidGFpbCIsImNsZWFyIiwibmV3VGFpbCIsIm5leHQiLCJuZXdIZWFkIiwiZGlyY3Rpb25VcGRhdGUiLCJjaGVja0NvbGxpc2lvbnMiLCJlcXVhbCIsImZvb2QiLCJpdGVtIiwiZ3JvdyIsInNldE5ld1Bvc2l0aW9uIiwidXBkYXRlU2NvcmUiLCJyZXNldEdhbWUiLCJjdXJyZW50Iiwic2VhcmNoIiwiZm9yRWFjaCIsIm5vZGUiLCJwdXNoIiwiYWRkQ2hpbGRyZW5Ub0ZyaW5nZVNldCIsInBhcmVudE5vZGUiLCJub3J0aENvb3JkcyIsInNvdXRoQ29vcmRzIiwid2VzdENvb3JkcyIsImVhc3RDb29yZHMiLCJjaGlsZHJlbiIsImdyaWQiLCJjZWxscyIsImNoaWxkIiwiZCIsImRpc3RhbmNlRnJvbU5vZGVUb05vZGUiLCJMMiIsImRQbHVzTDIiLCJzb3J0IiwiYSIsImIiLCJmaW5kUm91dGUiLCJsZW5ndGgiLCJzaGlmdCIsImNvbnNvbGUiLCJsb2ciLCJmb3VuZCIsIm5vZGVJc0luQ2xvc2VkIiwic29tZSIsIm5vZGUxIiwibm9kZTIiLCJub2RlMVgiLCJub2RlMVkiLCJub2RlMlgiLCJub2RlMlkiLCJkeCIsImR5IiwiZGlzdGFuY2UiLCJNYXRoIiwic3FydCIsInBvdyIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidmFsaWRVcGRhdGUiLCJ1cGRhdGUiLCJjYW52YXNFbCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ3aWR0aCIsImhlaWdodCIsImN0eCIsImdldENvbnRleHQiLCJnIiwibGFzdEZyYW1lVGltZU1zIiwibWF4RlBTIiwiZHJhd0FsbCIsImN1cnJlbnRTY29yZSIsInZhbHVlIiwidGV4dENvbnRlbnQiLCJjbGVhckFsbCIsInJlc2V0IiwiaW5zaWRlV29ybGQiLCJjaGVjayIsInRpbWVTdGFtcCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsY0FBYyxtQkFBQUMsQ0FBUSxDQUFSLENBQWxCO0FBQ0EsSUFBSUMsUUFBUUYsWUFBWUUsS0FBeEI7QUFDQSxJQUFJQyxVQUFVSCxZQUFZRyxPQUExQjtBQUNBLElBQUlDLE9BQU9KLFlBQVlJLElBQXZCO0FBQ0EsSUFBSUMsT0FBT0wsWUFBWUssSUFBdkI7O0FBRUFDLE9BQU9DLE1BQVAsR0FBZ0IsWUFBVztBQUN2QixVQUFNQyxjQUFjLElBQXBCO0FBQ0EsVUFBTUMsZUFBZSxHQUFyQjs7QUFFQSxRQUFJQyxNQUFNLEVBQVY7QUFDQSxRQUFJQyxRQUFKO0FBQ0EsUUFBSUMsY0FBYyxJQUFsQjs7QUFFQSxRQUFJQyxlQUFlO0FBQ2YsWUFBSSxNQURXO0FBRWYsWUFBSSxPQUZXO0FBR2YsWUFBSSxNQUhXO0FBSWYsWUFBSTtB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QyxFQUFrRDtBQUM5Q1Usc0NBQXNCakgsUUFBdEI7QUFDQTtBQUNIO0FBQ0RzRyw4QkFBa0JVLFNBQWxCO0FBQ0E7QUFDQW5GO0FBQ0FvRixrQ0FBc0JqSCxRQUF0QjtBQUNIO0FBQ0o7QUFDRGlILDBCQUFzQmpILFFBQXRCO0FBQ0gsQ0ExVEQiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBHYW1lT2JqZWN0cyA9IHJlcXVpcmUoXCIuL3NjcmlwdHMvc25ha2UuanNcIik7XHJcbnZhciBTbmFrZSA9IEdhbWVPYmplY3RzLlNuYWtlO1xyXG52YXIgU2VnbWVudCA9IEdhbWVPYmplY3RzLlNlZ21lbnQ7XHJcbnZhciBGb29kID0gR2FtZU9iamVjdHMuRm9vZDtcclxudmFyIEdyaWQgPSBHYW1lT2JqZWN0cy5HcmlkO1xyXG5cclxud2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgY29uc3QgY2FudmFzV2lkdGggPSAxNTIwO1xyXG4gICAgY29uc3QgY2FudmFzSGVpZ2h0ID0gOTIwO1xyXG4gICAgXHJcbiAgICB2YXIgRlBTID0gNjA7XHJcbiAgICB2YXIgZ2FtZUxvb3A7XHJcbiAgICB2YXIgZ2FtZVJ1bm5pbmcgPSB0cnVlO1xyXG5cclxuICAgIHZhciBkaXJLZXlMb29rdXAgPSB7XHJcbiAgICAgICAgMzc6ICdXRVNUJyxcclxuICAgICAgICAzODogJ05PUlRIJyxcclxuICAgICAgICAzOTogJ0VBU1QnLFxyXG4gICAgICAgIDQwOiAnU09VVEgnXHJcbiAgICB9O1xyXG5cclxuICAgICB2YXIgcmV2ZXJzZURpcktleUxvb2t1cCA9IHtcclxuICAgICAgICBXRVNUOiAzNyxcclxuICAgICAgICBOT1JUSDogMzgsXHJcbiAgICAgICAgRUFTVDogMzksXHJcbiAgICAgICAgU09VVEg6IDQwXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciB1bmFsbG93ZWREaXJMb29rdXAgPSB7XHJcbiAgICAgICAgJ1dFU1QnOiAzOSxcclxuICAgICAgICAnTk9SVEgnOiA0MCxcclxuICAgICAgICAnRUFTVCc6IDM3LFxyXG4gICAgICAgICdTT1VUSCc6IDM4XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciB1cGRhdGVIZWFkQnlEaXJlY3Rpb24gPSB7XHJcbiAgICAgICAgTk9SVEg6IHtcclxuICAgICAgICAgICAgeTogLTEgKiBTZWdtZW50LlNFR01FTlRfU0laRSxcclxuICAgICAgICAgICAgeDogMFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgU09VVEg6IHtcclxuICAgICAgICAgICAgeTogU2VnbWVudC5TRUdNRU5UX1NJWkUsXHJcbiAgICAgICAgICAgIHg6IDBcclxuICAgICAgICB9LFxyXG4gICAgICAgIEVBU1Q6IHtcclxuICAgICAgICAgICAgeTogMCxcclxuICAgICAgICAgICAgeDogU2VnbWVudC5TRUdNRU5UX1NJWkVcclxuICAgICAgICB9LFxyXG4gICAgICAgIFdFU1Q6IHtcclxuICAgICAgICAgICAgeTogMCxcclxuICAgICAgICAgICAgeDogLTEgKiBTZWdtZW50LlNFR01FTlRfU0laRVxyXG4gICAgICAgIH0sICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBmcmluZ2VTZXQgPSBbXTtcclxuICAgIHZhciBjbG9zZWRTZXQgPSBbXTtcclxuXHJcbiAgICBmdW5jdGlvbiB2YWxpZERpcmVjdGlvbkNoYW5nZShrZXlDb2RlLCBjdXJyZW50RGlyZWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGRpcktleUxvb2t1cFtrZXlDb2RlXTtcclxuICAgICAgICBpZihjdXJyZW50RGlyZWN0aW9uID09PSBkaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdW5hbGxvd2VkID0gdW5hbGxvd2VkRGlyTG9va3VwW2N1cnJlbnREaXJlY3Rpb25dXHJcbiAgICAgICAgcmV0dXJuIGtleUNvZGUgIT0gdW5hbGxvd2VkO1xyXG4gICAgfSAgICBcclxuXHJcbiAgICBmdW5jdGlvbiBpbnNpZGVXb3JsZEJvdW5kcyhrZXlDb2RlLCBoZWFkKSB7XHJcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGRpcktleUxvb2t1cFtrZXlDb2RlXTtcclxuICAgICAgICB2YXIgZGlyZWN0aW9uVXBkYXRlID0gdXBkYXRlSGVhZEJ5RGlyZWN0aW9uW2RpcmVjdGlvbl07XHJcbiAgICAgICAgdmFyIG5ld1ggPSBoZWFkLnggKyBkaXJlY3Rpb25VcGRhdGUueDtcclxuICAgICAgICB2YXIgbmV3WSA9IGhlYWQueSArIGRpcmVjdGlvblVwZGF0ZS55O1xyXG4gICAgICAgIHJldHVybiBuZXdYIDw9IGNhbnZhc1dpZHRoICYmICBuZXdYID49IDAgJiYgbmV3WSA8PSBjYW52YXNIZWlnaHQgJiYgbmV3WSA+PSAwO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZVNuYWtlRnJvbURpcmVjdGlvbihzbmFrZSwga2V5Y29kZSkge1xyXG4gICAgICAgIHNuYWtlLmhlYWQuY29sb3VyID0gJ2JsYWNrJztcclxuICAgICAgICBzbmFrZS5oZWFkLmRyYXcoKTtcclxuICAgICAgICB2YXIgY3VySGVhZFggPSBzbmFrZS5oZWFkLng7XHJcbiAgICAgICAgdmFyIGN1ckhlYWRZID0gc25ha2UuaGVhZC55O1xyXG4gICAgICAgIHNuYWtlLnRhaWwuY2xlYXIoKTtcclxuICAgICAgICB2YXIgbmV3VGFpbCA9IHNuYWtlLnRhaWwubmV4dDtcclxuICAgICAgICB2YXIgbmV3SGVhZCA9IHNuYWtlLnRhaWxcclxuICAgICAgICBuZXdIZWFkLm5leHQgPSBudWxsO1xyXG4gICAgICAgIHNuYWtlLmhlYWQubmV4dCA9IG5ld0hlYWQ7XHJcbiAgICAgICAgc25ha2UuaGVhZCA9IG5ld0hlYWQ7XHJcbiAgICAgICAgc25ha2UudGFpbCA9IG5ld1RhaWw7XHJcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGRpcktleUxvb2t1cFtrZXljb2RlXTtcclxuICAgICAgICB2YXIgZGlyY3Rpb25VcGRhdGUgPSB1cGRhdGVIZWFkQnlEaXJlY3Rpb25bZGlyZWN0aW9uXTtcclxuICAgICAgICBzbmFrZS5oZWFkLnggPSBjdXJIZWFkWCArIGRpcmN0aW9uVXBkYXRlLng7XHJcbiAgICAgICAgc25ha2UuaGVhZC55ID0gY3VySGVhZFkgKyBkaXJjdGlvblVwZGF0ZS55O1xyXG4gICAgICAgIHNuYWtlLmhlYWQuY29sb3VyID0gJ3JlZCc7XHJcbiAgICAgICAgc25ha2UuaGVhZC5kcmF3KCk7XHJcbiAgICAgICAgc25ha2UuY3VycmVudERpcmVjdGlvbiA9IGRpcmVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjaGVja0NvbGxpc2lvbnMoc25ha2UpIHtcclxuICAgICAgICBpZihzbmFrZS5oZWFkLmVxdWFsKGZvb2QuaXRlbSkpIHtcclxuICAgICAgICAgICAgc25ha2UuZ3JvdygpO1xyXG4gICAgICAgICAgICBmb29kLnNldE5ld1Bvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIHVwZGF0ZVNjb3JlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoc25ha2UuaGVhZC5lcXVhbChzbmFrZS50YWlsKSkge1xyXG4gICAgICAgICAgICByZXNldEdhbWUoc25ha2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgY3VycmVudCA9IHNuYWtlLnRhaWw7XHJcbiAgICAgICAgd2hpbGUoY3VycmVudCAhPSBzbmFrZS5oZWFkKSB7XHJcbiAgICAgICAgICAgIGlmKHNuYWtlLmhlYWQuZXF1YWwoY3VycmVudCkpIHtcclxuICAgICAgICAgICAgICAgIHJlc2V0R2FtZShzbmFrZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQubmV4dDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNlYXJjaCgpIHtcclxuICAgICAgICBmcmluZ2VTZXQuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgIG5vZGUuY2xlYXIoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjbG9zZWRTZXQuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgIG5vZGUuY29sb3VyID0gXCJ5ZWxsb3dcIjtcclxuICAgICAgICAgICAgbm9kZS5jbGVhcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGZyaW5nZVNldCA9IFtdO1xyXG4gICAgICAgIGNsb3NlZFNldCA9IFtdO1xyXG4gICAgICAgIGZyaW5nZVNldC5wdXNoKHNuYWtlLmhlYWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZENoaWxkcmVuVG9GcmluZ2VTZXQocGFyZW50Tm9kZSkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBub3J0aENvb3JkcyA9IHtcclxuICAgICAgICAgICAgeDogcGFyZW50Tm9kZS54L1NlZ21lbnQuU0VHTUVOVF9TSVpFLFxyXG4gICAgICAgICAgICB5OiAocGFyZW50Tm9kZS55LVNlZ21lbnQuU0VHTUVOVF9TSVpFKS9TZWdtZW50LlNFR01FTlRfU0laRVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHNvdXRoQ29vcmRzID0ge1xyXG4gICAgICAgICAgICB4OiBwYXJlbnROb2RlLngvU2VnbWVudC5TRUdNRU5UX1NJWkUsXHJcbiAgICAgICAgICAgIHk6IChwYXJlbnROb2RlLnkrU2VnbWVudC5TRUdNRU5UX1NJWkUpL1NlZ21lbnQuU0VHTUVOVF9TSVpFXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgd2VzdENvb3JkcyA9IHtcclxuICAgICAgICAgICAgeDogKHBhcmVudE5vZGUueC1TZWdtZW50LlNFR01FTlRfU0laRSkvU2VnbWVudC5TRUdNRU5UX1NJWkUsXHJcbiAgICAgICAgICAgIHk6IHBhcmVudE5vZGUueS9TZWdtZW50LlNFR01FTlRfU0laRVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIGVhc3RDb29yZHMgPSB7XHJcbiAgICAgICAgICAgIHg6IChwYXJlbnROb2RlLngrU2VnbWVudC5TRUdNRU5UX1NJWkUpL1NlZ21lbnQuU0VHTUVOVF9TSVpFLFxyXG4gICAgICAgICAgICB5OiBwYXJlbnROb2RlLnkvU2VnbWVudC5TRUdNRU5UX1NJWkVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBjaGlsZHJlbiA9IFtdO1xyXG4gICAgICAgIGlmKG5vcnRoQ29vcmRzLnkgPj0gMCkge1xyXG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKGdyaWQuY2VsbHNbbm9ydGhDb29yZHMueF1bbm9ydGhDb29yZHMueV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihzb3V0aENvb3Jkcy55IDw9IGNhbnZhc0hlaWdodCkge1xyXG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKGdyaWQuY2VsbHNbc291dGhDb29yZHMueF1bc291dGhDb29yZHMueV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZih3ZXN0Q29vcmRzLnggPj0gMCkge1xyXG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKGdyaWQuY2VsbHNbd2VzdENvb3Jkcy54XVt3ZXN0Q29vcmRzLnldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoZWFzdENvb3Jkcy55IDw9IGNhbnZhc1dpZHRoKSB7XHJcbiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2goZ3JpZC5jZWxsc1tlYXN0Q29vcmRzLnhdW2Vhc3RDb29yZHMueV0pO1xyXG4gICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCkge1xyXG4gICAgICAgICAgICBjaGlsZC5kID0gcGFyZW50Tm9kZS5kICsgZGlzdGFuY2VGcm9tTm9kZVRvTm9kZShwYXJlbnROb2RlLCBjaGlsZCk7XHJcbiAgICAgICAgICAgIHZhciBMMiA9IGRpc3RhbmNlRnJvbU5vZGVUb05vZGUoY2hpbGQsIGZvb2QuaXRlbSk7XHJcbiAgICAgICAgICAgIGNoaWxkLmRQbHVzTDIgPSBjaGlsZC5kICsgTDI7XHJcbiAgICAgICAgICAgIGZyaW5nZVNldC5wdXNoKGNoaWxkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnJpbmdlU2V0LnNvcnQoZnVuY3Rpb24oYSxiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLmRQbHVzTDIgPiBiLmRQbHVzTDIgPyAxIDogLTE7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4vL2h0dHA6Ly9tbmVtc3R1ZGlvLm9yZy9wYXRoLWZpbmRpbmctYS1zdGFyLmh0bVxyXG4gICAgZnVuY3Rpb24gZmluZFJvdXRlKCkge1xyXG4gICAgICAgIGlmKGZyaW5nZVNldC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSBmcmluZ2VTZXQuc2hpZnQoKTtcclxuICAgICAgICAgICAgaWYobm9kZS5lcXVhbChmb29kLml0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImZvdW5kXCIpXHJcbiAgICAgICAgICAgICAgICBpZihub2RlLmVxdWFsKGZvb2QuaXRlbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb29kLml0ZW0uY29sb3VyID0gXCJwaW5rXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnJpbmdlU2V0LmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY29sb3VyID0gXCJvcmFuZ2VcIjtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGNsb3NlZFNldC5mb3JFYWNoKGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLmNvbG91ciA9IFwieWVsbG93XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5kcmF3KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBmb3VuZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZUlzSW5DbG9zZWQgPSBjbG9zZWRTZXQuc29tZShmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZXF1YWwobm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmKCFub2RlSXNJbkNsb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlZFNldC5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZENoaWxkcmVuVG9GcmluZ2VTZXQobm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmluZFJvdXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkaXN0YW5jZUZyb21Ob2RlVG9Ob2RlKG5vZGUxLCBub2RlMikge1xyXG4gICAgICAgIHZhciBub2RlMVggPSBub2RlMS54O1xyXG4gICAgICAgIHZhciBub2RlMVkgPSBub2RlMS55O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBub2RlMlggPSBub2RlMi54O1xyXG4gICAgICAgIHZhciBub2RlMlkgPSBub2RlMi55O1xyXG5cclxuICAgICAgICB2YXIgZHggPSAobm9kZTJYIC0gbm9kZTFYKTtcclxuICAgICAgICB2YXIgZHkgPSAobm9kZTJZIC0gbm9kZTFZKTtcclxuICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoTWF0aC5wb3coZHgsIDIpICsgTWF0aC5wb3coZHksIDIpKTtcclxuICAgICAgICByZXR1cm4gZGlzdGFuY2U7XHJcbiAgICB9XHJcblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgaWYoZXZlbnQua2V5Q29kZSA9PT0gODEpIHtcclxuICAgICAgICAgICAgZ2FtZVJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYoZXZlbnQua2V5Q29kZSA9PSAzNyB8fCBldmVudC5rZXlDb2RlID09IDM5IHx8IGV2ZW50LmtleUNvZGUgPT0gMzggfHwgZXZlbnQua2V5Q29kZSA9PSA0MCkgeyAvL0xFRlRcclxuICAgICAgICAgICAgdmFyIHZhbGlkVXBkYXRlID0gdmFsaWREaXJlY3Rpb25DaGFuZ2UoZXZlbnQua2V5Q29kZSwgc25ha2UuY3VycmVudERpcmVjdGlvbikgJiYgaW5zaWRlV29ybGRCb3VuZHMoZXZlbnQua2V5Q29kZSwgc25ha2UuaGVhZCk7XHJcbiAgICAgICAgICAgIGlmKHZhbGlkVXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVTbmFrZUZyb21EaXJlY3Rpb24oc25ha2UsIGV2ZW50LmtleUNvZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmKGV2ZW50LmtleUNvZGUgPT09IDMyKSB7XHJcbiAgICAgICAgICAgIHNlYXJjaCgpO1xyXG4gICAgICAgICAgICBmaW5kUm91dGUoKTtcclxuICAgICAgICAgICAgdXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbi8qXHJcbiAgICAgICAgICAgICAgICAgKF8pICAgICAgXHJcbiAgXyBfXyBfX18gICBfXyBfIF8gXyBfXyAgXHJcbiB8ICdfIGAgXyBcXCAvIF9gIHwgfCAnXyBcXCBcclxuIHwgfCB8IHwgfCB8IChffCB8IHwgfCB8IHxcclxuIHxffCB8X3wgfF98XFxfXyxffF98X3wgfF98XHJcbiovXHJcbiAgICB2YXIgY2FudmFzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpO1xyXG4gICAgY2FudmFzRWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMTU4LCAxNjcsIDE4NCwgMC4yKSc7XHJcbiAgICBjYW52YXNFbC53aWR0aCA9IGNhbnZhc1dpZHRoO1xyXG4gICAgY2FudmFzRWwuaGVpZ2h0ID0gY2FudmFzSGVpZ2h0O1xyXG4gICAgdmFyIGN0eCA9IGNhbnZhc0VsLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICB2YXIgZyA9IEdhbWVPYmplY3RzO1xyXG4gICAgdmFyIHNuYWtlID0gbmV3IFNuYWtlKHtcclxuICAgICAgICB4OiBjYW52YXNXaWR0aC8yLFxyXG4gICAgICAgIHk6IGNhbnZhc0hlaWdodC8yLFxyXG4gICAgICAgIGN0eDogY3R4XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgZ3JpZCA9IG5ldyBHcmlkKGN0eCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCwgU2VnbWVudC5TRUdNRU5UX1NJWkUpO1xyXG4gICAgZ3JpZC5kcmF3KCk7XHJcbiAgICB2YXIgZm9vZCA9IG5ldyBGb29kKGN0eCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XHJcblxyXG4gICAgdmFyIGxhc3RGcmFtZVRpbWVNcyA9IDAgLy8gVGhlIGxhc3QgdGltZSB0aGUgbG9vcCB3YXMgcnVuXHJcbiAgICB2YXIgbWF4RlBTID0gMzE7IC8vIFRoZSBtYXhpbXVtIEZQUyB3ZSB3YW50IHRvIGFsbG93XHJcbiAgICBzbmFrZS5jdXJyZW50RGlyZWN0aW9uID0gJ0VBU1QnO1xyXG4gICAgc25ha2UuZHJhd0FsbCgpO1xyXG4gICAgdmFyIGN1cnJlbnRTY29yZSA9IC0xO1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVTY29yZSh2YWx1ZSkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NvcmVcIikudGV4dENvbnRlbnQgPSBcIlNDT1JFOiBcIiArICsrY3VycmVudFNjb3JlO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVNjb3JlKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzZXRHYW1lKHNuYWtlKSB7XHJcbiAgICAgICAgc25ha2UuY2xlYXJBbGwoKTtcclxuICAgICAgICBzbmFrZS5yZXNldCgpO1xyXG4gICAgICAgIGZvb2QuY2xlYXIoKTtcclxuICAgICAgICBmb29kLnNldE5ld1Bvc2l0aW9uKCk7XHJcbiAgICAgICAgY3VycmVudFNjb3JlID0gLTE7XHJcbiAgICAgICAgdXBkYXRlU2NvcmUoKTsgICAgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcclxuICAgICAgICB2YXIga2V5Q29kZSA9IHJldmVyc2VEaXJLZXlMb29rdXBbc25ha2UuY3VycmVudERpcmVjdGlvbl07XHJcbiAgICAgICAgdmFyIGluc2lkZVdvcmxkID0gaW5zaWRlV29ybGRCb3VuZHMoa2V5Q29kZSwgc25ha2UuaGVhZCk7XHJcbiAgICAgICAgaWYoaW5zaWRlV29ybGQpIHtcclxuICAgICAgICAgICAgdmFyIGNoZWNrID0gY2hlY2tDb2xsaXNpb25zKHNuYWtlKTtcclxuICAgICAgICAgICAgaWYoY2hlY2spIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVNuYWtlRnJvbURpcmVjdGlvbihzbmFrZSwga2V5Q29kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2hlY2tDb2xsaXNpb25zKHNuYWtlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXNldEdhbWUoc25ha2UpOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkcmF3KCkge1xyXG4gICAgICAgIGZvb2QuZHJhdygpO1xyXG4gICAgICAgIHNuYWtlLmRyYXdBbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnYW1lTG9vcCh0aW1lU3RhbXApIHtcclxuICAgICAgICAgaWYoZ2FtZVJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgaWYodGltZVN0YW1wIDwgbGFzdEZyYW1lVGltZU1zICsgKDEwMDAgLyBtYXhGUFMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZ2FtZUxvb3ApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxhc3RGcmFtZVRpbWVNcyA9IHRpbWVTdGFtcDtcclxuICAgICAgICAgICAgLy91cGRhdGUoKTtcclxuICAgICAgICAgICAgZHJhdygpO1xyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZ2FtZUxvb3ApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShnYW1lTG9vcCk7XHJcbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 1 */
/***/ function(module, exports) {

	eval("function Segment(options) {\n    var me = this;\n\n    me.width = Segment.SEGMENT_SIZE;\n    me.height = Segment.SEGMENT_SIZE;\n    me.colour = options.colour || \"black\";\n    me.next = options.next || null;\n    me.prev = options.prev || null;\n    me.x = options.x;\n    me.y = options.y;\n    me.d = 0;\n    me.dPlusL2 = 0;\n    me.ctx = options.ctx;\n}\n\nSegment.prototype.updatePos = function updatePos(x, y) {\n    this.x = x;\n    this.y = y;\n};\n\nSegment.prototype.draw = function draw() {\n    var me = this;\n    me.ctx.fillStyle = me.colour;\n    me.ctx.fillRect(me.x, me.y, me.width, me.height);\n};\n\nSegment.prototype.drawTarget = function drawTarget() {\n    var me = this;\n    me.ctx.fillStyle = \"pink\";\n    me.ctx.fillRect(me.x, me.y, me.width, me.height);\n};\n\nSegment.prototype.clear = function clear() {\n    var me = this;\n    me.ctx.clearRect(me.x, me.y, me.width, me.height);\n    me.ctx.strokeStyle = \"grey\";\n    me.ctx.strokeRect(me.x, me.y, me.width, me.height);\n};\n\nSegment.prototype.equal = function (otherSegment) {\n    var me = this;\n    if (me.x == otherSegment.x && me.y == otherSegment.y) {\n        return true;\n    } else {\n        return false;\n    }\n};\n\nSegment.SEGMENT_SIZE = 20;\n\nfunction Snake(options) {\n    var me = this;\n    me.x = options.x || 0;\n    me.y = options.y || 0;\n\n    me.ctx = options.ctx;\n    me.currentDirection = 'EAST';\n\n    me.reset();\n}\n\nSnake.prototype.reset = function reset() {\n    var me = this;\n\n    me.head = null;\n    me.tail = null;\n\n    var tail = new Segment({\n        x: me.x,\n        y: me.y,\n        ctx: me.ctx\n    });\n    var body = new Segment({\n        x: tail.x + Segment.SEGMENT_SIZE,\n        y: tail.y,\n        ctx: me.ctx\n    });\n    var head = new Segment({\n        x: body.x + Segment.SEGMENT_SIZE,\n        y: body.y,\n        colour: 'red',\n        ctx: me.ctx\n    });\n\n    tail.next = body;\n    body.next = head;\n    head.next = null;\n\n    me.head = head;\n    me.tail = tail;\n\n    me.updateTailByDirection = {\n        NORTH: {\n            y: Segment.SEGMENT_SIZE,\n            x: 0\n        },\n        SOUTH: {\n            y: -1 * Segment.SEGMENT_SIZE,\n            x: 0\n        },\n        EAST: {\n            y: 0,\n            x: -1 * Segment.SEGMENT_SIZE\n        },\n        WEST: {\n            y: 0,\n            x: Segment.SEGMENT_SIZE\n        }\n    };\n};\n\nSnake.prototype.drawAll = function drawAll() {\n    var me = this;\n    var segment = me.tail;\n    segment.draw();\n    while (segment.next) {\n        segment = segment.next;\n        segment.draw();\n    }\n};\n\nSnake.prototype.clearAll = function clearAll() {\n    var me = this;\n    var segment = me.tail;\n    segment.clear();\n    while (segment.next) {\n        segment = segment.next;\n        segment.clear();\n    }\n};\n\nSnake.prototype.grow = function grow() {\n    var me = this;\n    var directionUpdate = me.updateTailByDirection[me.currentDirection];\n\n    var newTail = new Segment({\n        x: me.tail.x + directionUpdate.x,\n        y: me.tail.y + directionUpdate.y,\n        ctx: me.ctx\n    });\n    newTail.next = me.tail;\n    me.tail = newTail;\n};\n\nfunction Food(ctx, canvasWidth, canvasHeight) {\n    var me = this;\n    me.allFoodPositionsLookup = [];\n    var i, j;\n    for (i = 0; i < canvasWidth; i += Segment.SEGMENT_SIZE) {\n        for (j = 0; j < canvasHeight; j += Segment.SEGMENT_SIZE) {\n            me.allFoodPositionsLookup.push({ x: i, y: j });\n        }\n    }\n    var startPosition = me.getRandXY();\n    me.item = new Segment({\n        ctx: ctx,\n        x: startPosition.x,\n        y: startPosition.y,\n        colour: 'green'\n    });\n}\n\nFood.prototype.getRandXY = function getRandXY() {\n    function getRandomInt(min, max) {\n        return Math.floor(Math.random() * (max - min + 1)) + min;\n    }\n    var me = this;\n    var min = 0;\n    var max = me.allFoodPositionsLookup.length;\n\n    return me.allFoodPositionsLookup[getRandomInt(min, max)];\n};\n\nFood.prototype.setNewPosition = function setNewPosition() {\n    var me = this;\n    var pos = me.getRandXY();\n    me.item.colour = \"green\";\n    me.item.x = pos.x;\n    me.item.y = pos.y;\n};\n\nFood.prototype.draw = function draw() {\n    this.item.draw();\n};\n\nFood.prototype.clear = function clear() {\n    this.item.clear();\n};\n\nfunction Grid(ctx, width, height, cellSize) {\n    var me = this;\n    me.cells = [];\n    me.ctx = ctx;\n    me.width = width;\n    me.height = height;\n    me.cellSize = cellSize;\n\n    var x, y;\n    for (x = 0; x < width; x += cellSize) {\n        for (y = 0; y < height; y += cellSize) {\n            var index = x / cellSize;\n            var newCell = new Segment({\n                x: x,\n                y: y,\n                width: Segment.SEGMENT_SIZE,\n                height: Segment.SEGMENT_SIZE,\n                ctx: ctx\n            });\n            if (!me.cells[index]) {\n                me.cells[index] = [newCell];\n            } else {\n                me.cells[index].push(newCell);\n            }\n        }\n    }\n}\n\nGrid.prototype.draw = function draw() {\n    var me = this;\n    for (x = 0; x < me.width; x += me.cellSize) {\n        for (y = 0; y < me.height; y += me.cellSize) {\n            var cell = me.cells[x / me.cellSize][y / me.cellSize];\n            me.ctx.strokeStyle = \"grey\";\n            me.ctx.strokeRect(cell.x, cell.y, cell.width, cell.height);\n        }\n    }\n};\n\nmodule.exports = {\n    Food: Food,\n    Snake: Snake,\n    Segment: Segment,\n    Grid: Grid\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zY3JpcHRzL3NuYWtlLmpzP2FlZTMiXSwibmFtZXMiOlsiU2VnbWVudCIsIm9wdGlvbnMiLCJtZSIsIndpZHRoIiwiU0VHTUVOVF9TSVpFIiwiaGVpZ2h0IiwiY29sb3VyIiwibmV4dCIsInByZXYiLCJ4IiwieSIsImQiLCJkUGx1c0wyIiwiY3R4IiwicHJvdG90eXBlIiwidXBkYXRlUG9zIiwiZHJhdyIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiZHJhd1RhcmdldCIsImNsZWFyIiwiY2xlYXJSZWN0Iiwic3Ryb2tlU3R5bGUiLCJzdHJva2VSZWN0IiwiZXF1YWwiLCJvdGhlclNlZ21lbnQiLCJTbmFrZSIsImN1cnJlbnREaXJlY3Rpb24iLCJyZXNldCIsImhlYWQiLCJ0YWlsIiwiYm9keSIsInVwZGF0ZVRhaWxCeURpcmVjdGlvbiIsIk5PUlRIIiwiU09VVEgiLCJFQVNUIiwiV0VTVCIsImRyYXdBbGwiLCJzZWdtZW50IiwiY2xlYXJBbGwiLCJncm93IiwiZGlyZWN0aW9uVXBkYXRlIiwibmV3VGFpbCIsIkZvb2QiLCJjYW52YXNXaWR0aCIsImNhbnZhc0hlaWdodCIsImFsbEZvb2RQb3NpdGlvbnNMb29rdXAiLCJpIiwiaiIsInB1c2giLCJzdGFydFBvc2l0aW9uIiwiZ2V0UmFuZFhZIiwiaXRlbSIsImdldFJhbmRvbUludCIsIm1pbiIsIm1heCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImxlbmd0aCIsInNldE5ld1Bvc2l0aW9uIiwicG9zIiwiR3JpZCIsImNlbGxTaXplIiwiY2VsbHMiLCJpbmRleCIsIm5ld0NlbGwiLCJjZWxsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsU0FBU0EsT0FBVCxDQUFpQkMsT0FBakIsRUFBMEI7QUFDdEIsUUFBSUMsS0FBSyxJQUFUOztBQUVBQSxPQUFHQyxLQUFILEdBQVdILFFBQVFJLFlBQW5CO0FBQ0FGLE9BQUdHLE1BQUgsR0FBWUwsUUFBUUksWUFBcEI7QUFD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QUFPQSxLQUZNO0FBR2IxQixhQUFTQSxPQUhJO0FBSWI4RCxVQUFNQTtBQUpPLENBQWpCIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBTZWdtZW50KG9wdGlvbnMpIHtcclxuICAgIHZhciBtZSA9IHRoaXM7XHJcblxyXG4gICAgbWUud2lkdGggPSBTZWdtZW50LlNFR01FTlRfU0laRTtcclxuICAgIG1lLmhlaWdodCA9IFNlZ21lbnQuU0VHTUVOVF9TSVpFO1xyXG4gICAgbWUuY29sb3VyID0gb3B0aW9ucy5jb2xvdXIgfHwgXCJibGFja1wiO1xyXG4gICAgbWUubmV4dCA9IG9wdGlvbnMubmV4dCB8fCBudWxsO1xyXG4gICAgbWUucHJldiA9IG9wdGlvbnMucHJldiB8fCBudWxsO1xyXG4gICAgbWUueCA9IG9wdGlvbnMueDtcclxuICAgIG1lLnkgPSBvcHRpb25zLnk7XHJcbiAgICBtZS5kID0gMDtcclxuICAgIG1lLmRQbHVzTDIgPSAwO1xyXG4gICAgbWUuY3R4ID0gb3B0aW9ucy5jdHg7XHJcbn1cclxuXHJcblNlZ21lbnQucHJvdG90eXBlLnVwZGF0ZVBvcyA9IGZ1bmN0aW9uIHVwZGF0ZVBvcyh4LCB5KSB7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxufTsgIFxyXG5cclxuU2VnbWVudC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uIGRyYXcoKSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgbWUuY3R4LmZpbGxTdHlsZSA9IG1lLmNvbG91cjtcclxuICAgIG1lLmN0eC5maWxsUmVjdChtZS54LCBtZS55LCBtZS53aWR0aCwgbWUuaGVpZ2h0KTtcclxufTtcclxuXHJcblNlZ21lbnQucHJvdG90eXBlLmRyYXdUYXJnZXQgPSBmdW5jdGlvbiBkcmF3VGFyZ2V0KCkge1xyXG4gICAgdmFyIG1lID0gdGhpcztcclxuICAgIG1lLmN0eC5maWxsU3R5bGUgPSBcInBpbmtcIjtcclxuICAgIG1lLmN0eC5maWxsUmVjdChtZS54LCBtZS55LCBtZS53aWR0aCwgbWUuaGVpZ2h0KTtcclxufTtcclxuXHJcblNlZ21lbnQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgbWUuY3R4LmNsZWFyUmVjdChtZS54LCBtZS55LCBtZS53aWR0aCwgbWUuaGVpZ2h0KTtcclxuICAgIG1lLmN0eC5zdHJva2VTdHlsZT1cImdyZXlcIjtcclxuICAgIG1lLmN0eC5zdHJva2VSZWN0KG1lLngsIG1lLnksIG1lLndpZHRoLCBtZS5oZWlnaHQpO1xyXG59O1xyXG5cclxuU2VnbWVudC5wcm90b3R5cGUuZXF1YWwgPSBmdW5jdGlvbihvdGhlclNlZ21lbnQpIHtcclxuICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICBpZihtZS54ID09IG90aGVyU2VnbWVudC54ICYmIG1lLnkgPT0gb3RoZXJTZWdtZW50LnkpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59O1xyXG5cclxuU2VnbWVudC5TRUdNRU5UX1NJWkUgPSAyMDtcclxuXHJcbmZ1bmN0aW9uIFNuYWtlKG9wdGlvbnMpIHtcclxuICAgIHZhciBtZSA9IHRoaXM7ICAgXHJcbiAgICBtZS54ID0gb3B0aW9ucy54IHx8IDA7XHJcbiAgICBtZS55ID0gb3B0aW9ucy55IHx8IDA7XHJcblxyXG4gICAgbWUuY3R4ID0gb3B0aW9ucy5jdHg7XHJcbiAgICBtZS5jdXJyZW50RGlyZWN0aW9uID0gJ0VBU1QnO1xyXG5cclxuICAgIG1lLnJlc2V0KCk7XHJcbn1cclxuXHJcblNuYWtlLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xyXG4gICAgdmFyIG1lID0gdGhpcztcclxuICAgIFxyXG4gICAgbWUuaGVhZCA9IG51bGw7XHJcbiAgICBtZS50YWlsID0gbnVsbDtcclxuXHJcbiAgICB2YXIgdGFpbCA9IG5ldyBTZWdtZW50KHtcclxuICAgICAgICB4OiBtZS54LFxyXG4gICAgICAgIHk6IG1lLnksXHJcbiAgICAgICAgY3R4OiBtZS5jdHhcclxuICAgIH0pO1xyXG4gICAgdmFyIGJvZHkgPSBuZXcgU2VnbWVudCh7XHJcbiAgICAgICAgeDogdGFpbC54ICsgU2VnbWVudC5TRUdNRU5UX1NJWkUsXHJcbiAgICAgICAgeTogdGFpbC55LFxyXG4gICAgICAgIGN0eDogbWUuY3R4XHJcbiAgICB9KTtcclxuICAgIHZhciBoZWFkID0gbmV3IFNlZ21lbnQoe1xyXG4gICAgICAgIHg6IGJvZHkueCArIFNlZ21lbnQuU0VHTUVOVF9TSVpFLFxyXG4gICAgICAgIHk6IGJvZHkueSxcclxuICAgICAgICBjb2xvdXI6ICdyZWQnLFxyXG4gICAgICAgIGN0eDogbWUuY3R4XHJcbiAgICB9KTtcclxuXHJcbiAgICB0YWlsLm5leHQgPSBib2R5O1xyXG4gICAgYm9keS5uZXh0ID0gaGVhZDtcclxuICAgIGhlYWQubmV4dCA9IG51bGw7XHJcblxyXG4gICAgbWUuaGVhZCA9IGhlYWQ7XHJcbiAgICBtZS50YWlsID0gdGFpbDtcclxuXHJcbiAgICBtZS51cGRhdGVUYWlsQnlEaXJlY3Rpb24gPSB7XHJcbiAgICAgICAgTk9SVEg6IHtcclxuICAgICAgICAgICAgeTogU2VnbWVudC5TRUdNRU5UX1NJWkUsXHJcbiAgICAgICAgICAgIHg6IDBcclxuICAgICAgICB9LFxyXG4gICAgICAgIFNPVVRIOiB7XHJcbiAgICAgICAgICAgIHk6IC0xICogU2VnbWVudC5TRUdNRU5UX1NJWkUsXHJcbiAgICAgICAgICAgIHg6IDBcclxuICAgICAgICB9LFxyXG4gICAgICAgIEVBU1Q6IHtcclxuICAgICAgICAgICAgeTogMCxcclxuICAgICAgICAgICAgeDogLTEgKiBTZWdtZW50LlNFR01FTlRfU0laRVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgV0VTVDoge1xyXG4gICAgICAgICAgICB5OiAwLFxyXG4gICAgICAgICAgICB4OiBTZWdtZW50LlNFR01FTlRfU0laRVxyXG4gICAgICAgIH0sICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICB9O1xyXG5cclxufTtcclxuXHJcblNuYWtlLnByb3RvdHlwZS5kcmF3QWxsID0gZnVuY3Rpb24gZHJhd0FsbCgpIHtcclxuICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICB2YXIgc2VnbWVudCA9IG1lLnRhaWw7XHJcbiAgICBzZWdtZW50LmRyYXcoKTtcclxuICAgIHdoaWxlKHNlZ21lbnQubmV4dCkge1xyXG4gICAgICAgIHNlZ21lbnQgPSBzZWdtZW50Lm5leHQ7XHJcbiAgICAgICAgc2VnbWVudC5kcmF3KCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5TbmFrZS5wcm90b3R5cGUuY2xlYXJBbGwgPSBmdW5jdGlvbiBjbGVhckFsbCgpIHtcclxuICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICB2YXIgc2VnbWVudCA9IG1lLnRhaWw7XHJcbiAgICBzZWdtZW50LmNsZWFyKCk7XHJcbiAgICB3aGlsZShzZWdtZW50Lm5leHQpIHtcclxuICAgICAgICBzZWdtZW50ID0gc2VnbWVudC5uZXh0O1xyXG4gICAgICAgIHNlZ21lbnQuY2xlYXIoKTtcclxuICAgIH1cclxufTtcclxuXHJcblNuYWtlLnByb3RvdHlwZS5ncm93ID0gZnVuY3Rpb24gZ3JvdygpIHtcclxuICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICB2YXIgZGlyZWN0aW9uVXBkYXRlID0gbWUudXBkYXRlVGFpbEJ5RGlyZWN0aW9uW21lLmN1cnJlbnREaXJlY3Rpb25dO1xyXG5cclxuICAgIHZhciBuZXdUYWlsID0gbmV3IFNlZ21lbnQoe1xyXG4gICAgICAgIHg6IG1lLnRhaWwueCArIGRpcmVjdGlvblVwZGF0ZS54LFxyXG4gICAgICAgIHk6IG1lLnRhaWwueSArIGRpcmVjdGlvblVwZGF0ZS55LFxyXG4gICAgICAgIGN0eDogbWUuY3R4XHJcbiAgICB9KTtcclxuICAgIG5ld1RhaWwubmV4dCA9IG1lLnRhaWw7XHJcbiAgICBtZS50YWlsID0gbmV3VGFpbDtcclxufTtcclxuXHJcbmZ1bmN0aW9uIEZvb2QoY3R4LCBjYW52YXNXaWR0aCwgY2FudmFzSGVpZ2h0KSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgbWUuYWxsRm9vZFBvc2l0aW9uc0xvb2t1cCA9IFtdO1xyXG4gICAgdmFyIGksajtcclxuICAgIGZvcihpID0gMCA7IGkgPCBjYW52YXNXaWR0aCA7IGkgKz0gU2VnbWVudC5TRUdNRU5UX1NJWkUpIHtcclxuICAgICAgICBmb3IoaiA9IDA7IGogPCBjYW52YXNIZWlnaHQgOyBqICs9IFNlZ21lbnQuU0VHTUVOVF9TSVpFKSB7XHJcbiAgICAgICAgICAgIG1lLmFsbEZvb2RQb3NpdGlvbnNMb29rdXAucHVzaCh7IHg6IGksIHk6IGogfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFyIHN0YXJ0UG9zaXRpb24gPSBtZS5nZXRSYW5kWFkoKTtcclxuICAgIG1lLml0ZW0gPSBuZXcgU2VnbWVudCh7XHJcbiAgICAgICAgY3R4OiBjdHgsXHJcbiAgICAgICAgeDogc3RhcnRQb3NpdGlvbi54LFxyXG4gICAgICAgIHk6IHN0YXJ0UG9zaXRpb24ueSxcclxuICAgICAgICBjb2xvdXI6ICdncmVlbidcclxuICAgIH0pO1xyXG59XHJcblxyXG5Gb29kLnByb3RvdHlwZS5nZXRSYW5kWFkgPSBmdW5jdGlvbiBnZXRSYW5kWFkoKSB7XHJcbiAgICBmdW5jdGlvbiBnZXRSYW5kb21JbnQobWluLCBtYXgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XHJcbiAgICB9XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgdmFyIG1pbiA9IDA7XHJcbiAgICB2YXIgbWF4ID0gbWUuYWxsRm9vZFBvc2l0aW9uc0xvb2t1cC5sZW5ndGg7XHJcbiAgICBcclxuICAgIHJldHVybiBtZS5hbGxGb29kUG9zaXRpb25zTG9va3VwW2dldFJhbmRvbUludChtaW4sIG1heCldO1xyXG59O1xyXG5cclxuRm9vZC5wcm90b3R5cGUuc2V0TmV3UG9zaXRpb24gPSBmdW5jdGlvbiBzZXROZXdQb3NpdGlvbigpIHtcclxuICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICB2YXIgcG9zID0gbWUuZ2V0UmFuZFhZKCk7XHJcbiAgICBtZS5pdGVtLmNvbG91ciA9IFwiZ3JlZW5cIjtcclxuICAgIG1lLml0ZW0ueCA9IHBvcy54O1xyXG4gICAgbWUuaXRlbS55ID0gcG9zLnk7ICAgXHJcbn07XHJcblxyXG5Gb29kLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gZHJhdygpIHtcclxuICAgIHRoaXMuaXRlbS5kcmF3KCk7XHJcbn1cclxuXHJcbkZvb2QucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gY2xlYXIoKSB7XHJcbiAgICB0aGlzLml0ZW0uY2xlYXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gR3JpZChjdHgsIHdpZHRoLCBoZWlnaHQsIGNlbGxTaXplKSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgbWUuY2VsbHMgPSBbXTtcclxuICAgIG1lLmN0eCA9IGN0eDtcclxuICAgIG1lLndpZHRoID0gd2lkdGg7XHJcbiAgICBtZS5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICBtZS5jZWxsU2l6ZSA9IGNlbGxTaXplO1xyXG5cclxuICAgIHZhciB4LHk7XHJcbiAgICBmb3IoeCA9IDA7IHggPCB3aWR0aCA7IHggKz0gY2VsbFNpemUpIHtcclxuICAgICAgICBmb3IoeSA9IDAgOyB5IDwgaGVpZ2h0OyB5ICs9IGNlbGxTaXplKSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleCA9IHgvY2VsbFNpemU7XHJcbiAgICAgICAgICAgIHZhciBuZXdDZWxsID0gbmV3IFNlZ21lbnQoe1xyXG4gICAgICAgICAgICAgICAgeDogeCxcclxuICAgICAgICAgICAgICAgIHk6IHksXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogU2VnbWVudC5TRUdNRU5UX1NJWkUsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IFNlZ21lbnQuU0VHTUVOVF9TSVpFLFxyXG4gICAgICAgICAgICAgICAgY3R4OiBjdHhcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmKCFtZS5jZWxsc1tpbmRleF0pIHtcclxuICAgICAgICAgICAgICAgIG1lLmNlbGxzW2luZGV4XSA9IFtuZXdDZWxsXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1lLmNlbGxzW2luZGV4XS5wdXNoKG5ld0NlbGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5HcmlkLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gZHJhdygpIHtcclxuICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICBmb3IoeCA9IDA7IHggPCBtZS53aWR0aCA7IHggKz0gbWUuY2VsbFNpemUpIHtcclxuICAgICAgICBmb3IoeSA9IDAgOyB5IDwgbWUuaGVpZ2h0OyB5ICs9IG1lLmNlbGxTaXplKSB7XHJcbiAgICAgICAgICAgIHZhciBjZWxsID0gbWUuY2VsbHNbeC9tZS5jZWxsU2l6ZV1beS9tZS5jZWxsU2l6ZV07XHJcbiAgICAgICAgICAgIG1lLmN0eC5zdHJva2VTdHlsZT1cImdyZXlcIjtcclxuICAgICAgICAgICAgbWUuY3R4LnN0cm9rZVJlY3QoY2VsbC54LCBjZWxsLnksIGNlbGwud2lkdGgsIGNlbGwuaGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9ICAgIFxyXG4gICAgXHJcbn1cclxuICAgIFxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBGb29kOiBGb29kLFxyXG4gICAgU25ha2U6IFNuYWtlLFxyXG4gICAgU2VnbWVudDogU2VnbWVudCxcclxuICAgIEdyaWQ6IEdyaWQsXHJcbn07XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NjcmlwdHMvc25ha2UuanMiXSwic291cmNlUm9vdCI6IiJ9");

/***/ }
/******/ ]);