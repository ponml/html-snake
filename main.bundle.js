/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	eval("var GameObjects = __webpack_require__(1);\nvar Snake = GameObjects.Snake;\nvar Segment = GameObjects.Segment;\nvar Food = GameObjects.Food;\nvar Grid = GameObjects.Grid;\n\nwindow.onload = function () {\n    const canvasWidth = 1520;\n    const canvasHeight = 920;\n\n    var FPS = 60;\n    var gameLoop;\n    var gameRunning = true;\n\n    var dirKeyLookup = {\n        37: 'WEST',\n        38: 'NORTH',\n        39: 'EAST',\n        40: 'SOUTH'\n    };\n\n    var reverseDirKeyLookup = {\n        WEST: 37,\n        NORTH: 38,\n        EAST: 39,\n        SOUTH: 40\n    };\n\n    var unallowedDirLookup = {\n        'WEST': 39,\n        'NORTH': 40,\n        'EAST': 37,\n        'SOUTH': 38\n    };\n\n    var updateHeadByDirection = {\n        NORTH: {\n            y: -1 * Segment.SEGMENT_SIZE,\n            x: 0\n        },\n        SOUTH: {\n            y: Segment.SEGMENT_SIZE,\n            x: 0\n        },\n        EAST: {\n            y: 0,\n            x: Segment.SEGMENT_SIZE\n        },\n        WEST: {\n            y: 0,\n            x: -1 * Segment.SEGMENT_SIZE\n        }\n    };\n\n    var fringeSet = [];\n    var closedSet = [];\n\n    function validDirectionChange(keyCode, currentDirection) {\n        var direction = dirKeyLookup[keyCode];\n        if (currentDirection === direction) {\n            return false;\n        }\n        var unallowed = unallowedDirLookup[currentDirection];\n        return keyCode != unallowed;\n    }\n\n    function insideWorldBounds(keyCode, head) {\n        var direction = dirKeyLookup[keyCode];\n        var directionUpdate = updateHeadByDirection[direction];\n        var newX = head.x + directionUpdate.x;\n        var newY = head.y + directionUpdate.y;\n        return newX <= canvasWidth && newX >= 0 && newY <= canvasHeight && newY >= 0;\n    }\n\n    function updateSnakeFromDirection(snake, keycode) {\n        snake.head.colour = 'black';\n        snake.head.draw();\n        var curHeadX = snake.head.x;\n        var curHeadY = snake.head.y;\n        snake.tail.clear();\n        var newTail = snake.tail.next;\n        var newHead = snake.tail;\n        newHead.next = null;\n        snake.head.next = newHead;\n        snake.head = newHead;\n        snake.tail = newTail;\n        var direction = dirKeyLookup[keycode];\n        var dirctionUpdate = updateHeadByDirection[direction];\n        snake.head.x = curHeadX + dirctionUpdate.x;\n        snake.head.y = curHeadY + dirctionUpdate.y;\n        snake.head.colour = 'red';\n        snake.head.draw();\n        snake.currentDirection = direction;\n    }\n\n    function checkCollisions(snake) {\n        if (snake.head.equal(food.item)) {\n            snake.grow();\n            food.setNewPosition();\n            updateScore();\n            return true;\n        }\n\n        if (snake.head.equal(snake.tail)) {\n            resetGame(snake);\n            return false;\n        }\n\n        var current = snake.tail;\n        while (current != snake.head) {\n            if (snake.head.equal(current)) {\n                resetGame(snake);\n                return false;\n            }\n            current = current.next;\n        }\n        return true;\n    }\n\n    function search() {\n        fringeSet.forEach(function (node) {\n            node.clear();\n        });\n\n        closedSet.forEach(function (node) {\n            node.colour = \"yellow\";\n            node.clear();\n        });\n        fringeSet = [];\n        closedSet = [];\n        fringeSet.push(snake.head);\n    }\n\n    function addChildrenToFringeSet(parentNode) {\n\n        var northCoords = {\n            x: parentNode.x / Segment.SEGMENT_SIZE,\n            y: (parentNode.y - Segment.SEGMENT_SIZE) / Segment.SEGMENT_SIZE\n        };\n        var southCoords = {\n            x: parentNode.x / Segment.SEGMENT_SIZE,\n            y: (parentNode.y + Segment.SEGMENT_SIZE) / Segment.SEGMENT_SIZE\n        };\n        var westCoords = {\n            x: (parentNode.x - Segment.SEGMENT_SIZE) / Segment.SEGMENT_SIZE,\n            y: parentNode.y / Segment.SEGMENT_SIZE\n        };\n        var eastCoords = {\n            x: (parentNode.x + Segment.SEGMENT_SIZE) / Segment.SEGMENT_SIZE,\n            y: parentNode.y / Segment.SEGMENT_SIZE\n        };\n        var children = [];\n        if (northCoords.y >= 0) {\n            children.push(grid.cells[northCoords.x][northCoords.y]);\n        }\n        if (southCoords.y <= canvasHeight) {\n            children.push(grid.cells[southCoords.x][southCoords.y]);\n        }\n        if (westCoords.x >= 0) {\n            children.push(grid.cells[westCoords.x][westCoords.y]);\n        }\n        if (eastCoords.y <= canvasWidth) {\n            children.push(grid.cells[eastCoords.x][eastCoords.y]);\n        }\n\n        children.forEach(function (child) {\n\n            var found = null;\n            var childIsInClosed = closedSet.some(function (item) {\n                return item.equal(child);\n            });\n            if (!childIsInClosed) {\n                child.d = parentNode.d + distanceFromNodeToNode(parentNode, child);\n                var L2 = distanceFromNodeToNode(child, food.item);\n                child.dPlusL2 = child.d + L2;\n                child.parent = parentNode;\n            }\n            fringeSet.push(child);\n        });\n\n        fringeSet.sort(function (a, b) {\n            return a.dPlusL2 > b.dPlusL2 ? 1 : -1;\n        });\n    }\n\n    //http://mnemstudio.org/path-finding-a-star.htm\n    function findRoute() {\n        // fringeSet.forEach(function(node) {\n        //     node.colour = \"orange\";\n        //     node.draw();\n        // });\n\n        // closedSet.forEach(function(node) {\n        //     node.colour = \"yellow\";\n        //     node.draw();\n        // });\n\n\n        if (fringeSet.length === 0) {\n            return 0;\n        } else {\n            var node = fringeSet.shift();\n            if (node.equal(food.item)) {\n                console.log(\"found\");\n                return node;\n            } else {\n                var found = null;\n                var nodeIsInClosed = closedSet.some(function (item) {\n                    return item.equal(node);\n                });\n                if (!nodeIsInClosed) {\n                    closedSet.push(node);\n                    addChildrenToFringeSet(node);\n                }\n                return findRoute();\n            }\n        }\n    }\n\n    function distanceFromNodeToNode(node1, node2) {\n        var node1X = node1.x;\n        var node1Y = node1.y;\n\n        var node2X = node2.x;\n        var node2Y = node2.y;\n\n        var dx = node2X - node1X;\n        var dy = node2Y - node1Y;\n        var distance = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n        return distance;\n    }\n\n    document.addEventListener('keydown', function (event) {\n        if (event.keyCode === 81) {\n            gameRunning = false;\n        } else if (event.keyCode == 37 || event.keyCode == 39 || event.keyCode == 38 || event.keyCode == 40) {\n            //LEFT\n            var validUpdate = validDirectionChange(event.keyCode, snake.currentDirection) && insideWorldBounds(event.keyCode, snake.head);\n            if (validUpdate) {\n                updateSnakeFromDirection(snake, event.keyCode);\n            }\n        } else if (event.keyCode === 32) {\n            search();\n            var node = findRoute();\n            if (node.equal(food.item)) {\n                food.item.colour = \"pink\";\n                fringeSet.forEach(function (node) {\n                    node.colour = \"orange\";\n                    node.draw();\n                });\n\n                closedSet.forEach(function (node) {\n                    node.colour = \"yellow\";\n                    node.draw();\n                });\n                var curNode = node.parent;\n                var counter = 0;\n                while (curNode && counter < 100) {\n                    curNode.draw(\"blue\");\n                    curNode = curNode.parent;\n                    counter++;\n                }\n            }\n            update();\n        }\n    });\n\n    /*\r\n                     (_)      \r\n      _ __ ___   __ _ _ _ __  \r\n     | '_ ` _ \\ / _` | | '_ \\ \r\n     | | | | | | (_| | | | | |\r\n     |_| |_| |_|\\__,_|_|_| |_|\r\n    */\n    var canvasEl = document.getElementById('main');\n    canvasEl.style.backgroundColor = 'rgba(158, 167, 184, 0.2)';\n    canvasEl.width = canvasWidth;\n    canvasEl.height = canvasHeight;\n    var ctx = canvasEl.getContext('2d');\n    var g = GameObjects;\n    var snake = new Snake({\n        x: canvasWidth / 2,\n        y: canvasHeight / 2,\n        ctx: ctx\n    });\n\n    var grid = new Grid(ctx, canvasWidth, canvasHeight, Segment.SEGMENT_SIZE);\n    grid.draw();\n    var food = new Food(ctx, canvasWidth, canvasHeight);\n\n    var lastFrameTimeMs = 0; // The last time the loop was run\n    var maxFPS = 31; // The maximum FPS we want to allow\n    snake.currentDirection = 'EAST';\n    snake.drawAll();\n    var currentScore = -1;\n\n    function updateScore(value) {\n        document.getElementById(\"score\").textContent = \"SCORE: \" + ++currentScore;\n    }\n\n    updateScore();\n\n    function resetGame(snake) {\n        snake.clearAll();\n        snake.reset();\n        food.clear();\n        food.setNewPosition();\n        currentScore = -1;\n        updateScore();\n    }\n\n    function update() {\n        var keyCode = reverseDirKeyLookup[snake.currentDirection];\n        var insideWorld = insideWorldBounds(keyCode, snake.head);\n        if (insideWorld) {\n            var check = checkCollisions(snake);\n            if (check) {\n                updateSnakeFromDirection(snake, keyCode);\n            }\n            checkCollisions(snake);\n        } else {\n            resetGame(snake);\n        }\n    }\n\n    function draw() {\n        food.draw();\n        snake.drawAll();\n    }\n\n    function gameLoop(timeStamp) {\n        if (gameRunning) {\n            if (timeStamp < lastFrameTimeMs + 1000 / maxFPS) {\n                requestAnimationFrame(gameLoop);\n                return;\n            }\n            lastFrameTimeMs = timeStamp;\n            //update();\n            draw();\n            requestAnimationFrame(gameLoop);\n        }\n    }\n    requestAnimationFrame(gameLoop);\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcHAuanM/ZDhlZSJdLCJuYW1lcyI6WyJHYW1lT2JqZWN0cyIsInJlcXVpcmUiLCJTbmFrZSIsIlNlZ21lbnQiLCJGb29kIiwiR3JpZCIsIndpbmRvdyIsIm9ubG9hZCIsImNhbnZhc1dpZHRoIiwiY2FudmFzSGVpZ2h0IiwiRlBTIiwiZ2FtZUxvb3AiLCJnYW1lUnVubmluZyIsImRpcktleUxvb2t1cCIsInJldmVyc2VEaXJLZXlMb29rdXAiLCJXRVNUIiwiTk9SVEgiLCJFQVNUIiwiU09VVEgiLCJ1bmFsbG93ZWREaXJMb29rdXAiLCJ1cGRhdGVIZWFkQnlEaXJlY3Rpb24iLCJ5IiwiU0VHTUVOVF9TSVpFIiwieCIsImZyaW5nZVNldCIsImNsb3NlZFNldCIsInZhbGlkRGlyZWN0aW9uQ2hhbmdlIiwia2V5Q29kZSIsImN1cnJlbnREaXJlY3Rpb24iLCJkaXJlY3Rpb24iLCJ1bmFsbG93ZWQiLCJpbnNpZGVXb3JsZEJvdW5kcyIsImhlYWQiLCJkaXJlY3Rpb25VcGRhdGUiLCJuZXdYIiwibmV3WSIsInVwZGF0ZVNuYWtlRnJvbURpcmVjdGlvbiIsInNuYWtlIiwia2V5Y29kZSIsImNvbG91ciIsImRyYXciLCJjdXJIZWFkWCIsImN1ckhlYWRZIiwidGFpbCIsImNsZWFyIiwibmV3VGFpbCIsIm5leHQiLCJuZXdIZWFkIiwiZGlyY3Rpb25VcGRhdGUiLCJjaGVja0NvbGxpc2lvbnMiLCJlcXVhbCIsImZvb2QiLCJpdGVtIiwiZ3JvdyIsInNldE5ld1Bvc2l0aW9uIiwidXBkYXRlU2NvcmUiLCJyZXNldEdhbWUiLCJjdXJyZW50Iiwic2VhcmNoIiwiZm9yRWFjaCIsIm5vZGUiLCJwdXNoIiwiYWRkQ2hpbGRyZW5Ub0ZyaW5nZVNldCIsInBhcmVudE5vZGUiLCJub3J0aENvb3JkcyIsInNvdXRoQ29vcmRzIiwid2VzdENvb3JkcyIsImVhc3RDb29yZHMiLCJjaGlsZHJlbiIsImdyaWQiLCJjZWxscyIsImNoaWxkIiwiZm91bmQiLCJjaGlsZElzSW5DbG9zZWQiLCJzb21lIiwiZCIsImRpc3RhbmNlRnJvbU5vZGVUb05vZGUiLCJMMiIsImRQbHVzTDIiLCJwYXJlbnQiLCJzb3J0IiwiYSIsImIiLCJmaW5kUm91dGUiLCJsZW5ndGgiLCJzaGlmdCIsImNvbnNvbGUiLCJsb2ciLCJub2RlSXNJbkNsb3NlZCIsIm5vZGUxIiwibm9kZTIiLCJub2RlMVgiLCJub2RlMVkiLCJub2RlMlgiLCJub2RlMlkiLCJkeCIsImR5IiwiZGlzdGFuY2UiLCJNYXRoIiwic3FydCIsInBvdyIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidmFsaWRVcGRhdGUiLCJjdXJOb2RlIiwiY291bnRlciIsInVwZGF0ZSIsImNhbnZhc0VsIiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsIndpZHRoIiwiaGVpZ2h0IiwiY3R4IiwiZ2V0Q29udGV4dCIsImciLCJsYXN0RnJhbWVUaW1lTXMiLCJtYXhGUFMiLCJkcmF3QWxsIiwiY3VycmVudFNjb3JlIiwidmFsdWUiLCJ0ZXh0Q29udGVudCIsImNsZWFyQWxsIiwicmVzZXQiLCJpbnNpZGVXb3JsZCIsImNoZWNrIiwidGltZVN0YW1wIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxjQUFjLG1CQUFBQyxDQUFRLENBQVIsQ0FBbEI7QUFDQSxJQUFJQyxRQUFRRixZQUFZRSxLQUF4QjtBQUNBLElBQUlDLFVBQVVILFlBQVlHLE9BQTFCO0FBQ0EsSUFBSUMsT0FBT0osWUFBWUksSUFBdkI7QUFDQSxJQUFJQyxPQUFPTCxZQUFZSyxJQUF2Qjs7QUFFQUMsT0FBT0MsTUFBUCxHQUFnQixZQUFXO0FBQ3ZCLFVBQU1DLGNBQWMsSUFBcEI7QUFDQSxVQUFNQyxlQUFlLEdBQXJCOztBQUVBLFFBQUlDLE1BQU0sRUFBVjtBQUNBLFFBQUlDLFFBQUo7QUFDQSxRQUFJQyxjQUFjLElBQWxCOztBQUVBLFFBQUlDLGVBQWU7QUFDZixZQUFJ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RTtBQUNIOztBQUVELGFBQVNvRCxNQUFULEdBQWtCO0FBQ2QsWUFBSWhGLFVBQVViLG9CQUFvQnVCLE1BQU1ULGdCQUExQixDQUFkO0FBQ0EsWUFBSWlHLGNBQWM5RixrQkFBa0JKLE9BQWxCLEVBQTJCVSxNQUFNTCxJQUFqQyxDQUFsQjtBQUNBLFlBQUc2RixXQUFILEVBQWdCO0FBQ1osZ0JBQUlDLFFBQVE3RSxnQkFBZ0JaLEtBQWhCLENBQVo7QUFDQSxnQkFBR3lGLEtBQUgsRUFBVTtBQUNOMUYseUNBQXlCQyxLQUF6QixFQUFnQ1YsT0FBaEM7QUFDSDtBQUNEc0IsNEJBQWdCWixLQUFoQjtBQUNILFNBTkQsTUFNTztBQUNIbUIsc0JBQVVuQixLQUFWO0FBQ0g7QUFDSjs7QUFFRCxhQUFTRyxJQUFULEdBQWdCO0FBQ1pXLGFBQUtYLElBQUw7QUFDQUgsY0FBTWtGLE9BQU47QUFDSDs7QUFFRCxhQUFTNUcsUUFBVCxDQUFrQm9ILFNBQWxCLEVBQTZCO0FBQ3hCLFlBQUduSCxXQUFILEVBQWdCO0FBQ2IsZ0JBQUdtSCxZQUFZVixrQkFBbUIsT0FBT0MsTUFBekMsRUFBa0Q7QUFDOUNVLHNDQUFzQnJILFFBQXRCO0FBQ0E7QUFDSDtBQUNEMEcsOEJBQWtCVSxTQUFsQjtBQUNBO0FBQ0F2RjtBQUNBd0Ysa0NBQXNCckgsUUFBdEI7QUFDSDtBQUNKO0FBQ0RxSCwwQkFBc0JySCxRQUF0QjtBQUNILENBcFZEIiwiZmlsZSI6IjAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgR2FtZU9iamVjdHMgPSByZXF1aXJlKFwiLi9zY3JpcHRzL3NuYWtlLmpzXCIpO1xyXG52YXIgU25ha2UgPSBHYW1lT2JqZWN0cy5TbmFrZTtcclxudmFyIFNlZ21lbnQgPSBHYW1lT2JqZWN0cy5TZWdtZW50O1xyXG52YXIgRm9vZCA9IEdhbWVPYmplY3RzLkZvb2Q7XHJcbnZhciBHcmlkID0gR2FtZU9iamVjdHMuR3JpZDtcclxuXHJcbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgIGNvbnN0IGNhbnZhc1dpZHRoID0gMTUyMDtcclxuICAgIGNvbnN0IGNhbnZhc0hlaWdodCA9IDkyMDtcclxuICAgIFxyXG4gICAgdmFyIEZQUyA9IDYwO1xyXG4gICAgdmFyIGdhbWVMb29wO1xyXG4gICAgdmFyIGdhbWVSdW5uaW5nID0gdHJ1ZTtcclxuXHJcbiAgICB2YXIgZGlyS2V5TG9va3VwID0ge1xyXG4gICAgICAgIDM3OiAnV0VTVCcsXHJcbiAgICAgICAgMzg6ICdOT1JUSCcsXHJcbiAgICAgICAgMzk6ICdFQVNUJyxcclxuICAgICAgICA0MDogJ1NPVVRIJ1xyXG4gICAgfTtcclxuXHJcbiAgICAgdmFyIHJldmVyc2VEaXJLZXlMb29rdXAgPSB7XHJcbiAgICAgICAgV0VTVDogMzcsXHJcbiAgICAgICAgTk9SVEg6IDM4LFxyXG4gICAgICAgIEVBU1Q6IDM5LFxyXG4gICAgICAgIFNPVVRIOiA0MFxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgdW5hbGxvd2VkRGlyTG9va3VwID0ge1xyXG4gICAgICAgICdXRVNUJzogMzksXHJcbiAgICAgICAgJ05PUlRIJzogNDAsXHJcbiAgICAgICAgJ0VBU1QnOiAzNyxcclxuICAgICAgICAnU09VVEgnOiAzOFxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgdXBkYXRlSGVhZEJ5RGlyZWN0aW9uID0ge1xyXG4gICAgICAgIE5PUlRIOiB7XHJcbiAgICAgICAgICAgIHk6IC0xICogU2VnbWVudC5TRUdNRU5UX1NJWkUsXHJcbiAgICAgICAgICAgIHg6IDBcclxuICAgICAgICB9LFxyXG4gICAgICAgIFNPVVRIOiB7XHJcbiAgICAgICAgICAgIHk6IFNlZ21lbnQuU0VHTUVOVF9TSVpFLFxyXG4gICAgICAgICAgICB4OiAwXHJcbiAgICAgICAgfSxcclxuICAgICAgICBFQVNUOiB7XHJcbiAgICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICAgIHg6IFNlZ21lbnQuU0VHTUVOVF9TSVpFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBXRVNUOiB7XHJcbiAgICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICAgIHg6IC0xICogU2VnbWVudC5TRUdNRU5UX1NJWkVcclxuICAgICAgICB9LCAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgZnJpbmdlU2V0ID0gW107XHJcbiAgICB2YXIgY2xvc2VkU2V0ID0gW107XHJcblxyXG4gICAgZnVuY3Rpb24gdmFsaWREaXJlY3Rpb25DaGFuZ2Uoa2V5Q29kZSwgY3VycmVudERpcmVjdGlvbikge1xyXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBkaXJLZXlMb29rdXBba2V5Q29kZV07XHJcbiAgICAgICAgaWYoY3VycmVudERpcmVjdGlvbiA9PT0gZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHVuYWxsb3dlZCA9IHVuYWxsb3dlZERpckxvb2t1cFtjdXJyZW50RGlyZWN0aW9uXVxyXG4gICAgICAgIHJldHVybiBrZXlDb2RlICE9IHVuYWxsb3dlZDtcclxuICAgIH0gICAgXHJcblxyXG4gICAgZnVuY3Rpb24gaW5zaWRlV29ybGRCb3VuZHMoa2V5Q29kZSwgaGVhZCkge1xyXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBkaXJLZXlMb29rdXBba2V5Q29kZV07XHJcbiAgICAgICAgdmFyIGRpcmVjdGlvblVwZGF0ZSA9IHVwZGF0ZUhlYWRCeURpcmVjdGlvbltkaXJlY3Rpb25dO1xyXG4gICAgICAgIHZhciBuZXdYID0gaGVhZC54ICsgZGlyZWN0aW9uVXBkYXRlLng7XHJcbiAgICAgICAgdmFyIG5ld1kgPSBoZWFkLnkgKyBkaXJlY3Rpb25VcGRhdGUueTtcclxuICAgICAgICByZXR1cm4gbmV3WCA8PSBjYW52YXNXaWR0aCAmJiAgbmV3WCA+PSAwICYmIG5ld1kgPD0gY2FudmFzSGVpZ2h0ICYmIG5ld1kgPj0gMDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVTbmFrZUZyb21EaXJlY3Rpb24oc25ha2UsIGtleWNvZGUpIHtcclxuICAgICAgICBzbmFrZS5oZWFkLmNvbG91ciA9ICdibGFjayc7XHJcbiAgICAgICAgc25ha2UuaGVhZC5kcmF3KCk7XHJcbiAgICAgICAgdmFyIGN1ckhlYWRYID0gc25ha2UuaGVhZC54O1xyXG4gICAgICAgIHZhciBjdXJIZWFkWSA9IHNuYWtlLmhlYWQueTtcclxuICAgICAgICBzbmFrZS50YWlsLmNsZWFyKCk7XHJcbiAgICAgICAgdmFyIG5ld1RhaWwgPSBzbmFrZS50YWlsLm5leHQ7XHJcbiAgICAgICAgdmFyIG5ld0hlYWQgPSBzbmFrZS50YWlsXHJcbiAgICAgICAgbmV3SGVhZC5uZXh0ID0gbnVsbDtcclxuICAgICAgICBzbmFrZS5oZWFkLm5leHQgPSBuZXdIZWFkO1xyXG4gICAgICAgIHNuYWtlLmhlYWQgPSBuZXdIZWFkO1xyXG4gICAgICAgIHNuYWtlLnRhaWwgPSBuZXdUYWlsO1xyXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBkaXJLZXlMb29rdXBba2V5Y29kZV07XHJcbiAgICAgICAgdmFyIGRpcmN0aW9uVXBkYXRlID0gdXBkYXRlSGVhZEJ5RGlyZWN0aW9uW2RpcmVjdGlvbl07XHJcbiAgICAgICAgc25ha2UuaGVhZC54ID0gY3VySGVhZFggKyBkaXJjdGlvblVwZGF0ZS54O1xyXG4gICAgICAgIHNuYWtlLmhlYWQueSA9IGN1ckhlYWRZICsgZGlyY3Rpb25VcGRhdGUueTtcclxuICAgICAgICBzbmFrZS5oZWFkLmNvbG91ciA9ICdyZWQnO1xyXG4gICAgICAgIHNuYWtlLmhlYWQuZHJhdygpO1xyXG4gICAgICAgIHNuYWtlLmN1cnJlbnREaXJlY3Rpb24gPSBkaXJlY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2hlY2tDb2xsaXNpb25zKHNuYWtlKSB7XHJcbiAgICAgICAgaWYoc25ha2UuaGVhZC5lcXVhbChmb29kLml0ZW0pKSB7XHJcbiAgICAgICAgICAgIHNuYWtlLmdyb3coKTtcclxuICAgICAgICAgICAgZm9vZC5zZXROZXdQb3NpdGlvbigpO1xyXG4gICAgICAgICAgICB1cGRhdGVTY29yZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHNuYWtlLmhlYWQuZXF1YWwoc25ha2UudGFpbCkpIHtcclxuICAgICAgICAgICAgcmVzZXRHYW1lKHNuYWtlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGN1cnJlbnQgPSBzbmFrZS50YWlsO1xyXG4gICAgICAgIHdoaWxlKGN1cnJlbnQgIT0gc25ha2UuaGVhZCkge1xyXG4gICAgICAgICAgICBpZihzbmFrZS5oZWFkLmVxdWFsKGN1cnJlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXNldEdhbWUoc25ha2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBzZWFyY2goKSB7XHJcbiAgICAgICAgZnJpbmdlU2V0LmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICBub2RlLmNsZWFyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY2xvc2VkU2V0LmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICBub2RlLmNvbG91ciA9IFwieWVsbG93XCI7XHJcbiAgICAgICAgICAgIG5vZGUuY2xlYXIoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBmcmluZ2VTZXQgPSBbXTtcclxuICAgICAgICBjbG9zZWRTZXQgPSBbXTtcclxuICAgICAgICBmcmluZ2VTZXQucHVzaChzbmFrZS5oZWFkKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRDaGlsZHJlblRvRnJpbmdlU2V0KHBhcmVudE5vZGUpIHtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgbm9ydGhDb29yZHMgPSB7XHJcbiAgICAgICAgICAgIHg6IHBhcmVudE5vZGUueC9TZWdtZW50LlNFR01FTlRfU0laRSxcclxuICAgICAgICAgICAgeTogKHBhcmVudE5vZGUueS1TZWdtZW50LlNFR01FTlRfU0laRSkvU2VnbWVudC5TRUdNRU5UX1NJWkVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzb3V0aENvb3JkcyA9IHtcclxuICAgICAgICAgICAgeDogcGFyZW50Tm9kZS54L1NlZ21lbnQuU0VHTUVOVF9TSVpFLFxyXG4gICAgICAgICAgICB5OiAocGFyZW50Tm9kZS55K1NlZ21lbnQuU0VHTUVOVF9TSVpFKS9TZWdtZW50LlNFR01FTlRfU0laRVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHdlc3RDb29yZHMgPSB7XHJcbiAgICAgICAgICAgIHg6IChwYXJlbnROb2RlLngtU2VnbWVudC5TRUdNRU5UX1NJWkUpL1NlZ21lbnQuU0VHTUVOVF9TSVpFLFxyXG4gICAgICAgICAgICB5OiBwYXJlbnROb2RlLnkvU2VnbWVudC5TRUdNRU5UX1NJWkVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBlYXN0Q29vcmRzID0ge1xyXG4gICAgICAgICAgICB4OiAocGFyZW50Tm9kZS54K1NlZ21lbnQuU0VHTUVOVF9TSVpFKS9TZWdtZW50LlNFR01FTlRfU0laRSxcclxuICAgICAgICAgICAgeTogcGFyZW50Tm9kZS55L1NlZ21lbnQuU0VHTUVOVF9TSVpFXHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgY2hpbGRyZW4gPSBbXTtcclxuICAgICAgICBpZihub3J0aENvb3Jkcy55ID49IDApIHtcclxuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChncmlkLmNlbGxzW25vcnRoQ29vcmRzLnhdW25vcnRoQ29vcmRzLnldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoc291dGhDb29yZHMueSA8PSBjYW52YXNIZWlnaHQpIHtcclxuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChncmlkLmNlbGxzW3NvdXRoQ29vcmRzLnhdW3NvdXRoQ29vcmRzLnldKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYod2VzdENvb3Jkcy54ID49IDApIHtcclxuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChncmlkLmNlbGxzW3dlc3RDb29yZHMueF1bd2VzdENvb3Jkcy55XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGVhc3RDb29yZHMueSA8PSBjYW52YXNXaWR0aCkge1xyXG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKGdyaWQuY2VsbHNbZWFzdENvb3Jkcy54XVtlYXN0Q29vcmRzLnldKTtcclxuICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgIGNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oY2hpbGQpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb3VuZCA9IG51bGw7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZElzSW5DbG9zZWQgPSBjbG9zZWRTZXQuc29tZShmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5lcXVhbChjaGlsZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZighY2hpbGRJc0luQ2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5kID0gcGFyZW50Tm9kZS5kICsgZGlzdGFuY2VGcm9tTm9kZVRvTm9kZShwYXJlbnROb2RlLCBjaGlsZCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgTDIgPSBkaXN0YW5jZUZyb21Ob2RlVG9Ob2RlKGNoaWxkLCBmb29kLml0ZW0pO1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuZFBsdXNMMiA9IGNoaWxkLmQgKyBMMjtcclxuICAgICAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IHBhcmVudE5vZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnJpbmdlU2V0LnB1c2goY2hpbGQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmcmluZ2VTZXQuc29ydChmdW5jdGlvbihhLGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGEuZFBsdXNMMiA+IGIuZFBsdXNMMiA/IDEgOiAtMTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbi8vaHR0cDovL21uZW1zdHVkaW8ub3JnL3BhdGgtZmluZGluZy1hLXN0YXIuaHRtXHJcbiAgICBmdW5jdGlvbiBmaW5kUm91dGUoKSB7XHJcbiAgICAgICAgLy8gZnJpbmdlU2V0LmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgIC8vICAgICBub2RlLmNvbG91ciA9IFwib3JhbmdlXCI7XHJcbiAgICAgICAgLy8gICAgIG5vZGUuZHJhdygpO1xyXG4gICAgICAgIC8vIH0pO1xyXG5cclxuICAgICAgICAvLyBjbG9zZWRTZXQuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgLy8gICAgIG5vZGUuY29sb3VyID0gXCJ5ZWxsb3dcIjtcclxuICAgICAgICAvLyAgICAgbm9kZS5kcmF3KCk7XHJcbiAgICAgICAgLy8gfSk7XHJcblxyXG5cclxuICAgICAgICBpZihmcmluZ2VTZXQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gZnJpbmdlU2V0LnNoaWZ0KCk7XHJcbiAgICAgICAgICAgIGlmKG5vZGUuZXF1YWwoZm9vZC5pdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJmb3VuZFwiKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vZGVJc0luQ2xvc2VkID0gY2xvc2VkU2V0LnNvbWUoZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmVxdWFsKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZighbm9kZUlzSW5DbG9zZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZWRTZXQucHVzaChub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICBhZGRDaGlsZHJlblRvRnJpbmdlU2V0KG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbmRSb3V0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGlzdGFuY2VGcm9tTm9kZVRvTm9kZShub2RlMSwgbm9kZTIpIHtcclxuICAgICAgICB2YXIgbm9kZTFYID0gbm9kZTEueDtcclxuICAgICAgICB2YXIgbm9kZTFZID0gbm9kZTEueTtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgbm9kZTJYID0gbm9kZTIueDtcclxuICAgICAgICB2YXIgbm9kZTJZID0gbm9kZTIueTtcclxuXHJcbiAgICAgICAgdmFyIGR4ID0gKG5vZGUyWCAtIG5vZGUxWCk7XHJcbiAgICAgICAgdmFyIGR5ID0gKG5vZGUyWSAtIG5vZGUxWSk7XHJcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KE1hdGgucG93KGR4LCAyKSArIE1hdGgucG93KGR5LCAyKSk7XHJcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgIGlmKGV2ZW50LmtleUNvZGUgPT09IDgxKSB7XHJcbiAgICAgICAgICAgIGdhbWVSdW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmKGV2ZW50LmtleUNvZGUgPT0gMzcgfHwgZXZlbnQua2V5Q29kZSA9PSAzOSB8fCBldmVudC5rZXlDb2RlID09IDM4IHx8IGV2ZW50LmtleUNvZGUgPT0gNDApIHsgLy9MRUZUXHJcbiAgICAgICAgICAgIHZhciB2YWxpZFVwZGF0ZSA9IHZhbGlkRGlyZWN0aW9uQ2hhbmdlKGV2ZW50LmtleUNvZGUsIHNuYWtlLmN1cnJlbnREaXJlY3Rpb24pICYmIGluc2lkZVdvcmxkQm91bmRzKGV2ZW50LmtleUNvZGUsIHNuYWtlLmhlYWQpO1xyXG4gICAgICAgICAgICBpZih2YWxpZFVwZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlU25ha2VGcm9tRGlyZWN0aW9uKHNuYWtlLCBldmVudC5rZXlDb2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZihldmVudC5rZXlDb2RlID09PSAzMikge1xyXG4gICAgICAgICAgICBzZWFyY2goKTtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSBmaW5kUm91dGUoKTtcclxuICAgICAgICAgICAgaWYobm9kZS5lcXVhbChmb29kLml0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICBmb29kLml0ZW0uY29sb3VyID0gXCJwaW5rXCI7XHJcbiAgICAgICAgICAgICAgICBmcmluZ2VTZXQuZm9yRWFjaChmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5jb2xvdXIgPSBcIm9yYW5nZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuZHJhdygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2xvc2VkU2V0LmZvckVhY2goZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUuY29sb3VyID0gXCJ5ZWxsb3dcIjtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLmRyYXcoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1ck5vZGUgPSBub2RlLnBhcmVudDtcclxuICAgICAgICAgICAgICAgIHZhciBjb3VudGVyID0gMDtcclxuICAgICAgICAgICAgICAgIHdoaWxlKGN1ck5vZGUgJiYgY291bnRlciA8ICAxMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJOb2RlLmRyYXcoXCJibHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1ck5vZGUgPSBjdXJOb2RlLnBhcmVudDtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudGVyKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcbi8qXHJcbiAgICAgICAgICAgICAgICAgKF8pICAgICAgXHJcbiAgXyBfXyBfX18gICBfXyBfIF8gXyBfXyAgXHJcbiB8ICdfIGAgXyBcXCAvIF9gIHwgfCAnXyBcXCBcclxuIHwgfCB8IHwgfCB8IChffCB8IHwgfCB8IHxcclxuIHxffCB8X3wgfF98XFxfXyxffF98X3wgfF98XHJcbiovXHJcbiAgICB2YXIgY2FudmFzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpO1xyXG4gICAgY2FudmFzRWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMTU4LCAxNjcsIDE4NCwgMC4yKSc7XHJcbiAgICBjYW52YXNFbC53aWR0aCA9IGNhbnZhc1dpZHRoO1xyXG4gICAgY2FudmFzRWwuaGVpZ2h0ID0gY2FudmFzSGVpZ2h0O1xyXG4gICAgdmFyIGN0eCA9IGNhbnZhc0VsLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICB2YXIgZyA9IEdhbWVPYmplY3RzO1xyXG4gICAgdmFyIHNuYWtlID0gbmV3IFNuYWtlKHtcclxuICAgICAgICB4OiBjYW52YXNXaWR0aC8yLFxyXG4gICAgICAgIHk6IGNhbnZhc0hlaWdodC8yLFxyXG4gICAgICAgIGN0eDogY3R4XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgZ3JpZCA9IG5ldyBHcmlkKGN0eCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCwgU2VnbWVudC5TRUdNRU5UX1NJWkUpO1xyXG4gICAgZ3JpZC5kcmF3KCk7XHJcbiAgICB2YXIgZm9vZCA9IG5ldyBGb29kKGN0eCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCk7XHJcblxyXG4gICAgdmFyIGxhc3RGcmFtZVRpbWVNcyA9IDAgLy8gVGhlIGxhc3QgdGltZSB0aGUgbG9vcCB3YXMgcnVuXHJcbiAgICB2YXIgbWF4RlBTID0gMzE7IC8vIFRoZSBtYXhpbXVtIEZQUyB3ZSB3YW50IHRvIGFsbG93XHJcbiAgICBzbmFrZS5jdXJyZW50RGlyZWN0aW9uID0gJ0VBU1QnO1xyXG4gICAgc25ha2UuZHJhd0FsbCgpO1xyXG4gICAgdmFyIGN1cnJlbnRTY29yZSA9IC0xO1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVTY29yZSh2YWx1ZSkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NvcmVcIikudGV4dENvbnRlbnQgPSBcIlNDT1JFOiBcIiArICsrY3VycmVudFNjb3JlO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVNjb3JlKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzZXRHYW1lKHNuYWtlKSB7XHJcbiAgICAgICAgc25ha2UuY2xlYXJBbGwoKTtcclxuICAgICAgICBzbmFrZS5yZXNldCgpO1xyXG4gICAgICAgIGZvb2QuY2xlYXIoKTtcclxuICAgICAgICBmb29kLnNldE5ld1Bvc2l0aW9uKCk7XHJcbiAgICAgICAgY3VycmVudFNjb3JlID0gLTE7XHJcbiAgICAgICAgdXBkYXRlU2NvcmUoKTsgICAgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcclxuICAgICAgICB2YXIga2V5Q29kZSA9IHJldmVyc2VEaXJLZXlMb29rdXBbc25ha2UuY3VycmVudERpcmVjdGlvbl07XHJcbiAgICAgICAgdmFyIGluc2lkZVdvcmxkID0gaW5zaWRlV29ybGRCb3VuZHMoa2V5Q29kZSwgc25ha2UuaGVhZCk7XHJcbiAgICAgICAgaWYoaW5zaWRlV29ybGQpIHtcclxuICAgICAgICAgICAgdmFyIGNoZWNrID0gY2hlY2tDb2xsaXNpb25zKHNuYWtlKTtcclxuICAgICAgICAgICAgaWYoY2hlY2spIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVNuYWtlRnJvbURpcmVjdGlvbihzbmFrZSwga2V5Q29kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2hlY2tDb2xsaXNpb25zKHNuYWtlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXNldEdhbWUoc25ha2UpOyAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkcmF3KCkge1xyXG4gICAgICAgIGZvb2QuZHJhdygpO1xyXG4gICAgICAgIHNuYWtlLmRyYXdBbGwoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnYW1lTG9vcCh0aW1lU3RhbXApIHtcclxuICAgICAgICAgaWYoZ2FtZVJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgaWYodGltZVN0YW1wIDwgbGFzdEZyYW1lVGltZU1zICsgKDEwMDAgLyBtYXhGUFMpKSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZ2FtZUxvb3ApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxhc3RGcmFtZVRpbWVNcyA9IHRpbWVTdGFtcDtcclxuICAgICAgICAgICAgLy91cGRhdGUoKTtcclxuICAgICAgICAgICAgZHJhdygpO1xyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZ2FtZUxvb3ApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShnYW1lTG9vcCk7XHJcbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXBwLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ },
/* 1 */
/***/ function(module, exports) {

	eval("function Segment(options) {\n    var me = this;\n\n    me.width = Segment.SEGMENT_SIZE;\n    me.height = Segment.SEGMENT_SIZE;\n    me.colour = options.colour || \"black\";\n    me.next = options.next || null;\n    me.prev = options.prev || null;\n    me.x = options.x;\n    me.y = options.y;\n    me.d = 0;\n    me.dPlusL2 = 0;\n    me.parent = options.parent;\n    me.ctx = options.ctx;\n}\n\nSegment.prototype.updatePos = function updatePos(x, y) {\n    this.x = x;\n    this.y = y;\n};\n\nSegment.prototype.draw = function draw(colour) {\n    var me = this;\n    me.ctx.fillStyle = colour || me.colour;\n    me.ctx.fillRect(me.x, me.y, me.width, me.height);\n};\n\nSegment.prototype.clear = function clear() {\n    var me = this;\n    me.ctx.clearRect(me.x, me.y, me.width, me.height);\n    me.ctx.strokeStyle = \"grey\";\n    me.ctx.strokeRect(me.x, me.y, me.width, me.height);\n};\n\nSegment.prototype.equal = function (otherSegment) {\n    var me = this;\n    if (me.x == otherSegment.x && me.y == otherSegment.y) {\n        return true;\n    } else {\n        return false;\n    }\n};\n\nSegment.SEGMENT_SIZE = 20;\n\nfunction Snake(options) {\n    var me = this;\n    me.x = options.x || 0;\n    me.y = options.y || 0;\n\n    me.ctx = options.ctx;\n    me.currentDirection = 'EAST';\n\n    me.reset();\n}\n\nSnake.prototype.reset = function reset() {\n    var me = this;\n\n    me.head = null;\n    me.tail = null;\n\n    var tail = new Segment({\n        x: me.x,\n        y: me.y,\n        ctx: me.ctx\n    });\n    var body = new Segment({\n        x: tail.x + Segment.SEGMENT_SIZE,\n        y: tail.y,\n        ctx: me.ctx\n    });\n    var head = new Segment({\n        x: body.x + Segment.SEGMENT_SIZE,\n        y: body.y,\n        colour: 'red',\n        ctx: me.ctx\n    });\n\n    tail.next = body;\n    body.next = head;\n    head.next = null;\n\n    me.head = head;\n    me.tail = tail;\n\n    me.updateTailByDirection = {\n        NORTH: {\n            y: Segment.SEGMENT_SIZE,\n            x: 0\n        },\n        SOUTH: {\n            y: -1 * Segment.SEGMENT_SIZE,\n            x: 0\n        },\n        EAST: {\n            y: 0,\n            x: -1 * Segment.SEGMENT_SIZE\n        },\n        WEST: {\n            y: 0,\n            x: Segment.SEGMENT_SIZE\n        }\n    };\n};\n\nSnake.prototype.drawAll = function drawAll() {\n    var me = this;\n    var segment = me.tail;\n    segment.draw();\n    while (segment.next) {\n        segment = segment.next;\n        segment.draw();\n    }\n};\n\nSnake.prototype.clearAll = function clearAll() {\n    var me = this;\n    var segment = me.tail;\n    segment.clear();\n    while (segment.next) {\n        segment = segment.next;\n        segment.clear();\n    }\n};\n\nSnake.prototype.grow = function grow() {\n    var me = this;\n    var directionUpdate = me.updateTailByDirection[me.currentDirection];\n\n    var newTail = new Segment({\n        x: me.tail.x + directionUpdate.x,\n        y: me.tail.y + directionUpdate.y,\n        ctx: me.ctx\n    });\n    newTail.next = me.tail;\n    me.tail = newTail;\n};\n\nfunction Food(ctx, canvasWidth, canvasHeight) {\n    var me = this;\n    me.allFoodPositionsLookup = [];\n    var i, j;\n    for (i = 0; i < canvasWidth; i += Segment.SEGMENT_SIZE) {\n        for (j = 0; j < canvasHeight; j += Segment.SEGMENT_SIZE) {\n            me.allFoodPositionsLookup.push({ x: i, y: j });\n        }\n    }\n    var startPosition = me.getRandXY();\n    me.item = new Segment({\n        ctx: ctx,\n        x: startPosition.x,\n        y: startPosition.y,\n        colour: 'green'\n    });\n}\n\nFood.prototype.getRandXY = function getRandXY() {\n    function getRandomInt(min, max) {\n        return Math.floor(Math.random() * (max - min + 1)) + min;\n    }\n    var me = this;\n    var min = 0;\n    var max = me.allFoodPositionsLookup.length;\n\n    return me.allFoodPositionsLookup[getRandomInt(min, max)];\n};\n\nFood.prototype.setNewPosition = function setNewPosition() {\n    var me = this;\n    var pos = me.getRandXY();\n    me.item.colour = \"green\";\n    me.item.x = pos.x;\n    me.item.y = pos.y;\n};\n\nFood.prototype.draw = function draw() {\n    this.item.draw();\n};\n\nFood.prototype.clear = function clear() {\n    this.item.clear();\n};\n\nfunction Grid(ctx, width, height, cellSize) {\n    var me = this;\n    me.cells = [];\n    me.ctx = ctx;\n    me.width = width;\n    me.height = height;\n    me.cellSize = cellSize;\n\n    var x, y;\n    for (x = 0; x < width; x += cellSize) {\n        for (y = 0; y < height; y += cellSize) {\n            var index = x / cellSize;\n            var newCell = new Segment({\n                x: x,\n                y: y,\n                width: Segment.SEGMENT_SIZE,\n                height: Segment.SEGMENT_SIZE,\n                ctx: ctx\n            });\n            if (!me.cells[index]) {\n                me.cells[index] = [newCell];\n            } else {\n                me.cells[index].push(newCell);\n            }\n        }\n    }\n}\n\nGrid.prototype.draw = function draw() {\n    var me = this;\n    for (x = 0; x < me.width; x += me.cellSize) {\n        for (y = 0; y < me.height; y += me.cellSize) {\n            var cell = me.cells[x / me.cellSize][y / me.cellSize];\n            me.ctx.strokeStyle = \"grey\";\n            me.ctx.strokeRect(cell.x, cell.y, cell.width, cell.height);\n        }\n    }\n};\n\nmodule.exports = {\n    Food: Food,\n    Snake: Snake,\n    Segment: Segment,\n    Grid: Grid\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zY3JpcHRzL3NuYWtlLmpzP2FlZTMiXSwibmFtZXMiOlsiU2VnbWVudCIsIm9wdGlvbnMiLCJtZSIsIndpZHRoIiwiU0VHTUVOVF9TSVpFIiwiaGVpZ2h0IiwiY29sb3VyIiwibmV4dCIsInByZXYiLCJ4IiwieSIsImQiLCJkUGx1c0wyIiwicGFyZW50IiwiY3R4IiwicHJvdG90eXBlIiwidXBkYXRlUG9zIiwiZHJhdyIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiY2xlYXIiLCJjbGVhclJlY3QiLCJzdHJva2VTdHlsZSIsInN0cm9rZVJlY3QiLCJlcXVhbCIsIm90aGVyU2VnbWVudCIsIlNuYWtlIiwiY3VycmVudERpcmVjdGlvbiIsInJlc2V0IiwiaGVhZCIsInRhaWwiLCJib2R5IiwidXBkYXRlVGFpbEJ5RGlyZWN0aW9uIiwiTk9SVEgiLCJTT1VUSCIsIkVBU1QiLCJXRVNUIiwiZHJhd0FsbCIsInNlZ21lbnQiLCJjbGVhckFsbCIsImdyb3ciLCJkaXJlY3Rpb25VcGRhdGUiLCJuZXdUYWlsIiwiRm9vZCIsImNhbnZhc1dpZHRoIiwiY2FudmFzSGVpZ2h0IiwiYWxsRm9vZFBvc2l0aW9uc0xvb2t1cCIsImkiLCJqIiwicHVzaCIsInN0YXJ0UG9zaXRpb24iLCJnZXRSYW5kWFkiLCJpdGVtIiwiZ2V0UmFuZG9tSW50IiwibWluIiwibWF4IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGVuZ3RoIiwic2V0TmV3UG9zaXRpb24iLCJwb3MiLCJHcmlkIiwiY2VsbFNpemUiLCJjZWxscyIsImluZGV4IiwibmV3Q2VsbCIsImNlbGwiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxPQUFULENBQWlCQyxPQUFqQixFQUEwQjtBQUN0QixRQUFJQyxLQUFLLElBQVQ7O0FBRUFBLE9BQUdDLEtBQUgsR0FBV0gsUUFBUUksWUFBbkI7QUFDQUYsT0FBR0csTUFBSCxHQUFZTCxRQUFRSSxZQUFwQjtBQUNBRixP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QUFTQyxLQUFULENBQUosRUFBcUI7QUFDakIvRCxtQkFBRzhELEtBQUgsQ0FBU0MsS0FBVCxJQUFrQixDQUFDQyxPQUFELENBQWxCO0FBQ0gsYUFGRCxNQUVPO0FBQ0hoRSxtQkFBRzhELEtBQUgsQ0FBU0MsS0FBVCxFQUFnQmhCLElBQWhCLENBQXFCaUIsT0FBckI7QUFDSDtBQUNKO0FBQ0o7QUFDSjs7QUFFREosS0FBSy9DLFNBQUwsQ0FBZUUsSUFBZixHQUFzQixTQUFTQSxJQUFULEdBQWdCO0FBQ2xDLFFBQUlmLEtBQUssSUFBVDtBQUNBLFNBQUlPLElBQUksQ0FBUixFQUFXQSxJQUFJUCxHQUFHQyxLQUFsQixFQUEwQk0sS0FBS1AsR0FBRzZELFFBQWxDLEVBQTRDO0FBQ3hDLGFBQUlyRCxJQUFJLENBQVIsRUFBWUEsSUFBSVIsR0FBR0csTUFBbkIsRUFBMkJLLEtBQUtSLEdBQUc2RCxRQUFuQyxFQUE2QztBQUN6QyxnQkFBSUksT0FBT2pFLEdBQUc4RCxLQUFILENBQVN2RCxJQUFFUCxHQUFHNkQsUUFBZCxFQUF3QnJELElBQUVSLEdBQUc2RCxRQUE3QixDQUFYO0FBQ0E3RCxlQUFHWSxHQUFILENBQU9RLFdBQVAsR0FBbUIsTUFBbkI7QUFDQXBCLGVBQUdZLEdBQUgsQ0FBT1MsVUFBUCxDQUFrQjRDLEtBQUsxRCxDQUF2QixFQUEwQjBELEtBQUt6RCxDQUEvQixFQUFrQ3lELEtBQUtoRSxLQUF2QyxFQUE4Q2dFLEtBQUs5RCxNQUFuRDtBQUNIO0FBQ0o7QUFFSixDQVZEOztBQWFBK0QsT0FBT0MsT0FBUCxHQUFpQjtBQUNiMUIsVUFBTUEsSUFETztBQUViakIsV0FBT0EsS0FGTTtBQUdiMUIsYUFBU0EsT0FISTtBQUliOEQsVUFBTUE7QUFKTyxDQUFqQiIsImZpbGUiOiIxLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gU2VnbWVudChvcHRpb25zKSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG5cclxuICAgIG1lLndpZHRoID0gU2VnbWVudC5TRUdNRU5UX1NJWkU7XHJcbiAgICBtZS5oZWlnaHQgPSBTZWdtZW50LlNFR01FTlRfU0laRTtcclxuICAgIG1lLmNvbG91ciA9IG9wdGlvbnMuY29sb3VyIHx8IFwiYmxhY2tcIjtcclxuICAgIG1lLm5leHQgPSBvcHRpb25zLm5leHQgfHwgbnVsbDtcclxuICAgIG1lLnByZXYgPSBvcHRpb25zLnByZXYgfHwgbnVsbDtcclxuICAgIG1lLnggPSBvcHRpb25zLng7XHJcbiAgICBtZS55ID0gb3B0aW9ucy55O1xyXG4gICAgbWUuZCA9IDA7XHJcbiAgICBtZS5kUGx1c0wyID0gMDtcclxuICAgIG1lLnBhcmVudCA9IG9wdGlvbnMucGFyZW50O1xyXG4gICAgbWUuY3R4ID0gb3B0aW9ucy5jdHg7XHJcbn1cclxuXHJcblNlZ21lbnQucHJvdG90eXBlLnVwZGF0ZVBvcyA9IGZ1bmN0aW9uIHVwZGF0ZVBvcyh4LCB5KSB7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxufTsgIFxyXG5cclxuU2VnbWVudC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uIGRyYXcoY29sb3VyKSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgbWUuY3R4LmZpbGxTdHlsZSA9IGNvbG91ciB8fCBtZS5jb2xvdXI7XHJcbiAgICBtZS5jdHguZmlsbFJlY3QobWUueCwgbWUueSwgbWUud2lkdGgsIG1lLmhlaWdodCk7XHJcbn07XHJcblxyXG5TZWdtZW50LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyKCkge1xyXG4gICAgdmFyIG1lID0gdGhpcztcclxuICAgIG1lLmN0eC5jbGVhclJlY3QobWUueCwgbWUueSwgbWUud2lkdGgsIG1lLmhlaWdodCk7XHJcbiAgICBtZS5jdHguc3Ryb2tlU3R5bGU9XCJncmV5XCI7XHJcbiAgICBtZS5jdHguc3Ryb2tlUmVjdChtZS54LCBtZS55LCBtZS53aWR0aCwgbWUuaGVpZ2h0KTtcclxufTtcclxuXHJcblNlZ21lbnQucHJvdG90eXBlLmVxdWFsID0gZnVuY3Rpb24ob3RoZXJTZWdtZW50KSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgaWYobWUueCA9PSBvdGhlclNlZ21lbnQueCAmJiBtZS55ID09IG90aGVyU2VnbWVudC55KSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufTtcclxuXHJcblNlZ21lbnQuU0VHTUVOVF9TSVpFID0gMjA7XHJcblxyXG5mdW5jdGlvbiBTbmFrZShvcHRpb25zKSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzOyAgIFxyXG4gICAgbWUueCA9IG9wdGlvbnMueCB8fCAwO1xyXG4gICAgbWUueSA9IG9wdGlvbnMueSB8fCAwO1xyXG5cclxuICAgIG1lLmN0eCA9IG9wdGlvbnMuY3R4O1xyXG4gICAgbWUuY3VycmVudERpcmVjdGlvbiA9ICdFQVNUJztcclxuXHJcbiAgICBtZS5yZXNldCgpO1xyXG59XHJcblxyXG5TbmFrZS5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiByZXNldCgpIHtcclxuICAgIHZhciBtZSA9IHRoaXM7XHJcbiAgICBcclxuICAgIG1lLmhlYWQgPSBudWxsO1xyXG4gICAgbWUudGFpbCA9IG51bGw7XHJcblxyXG4gICAgdmFyIHRhaWwgPSBuZXcgU2VnbWVudCh7XHJcbiAgICAgICAgeDogbWUueCxcclxuICAgICAgICB5OiBtZS55LFxyXG4gICAgICAgIGN0eDogbWUuY3R4XHJcbiAgICB9KTtcclxuICAgIHZhciBib2R5ID0gbmV3IFNlZ21lbnQoe1xyXG4gICAgICAgIHg6IHRhaWwueCArIFNlZ21lbnQuU0VHTUVOVF9TSVpFLFxyXG4gICAgICAgIHk6IHRhaWwueSxcclxuICAgICAgICBjdHg6IG1lLmN0eFxyXG4gICAgfSk7XHJcbiAgICB2YXIgaGVhZCA9IG5ldyBTZWdtZW50KHtcclxuICAgICAgICB4OiBib2R5LnggKyBTZWdtZW50LlNFR01FTlRfU0laRSxcclxuICAgICAgICB5OiBib2R5LnksXHJcbiAgICAgICAgY29sb3VyOiAncmVkJyxcclxuICAgICAgICBjdHg6IG1lLmN0eFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGFpbC5uZXh0ID0gYm9keTtcclxuICAgIGJvZHkubmV4dCA9IGhlYWQ7XHJcbiAgICBoZWFkLm5leHQgPSBudWxsO1xyXG5cclxuICAgIG1lLmhlYWQgPSBoZWFkO1xyXG4gICAgbWUudGFpbCA9IHRhaWw7XHJcblxyXG4gICAgbWUudXBkYXRlVGFpbEJ5RGlyZWN0aW9uID0ge1xyXG4gICAgICAgIE5PUlRIOiB7XHJcbiAgICAgICAgICAgIHk6IFNlZ21lbnQuU0VHTUVOVF9TSVpFLFxyXG4gICAgICAgICAgICB4OiAwXHJcbiAgICAgICAgfSxcclxuICAgICAgICBTT1VUSDoge1xyXG4gICAgICAgICAgICB5OiAtMSAqIFNlZ21lbnQuU0VHTUVOVF9TSVpFLFxyXG4gICAgICAgICAgICB4OiAwXHJcbiAgICAgICAgfSxcclxuICAgICAgICBFQVNUOiB7XHJcbiAgICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICAgIHg6IC0xICogU2VnbWVudC5TRUdNRU5UX1NJWkVcclxuICAgICAgICB9LFxyXG4gICAgICAgIFdFU1Q6IHtcclxuICAgICAgICAgICAgeTogMCxcclxuICAgICAgICAgICAgeDogU2VnbWVudC5TRUdNRU5UX1NJWkVcclxuICAgICAgICB9LCAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgfTtcclxuXHJcbn07XHJcblxyXG5TbmFrZS5wcm90b3R5cGUuZHJhd0FsbCA9IGZ1bmN0aW9uIGRyYXdBbGwoKSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgdmFyIHNlZ21lbnQgPSBtZS50YWlsO1xyXG4gICAgc2VnbWVudC5kcmF3KCk7XHJcbiAgICB3aGlsZShzZWdtZW50Lm5leHQpIHtcclxuICAgICAgICBzZWdtZW50ID0gc2VnbWVudC5uZXh0O1xyXG4gICAgICAgIHNlZ21lbnQuZHJhdygpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuU25ha2UucHJvdG90eXBlLmNsZWFyQWxsID0gZnVuY3Rpb24gY2xlYXJBbGwoKSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgdmFyIHNlZ21lbnQgPSBtZS50YWlsO1xyXG4gICAgc2VnbWVudC5jbGVhcigpO1xyXG4gICAgd2hpbGUoc2VnbWVudC5uZXh0KSB7XHJcbiAgICAgICAgc2VnbWVudCA9IHNlZ21lbnQubmV4dDtcclxuICAgICAgICBzZWdtZW50LmNsZWFyKCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5TbmFrZS5wcm90b3R5cGUuZ3JvdyA9IGZ1bmN0aW9uIGdyb3coKSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgdmFyIGRpcmVjdGlvblVwZGF0ZSA9IG1lLnVwZGF0ZVRhaWxCeURpcmVjdGlvblttZS5jdXJyZW50RGlyZWN0aW9uXTtcclxuXHJcbiAgICB2YXIgbmV3VGFpbCA9IG5ldyBTZWdtZW50KHtcclxuICAgICAgICB4OiBtZS50YWlsLnggKyBkaXJlY3Rpb25VcGRhdGUueCxcclxuICAgICAgICB5OiBtZS50YWlsLnkgKyBkaXJlY3Rpb25VcGRhdGUueSxcclxuICAgICAgICBjdHg6IG1lLmN0eFxyXG4gICAgfSk7XHJcbiAgICBuZXdUYWlsLm5leHQgPSBtZS50YWlsO1xyXG4gICAgbWUudGFpbCA9IG5ld1RhaWw7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBGb29kKGN0eCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCkge1xyXG4gICAgdmFyIG1lID0gdGhpcztcclxuICAgIG1lLmFsbEZvb2RQb3NpdGlvbnNMb29rdXAgPSBbXTtcclxuICAgIHZhciBpLGo7XHJcbiAgICBmb3IoaSA9IDAgOyBpIDwgY2FudmFzV2lkdGggOyBpICs9IFNlZ21lbnQuU0VHTUVOVF9TSVpFKSB7XHJcbiAgICAgICAgZm9yKGogPSAwOyBqIDwgY2FudmFzSGVpZ2h0IDsgaiArPSBTZWdtZW50LlNFR01FTlRfU0laRSkge1xyXG4gICAgICAgICAgICBtZS5hbGxGb29kUG9zaXRpb25zTG9va3VwLnB1c2goeyB4OiBpLCB5OiBqIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHZhciBzdGFydFBvc2l0aW9uID0gbWUuZ2V0UmFuZFhZKCk7XHJcbiAgICBtZS5pdGVtID0gbmV3IFNlZ21lbnQoe1xyXG4gICAgICAgIGN0eDogY3R4LFxyXG4gICAgICAgIHg6IHN0YXJ0UG9zaXRpb24ueCxcclxuICAgICAgICB5OiBzdGFydFBvc2l0aW9uLnksXHJcbiAgICAgICAgY29sb3VyOiAnZ3JlZW4nXHJcbiAgICB9KTtcclxufVxyXG5cclxuRm9vZC5wcm90b3R5cGUuZ2V0UmFuZFhZID0gZnVuY3Rpb24gZ2V0UmFuZFhZKCkge1xyXG4gICAgZnVuY3Rpb24gZ2V0UmFuZG9tSW50KG1pbiwgbWF4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xyXG4gICAgfVxyXG4gICAgdmFyIG1lID0gdGhpcztcclxuICAgIHZhciBtaW4gPSAwO1xyXG4gICAgdmFyIG1heCA9IG1lLmFsbEZvb2RQb3NpdGlvbnNMb29rdXAubGVuZ3RoO1xyXG4gICAgXHJcbiAgICByZXR1cm4gbWUuYWxsRm9vZFBvc2l0aW9uc0xvb2t1cFtnZXRSYW5kb21JbnQobWluLCBtYXgpXTtcclxufTtcclxuXHJcbkZvb2QucHJvdG90eXBlLnNldE5ld1Bvc2l0aW9uID0gZnVuY3Rpb24gc2V0TmV3UG9zaXRpb24oKSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgdmFyIHBvcyA9IG1lLmdldFJhbmRYWSgpO1xyXG4gICAgbWUuaXRlbS5jb2xvdXIgPSBcImdyZWVuXCI7XHJcbiAgICBtZS5pdGVtLnggPSBwb3MueDtcclxuICAgIG1lLml0ZW0ueSA9IHBvcy55OyAgIFxyXG59O1xyXG5cclxuRm9vZC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uIGRyYXcoKSB7XHJcbiAgICB0aGlzLml0ZW0uZHJhdygpO1xyXG59XHJcblxyXG5Gb29kLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyKCkge1xyXG4gICAgdGhpcy5pdGVtLmNsZWFyKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdyaWQoY3R4LCB3aWR0aCwgaGVpZ2h0LCBjZWxsU2l6ZSkge1xyXG4gICAgdmFyIG1lID0gdGhpcztcclxuICAgIG1lLmNlbGxzID0gW107XHJcbiAgICBtZS5jdHggPSBjdHg7XHJcbiAgICBtZS53aWR0aCA9IHdpZHRoO1xyXG4gICAgbWUuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgbWUuY2VsbFNpemUgPSBjZWxsU2l6ZTtcclxuXHJcbiAgICB2YXIgeCx5O1xyXG4gICAgZm9yKHggPSAwOyB4IDwgd2lkdGggOyB4ICs9IGNlbGxTaXplKSB7XHJcbiAgICAgICAgZm9yKHkgPSAwIDsgeSA8IGhlaWdodDsgeSArPSBjZWxsU2l6ZSkge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSB4L2NlbGxTaXplO1xyXG4gICAgICAgICAgICB2YXIgbmV3Q2VsbCA9IG5ldyBTZWdtZW50KHtcclxuICAgICAgICAgICAgICAgIHg6IHgsXHJcbiAgICAgICAgICAgICAgICB5OiB5LFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IFNlZ21lbnQuU0VHTUVOVF9TSVpFLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBTZWdtZW50LlNFR01FTlRfU0laRSxcclxuICAgICAgICAgICAgICAgIGN0eDogY3R4XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZighbWUuY2VsbHNbaW5kZXhdKSB7XHJcbiAgICAgICAgICAgICAgICBtZS5jZWxsc1tpbmRleF0gPSBbbmV3Q2VsbF07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtZS5jZWxsc1tpbmRleF0ucHVzaChuZXdDZWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuR3JpZC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uIGRyYXcoKSB7XHJcbiAgICB2YXIgbWUgPSB0aGlzO1xyXG4gICAgZm9yKHggPSAwOyB4IDwgbWUud2lkdGggOyB4ICs9IG1lLmNlbGxTaXplKSB7XHJcbiAgICAgICAgZm9yKHkgPSAwIDsgeSA8IG1lLmhlaWdodDsgeSArPSBtZS5jZWxsU2l6ZSkge1xyXG4gICAgICAgICAgICB2YXIgY2VsbCA9IG1lLmNlbGxzW3gvbWUuY2VsbFNpemVdW3kvbWUuY2VsbFNpemVdO1xyXG4gICAgICAgICAgICBtZS5jdHguc3Ryb2tlU3R5bGU9XCJncmV5XCI7XHJcbiAgICAgICAgICAgIG1lLmN0eC5zdHJva2VSZWN0KGNlbGwueCwgY2VsbC55LCBjZWxsLndpZHRoLCBjZWxsLmhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSAgICBcclxuICAgIFxyXG59XHJcbiAgICBcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgRm9vZDogRm9vZCxcclxuICAgIFNuYWtlOiBTbmFrZSxcclxuICAgIFNlZ21lbnQ6IFNlZ21lbnQsXHJcbiAgICBHcmlkOiBHcmlkLFxyXG59O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zY3JpcHRzL3NuYWtlLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==");

/***/ }
/******/ ]);